var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable;Reflect.get,Reflect.set;var __defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t));function encodePacket(e){let t=l=>{if(l===null)r.write8(0);else if(typeof l=="boolean")r.write8(1),r.write8(+l);else if(typeof l=="number")r.write8(2),r.write32(l|0);else if(typeof l=="string")r.write8(3),r.write(encodeUTF8(l));else if(l instanceof Uint8Array)r.write8(4),r.write(l);else if(l instanceof Array){r.write8(5),r.write32(l.length);for(let c of l)t(c)}else{let c=Object.keys(l);r.write8(6),r.write32(c.length);for(let i of c)r.write(encodeUTF8(i)),t(l[i])}},r=new ByteBuffer;return r.write32(0),r.write32(e.id<<1|+!e.isRequest),t(e.value),writeUInt32LE(r.buf,r.len-4,0),r.buf.subarray(0,r.len)}function decodePacket(e){let t=()=>{switch(r.read8()){case 0:return null;case 1:return!!r.read8();case 2:return r.read32();case 3:return decodeUTF8(r.read());case 4:return r.read();case 5:{let n=r.read32(),g=[];for(let s=0;s<n;s++)g.push(t());return g}case 6:{let n=r.read32(),g={};for(let s=0;s<n;s++)g[decodeUTF8(r.read())]=t();return g}default:throw new Error("Invalid packet")}},r=new ByteBuffer(e),l=r.read32(),c=(l&1)==0;l>>>=1;let i=t();if(r.ptr!==e.length)throw new Error("Invalid packet");return{id:l,isRequest:c,value:i}}var ByteBuffer=class{constructor(e=new Uint8Array(1024)){this.buf=e,this.len=0,this.ptr=0}_write(e){if(this.len+e>this.buf.length){let t=new Uint8Array((this.len+e)*2);t.set(this.buf),this.buf=t}return this.len+=e,this.len-e}write8(e){let t=this._write(1);this.buf[t]=e}write32(e){let t=this._write(4);writeUInt32LE(this.buf,e,t)}write(e){let t=this._write(4+e.length);writeUInt32LE(this.buf,e.length,t),this.buf.set(e,t+4)}_read(e){if(this.ptr+e>this.buf.length)throw new Error("Invalid packet");return this.ptr+=e,this.ptr-e}read8(){return this.buf[this._read(1)]}read32(){return readUInt32LE(this.buf,this._read(4))}read(){let e=this.read32(),t=new Uint8Array(e),r=this._read(t.length);return t.set(this.buf.subarray(r,r+e)),t}},encodeUTF8,decodeUTF8;if(typeof TextEncoder!="undefined"&&typeof TextDecoder!="undefined"){let e=new TextEncoder,t=new TextDecoder;encodeUTF8=r=>e.encode(r),decodeUTF8=r=>t.decode(r)}else if(typeof Buffer!="undefined")encodeUTF8=e=>{let t=Buffer.from(e);return t instanceof Uint8Array||(t=new Uint8Array(t)),t},decodeUTF8=e=>{let{buffer:t,byteOffset:r,byteLength:l}=e;return Buffer.from(t,r,l).toString()};else throw new Error("No UTF-8 codec found");function readUInt32LE(e,t){return e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24}function writeUInt32LE(e,t,r){e[r++]=t,e[r++]=t>>8,e[r++]=t>>16,e[r++]=t>>24}function validateTarget(e){if(e+="",e.indexOf(",")>=0)throw new Error(`Invalid target: ${e}`);return e}var canBeAnything=()=>null,mustBeBoolean=e=>typeof e=="boolean"?null:"a boolean",mustBeBooleanOrObject=e=>typeof e=="boolean"||typeof e=="object"&&!Array.isArray(e)?null:"a boolean or an object",mustBeString=e=>typeof e=="string"?null:"a string",mustBeRegExp=e=>e instanceof RegExp?null:"a RegExp object",mustBeInteger=e=>typeof e=="number"&&e===(e|0)?null:"an integer",mustBeFunction=e=>typeof e=="function"?null:"a function",mustBeArray=e=>Array.isArray(e)?null:"an array",mustBeObject=e=>typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"an object",mustBeArrayOrRecord=e=>typeof e=="object"&&e!==null?null:"an array or an object",mustBeObjectOrNull=e=>typeof e=="object"&&!Array.isArray(e)?null:"an object or null",mustBeStringOrBoolean=e=>typeof e=="string"||typeof e=="boolean"?null:"a string or a boolean",mustBeStringOrObject=e=>typeof e=="string"||typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"a string or an object",mustBeStringOrArray=e=>typeof e=="string"||Array.isArray(e)?null:"a string or an array",mustBeStringOrUint8Array=e=>typeof e=="string"||e instanceof Uint8Array?null:"a string or a Uint8Array";function getFlag(e,t,r,l){let c=e[r];if(t[r+""]=!0,c===void 0)return;let i=l(c);if(i!==null)throw new Error(`"${r}" must be ${i}`);return c}function checkForInvalidFlags(e,t,r){for(let l in e)if(!(l in t))throw new Error(`Invalid option ${r}: "${l}"`)}function validateInitializeOptions(e){let t=Object.create(null),r=getFlag(e,t,"wasmURL",mustBeString),l=getFlag(e,t,"worker",mustBeBoolean);return checkForInvalidFlags(e,t,"in startService() call"),{wasmURL:r,worker:l}}function pushLogFlags(e,t,r,l,c){let i=getFlag(t,r,"color",mustBeBoolean),n=getFlag(t,r,"logLevel",mustBeString),g=getFlag(t,r,"logLimit",mustBeInteger);i!==void 0?e.push(`--color=${i}`):l&&e.push("--color=true"),e.push(`--log-level=${n||c}`),e.push(`--log-limit=${g||0}`)}function pushCommonFlags(e,t,r){let l=getFlag(t,r,"legalComments",mustBeString),c=getFlag(t,r,"sourceRoot",mustBeString),i=getFlag(t,r,"sourcesContent",mustBeBoolean),n=getFlag(t,r,"target",mustBeStringOrArray),g=getFlag(t,r,"format",mustBeString),s=getFlag(t,r,"globalName",mustBeString),k=getFlag(t,r,"minify",mustBeBoolean),E=getFlag(t,r,"minifySyntax",mustBeBoolean),x=getFlag(t,r,"minifyWhitespace",mustBeBoolean),S=getFlag(t,r,"minifyIdentifiers",mustBeBoolean),w=getFlag(t,r,"charset",mustBeString),_=getFlag(t,r,"treeShaking",mustBeBoolean),z=getFlag(t,r,"ignoreAnnotations",mustBeBoolean),G=getFlag(t,r,"jsx",mustBeString),Q=getFlag(t,r,"jsxFactory",mustBeString),H=getFlag(t,r,"jsxFragment",mustBeString),Z=getFlag(t,r,"define",mustBeObject),ee=getFlag(t,r,"pure",mustBeArray),ne=getFlag(t,r,"keepNames",mustBeBoolean);if(l&&e.push(`--legal-comments=${l}`),c!==void 0&&e.push(`--source-root=${c}`),i!==void 0&&e.push(`--sources-content=${i}`),n&&(Array.isArray(n)?e.push(`--target=${Array.from(n).map(validateTarget).join(",")}`):e.push(`--target=${validateTarget(n)}`)),g&&e.push(`--format=${g}`),s&&e.push(`--global-name=${s}`),k&&e.push("--minify"),E&&e.push("--minify-syntax"),x&&e.push("--minify-whitespace"),S&&e.push("--minify-identifiers"),w&&e.push(`--charset=${w}`),_!==void 0&&e.push(`--tree-shaking=${_}`),z&&e.push("--ignore-annotations"),G&&e.push(`--jsx=${G}`),Q&&e.push(`--jsx-factory=${Q}`),H&&e.push(`--jsx-fragment=${H}`),Z)for(let q in Z){if(q.indexOf("=")>=0)throw new Error(`Invalid define: ${q}`);e.push(`--define:${q}=${Z[q]}`)}if(ee)for(let q of ee)e.push(`--pure:${q}`);ne&&e.push("--keep-names")}function flagsForBuildOptions(e,t,r,l,c){var i;let n=[],g=[],s=Object.create(null),k=null,E=null,x=null;pushLogFlags(n,t,s,r,l),pushCommonFlags(n,t,s);let S=getFlag(t,s,"sourcemap",mustBeStringOrBoolean),w=getFlag(t,s,"bundle",mustBeBoolean),_=getFlag(t,s,"watch",mustBeBooleanOrObject),z=getFlag(t,s,"splitting",mustBeBoolean),G=getFlag(t,s,"preserveSymlinks",mustBeBoolean),Q=getFlag(t,s,"metafile",mustBeBoolean),H=getFlag(t,s,"outfile",mustBeString),Z=getFlag(t,s,"outdir",mustBeString),ee=getFlag(t,s,"outbase",mustBeString),ne=getFlag(t,s,"platform",mustBeString),q=getFlag(t,s,"tsconfig",mustBeString),ie=getFlag(t,s,"resolveExtensions",mustBeArray),ae=getFlag(t,s,"nodePaths",mustBeArray),oe=getFlag(t,s,"mainFields",mustBeArray),ce=getFlag(t,s,"conditions",mustBeArray),d=getFlag(t,s,"external",mustBeArray),u=getFlag(t,s,"loader",mustBeObject),a=getFlag(t,s,"outExtension",mustBeObject),f=getFlag(t,s,"publicPath",mustBeString),N=getFlag(t,s,"entryNames",mustBeString),I=getFlag(t,s,"chunkNames",mustBeString),D=getFlag(t,s,"assetNames",mustBeString),U=getFlag(t,s,"inject",mustBeArray),T=getFlag(t,s,"banner",mustBeObject),P=getFlag(t,s,"footer",mustBeObject),y=getFlag(t,s,"entryPoints",mustBeArrayOrRecord),C=getFlag(t,s,"absWorkingDir",mustBeString),O=getFlag(t,s,"stdin",mustBeObject),j=(i=getFlag(t,s,"write",mustBeBoolean))!=null?i:c,$=getFlag(t,s,"allowOverwrite",mustBeBoolean),p=getFlag(t,s,"incremental",mustBeBoolean)===!0;if(s.plugins=!0,checkForInvalidFlags(t,s,`in ${e}() call`),S&&n.push(`--sourcemap${S===!0?"":`=${S}`}`),w&&n.push("--bundle"),$&&n.push("--allow-overwrite"),_)if(n.push("--watch"),typeof _=="boolean")x={};else{let o=Object.create(null),m=getFlag(_,o,"onRebuild",mustBeFunction);checkForInvalidFlags(_,o,`on "watch" in ${e}() call`),x={onRebuild:m}}if(z&&n.push("--splitting"),G&&n.push("--preserve-symlinks"),Q&&n.push("--metafile"),H&&n.push(`--outfile=${H}`),Z&&n.push(`--outdir=${Z}`),ee&&n.push(`--outbase=${ee}`),ne&&n.push(`--platform=${ne}`),q&&n.push(`--tsconfig=${q}`),ie){let o=[];for(let m of ie){if(m+="",m.indexOf(",")>=0)throw new Error(`Invalid resolve extension: ${m}`);o.push(m)}n.push(`--resolve-extensions=${o.join(",")}`)}if(f&&n.push(`--public-path=${f}`),N&&n.push(`--entry-names=${N}`),I&&n.push(`--chunk-names=${I}`),D&&n.push(`--asset-names=${D}`),oe){let o=[];for(let m of oe){if(m+="",m.indexOf(",")>=0)throw new Error(`Invalid main field: ${m}`);o.push(m)}n.push(`--main-fields=${o.join(",")}`)}if(ce){let o=[];for(let m of ce){if(m+="",m.indexOf(",")>=0)throw new Error(`Invalid condition: ${m}`);o.push(m)}n.push(`--conditions=${o.join(",")}`)}if(d)for(let o of d)n.push(`--external:${o}`);if(T)for(let o in T){if(o.indexOf("=")>=0)throw new Error(`Invalid banner file type: ${o}`);n.push(`--banner:${o}=${T[o]}`)}if(P)for(let o in P){if(o.indexOf("=")>=0)throw new Error(`Invalid footer file type: ${o}`);n.push(`--footer:${o}=${P[o]}`)}if(U)for(let o of U)n.push(`--inject:${o}`);if(u)for(let o in u){if(o.indexOf("=")>=0)throw new Error(`Invalid loader extension: ${o}`);n.push(`--loader:${o}=${u[o]}`)}if(a)for(let o in a){if(o.indexOf("=")>=0)throw new Error(`Invalid out extension: ${o}`);n.push(`--out-extension:${o}=${a[o]}`)}if(y)if(Array.isArray(y))for(let o of y)g.push(["",o+""]);else for(let[o,m]of Object.entries(y))g.push([o+"",m+""]);if(O){let o=Object.create(null),m=getFlag(O,o,"contents",mustBeString),R=getFlag(O,o,"resolveDir",mustBeString),h=getFlag(O,o,"sourcefile",mustBeString),v=getFlag(O,o,"loader",mustBeString);checkForInvalidFlags(O,o,'in "stdin" object'),h&&n.push(`--sourcefile=${h}`),v&&n.push(`--loader=${v}`),R&&(E=R+""),k=m?m+"":""}let b=[];if(ae)for(let o of ae)o+="",b.push(o);return{entries:g,flags:n,write:j,stdinContents:k,stdinResolveDir:E,absWorkingDir:C,incremental:p,nodePaths:b,watch:x}}function flagsForTransformOptions(e,t,r,l){let c=[],i=Object.create(null);pushLogFlags(c,t,i,r,l),pushCommonFlags(c,t,i);let n=getFlag(t,i,"sourcemap",mustBeStringOrBoolean),g=getFlag(t,i,"tsconfigRaw",mustBeStringOrObject),s=getFlag(t,i,"sourcefile",mustBeString),k=getFlag(t,i,"loader",mustBeString),E=getFlag(t,i,"banner",mustBeString),x=getFlag(t,i,"footer",mustBeString);return checkForInvalidFlags(t,i,`in ${e}() call`),n&&c.push(`--sourcemap=${n===!0?"external":n}`),g&&c.push(`--tsconfig-raw=${typeof g=="string"?g:JSON.stringify(g)}`),s&&c.push(`--sourcefile=${s}`),k&&c.push(`--loader=${k}`),E&&c.push(`--banner=${E}`),x&&c.push(`--footer=${x}`),c}function createChannel(e){let t=new Map,r=new Map,l=new Map,c=new Map,i=0,n=!1,g=0,s=0,k=new Uint8Array(16*1024),E=0,x=d=>{let u=E+d.length;if(u>k.length){let f=new Uint8Array(u*2);f.set(k),k=f}k.set(d,E),E+=d.length;let a=0;for(;a+4<=E;){let f=readUInt32LE(k,a);if(a+4+f>E)break;a+=4,Q(k.subarray(a,a+f)),a+=f}a>0&&(k.copyWithin(0,a,E),E-=a)},S=()=>{n=!0;for(let d of t.values())d("The service was stopped",null);t.clear();for(let d of c.values())d.onWait("The service was stopped");c.clear();for(let d of l.values())try{d(new Error("The service was stopped"),null)}catch(u){console.error(u)}l.clear()},w=(d,u,a)=>{if(n)return a("The service is no longer running",null);let f=g++;t.set(f,(N,I)=>{try{a(N,I)}finally{d&&d.unref()}}),d&&d.ref(),e.writeToStdin(encodePacket({id:f,isRequest:!0,value:u}))},_=(d,u)=>{if(n)throw new Error("The service is no longer running");e.writeToStdin(encodePacket({id:d,isRequest:!1,value:u}))},z=async(d,u)=>{try{switch(u.command){case"ping":{_(d,{});break}case"start":{let a=r.get(u.key);a?_(d,await a(u)):_(d,{});break}case"resolve":{let a=r.get(u.key);a?_(d,await a(u)):_(d,{});break}case"load":{let a=r.get(u.key);a?_(d,await a(u)):_(d,{});break}case"serve-request":{let a=c.get(u.serveID);a&&a.onRequest&&a.onRequest(u.args),_(d,{});break}case"serve-wait":{let a=c.get(u.serveID);a&&a.onWait(u.error),_(d,{});break}case"watch-rebuild":{let a=l.get(u.watchID);try{a&&a(null,u.args)}catch(f){console.error(f)}_(d,{});break}default:throw new Error("Invalid command: "+u.command)}}catch(a){_(d,{errors:[extractErrorMessageV8(a,e,null,void 0,"")]})}},G=!0,Q=d=>{if(G){G=!1;let a=String.fromCharCode(...d);if(a!=="0.13.11")throw new Error(`Cannot start service: Host version "0.13.11" does not match binary version ${JSON.stringify(a)}`);return}let u=decodePacket(d);if(u.isRequest)z(u.id,u.value);else{let a=t.get(u.id);t.delete(u.id),u.value.error?a(u.value.error,{}):a(null,u.value)}},H=async(d,u,a,f)=>{let N=[],I=[],D={},U={},T=0,P=0,y=[];u=[...u];for(let $ of u){let p={};if(typeof $!="object")throw new Error(`Plugin at index ${P} must be an object`);let b=getFlag($,p,"name",mustBeString);if(typeof b!="string"||b==="")throw new Error(`Plugin at index ${P} is missing a name`);try{let o=getFlag($,p,"setup",mustBeFunction);if(typeof o!="function")throw new Error("Plugin is missing a setup function");checkForInvalidFlags($,p,`on plugin ${JSON.stringify(b)}`);let m={name:b,onResolve:[],onLoad:[]};P++;let R=o({initialOptions:d,onStart(h){let v='This error came from the "onStart" callback registered here',L=extractCallerV8(new Error(v),e,"onStart");N.push({name:b,callback:h,note:L})},onEnd(h){let v='This error came from the "onEnd" callback registered here',L=extractCallerV8(new Error(v),e,"onEnd");I.push({name:b,callback:h,note:L})},onResolve(h,v){let L='This error came from the "onResolve" callback registered here',F=extractCallerV8(new Error(L),e,"onResolve"),B={},V=getFlag(h,B,"filter",mustBeRegExp),W=getFlag(h,B,"namespace",mustBeString);if(checkForInvalidFlags(h,B,`in onResolve() call for plugin ${JSON.stringify(b)}`),V==null)throw new Error("onResolve() call is missing a filter");let M=T++;D[M]={name:b,callback:v,note:F},m.onResolve.push({id:M,filter:V.source,namespace:W||""})},onLoad(h,v){let L='This error came from the "onLoad" callback registered here',F=extractCallerV8(new Error(L),e,"onLoad"),B={},V=getFlag(h,B,"filter",mustBeRegExp),W=getFlag(h,B,"namespace",mustBeString);if(checkForInvalidFlags(h,B,`in onLoad() call for plugin ${JSON.stringify(b)}`),V==null)throw new Error("onLoad() call is missing a filter");let M=T++;U[M]={name:b,callback:v,note:F},m.onLoad.push({id:M,filter:V.source,namespace:W||""})}});R&&await R,y.push(m)}catch(o){return{ok:!1,error:o,pluginName:b}}}const C=async $=>{switch($.command){case"start":{let p={errors:[],warnings:[]};return await Promise.all(N.map(async({name:b,callback:o,note:m})=>{try{let R=await o();if(R!=null){if(typeof R!="object")throw new Error(`Expected onStart() callback in plugin ${JSON.stringify(b)} to return an object`);let h={},v=getFlag(R,h,"errors",mustBeArray),L=getFlag(R,h,"warnings",mustBeArray);checkForInvalidFlags(R,h,`from onStart() callback in plugin ${JSON.stringify(b)}`),v!=null&&p.errors.push(...sanitizeMessages(v,"errors",f,b)),L!=null&&p.warnings.push(...sanitizeMessages(L,"warnings",f,b))}}catch(R){p.errors.push(extractErrorMessageV8(R,e,f,m&&m(),b))}})),p}case"resolve":{let p={},b="",o,m;for(let R of $.ids)try{({name:b,callback:o,note:m}=D[R]);let h=await o({path:$.path,importer:$.importer,namespace:$.namespace,resolveDir:$.resolveDir,kind:$.kind,pluginData:f.load($.pluginData)});if(h!=null){if(typeof h!="object")throw new Error(`Expected onResolve() callback in plugin ${JSON.stringify(b)} to return an object`);let v={},L=getFlag(h,v,"pluginName",mustBeString),F=getFlag(h,v,"path",mustBeString),B=getFlag(h,v,"namespace",mustBeString),V=getFlag(h,v,"external",mustBeBoolean),W=getFlag(h,v,"sideEffects",mustBeBoolean),M=getFlag(h,v,"pluginData",canBeAnything),te=getFlag(h,v,"errors",mustBeArray),re=getFlag(h,v,"warnings",mustBeArray),A=getFlag(h,v,"watchFiles",mustBeArray),J=getFlag(h,v,"watchDirs",mustBeArray);checkForInvalidFlags(h,v,`from onResolve() callback in plugin ${JSON.stringify(b)}`),p.id=R,L!=null&&(p.pluginName=L),F!=null&&(p.path=F),B!=null&&(p.namespace=B),V!=null&&(p.external=V),W!=null&&(p.sideEffects=W),M!=null&&(p.pluginData=f.store(M)),te!=null&&(p.errors=sanitizeMessages(te,"errors",f,b)),re!=null&&(p.warnings=sanitizeMessages(re,"warnings",f,b)),A!=null&&(p.watchFiles=sanitizeStringArray(A,"watchFiles")),J!=null&&(p.watchDirs=sanitizeStringArray(J,"watchDirs"));break}}catch(h){return{id:R,errors:[extractErrorMessageV8(h,e,f,m&&m(),b)]}}return p}case"load":{let p={},b="",o,m;for(let R of $.ids)try{({name:b,callback:o,note:m}=U[R]);let h=await o({path:$.path,namespace:$.namespace,pluginData:f.load($.pluginData)});if(h!=null){if(typeof h!="object")throw new Error(`Expected onLoad() callback in plugin ${JSON.stringify(b)} to return an object`);let v={},L=getFlag(h,v,"pluginName",mustBeString),F=getFlag(h,v,"contents",mustBeStringOrUint8Array),B=getFlag(h,v,"resolveDir",mustBeString),V=getFlag(h,v,"pluginData",canBeAnything),W=getFlag(h,v,"loader",mustBeString),M=getFlag(h,v,"errors",mustBeArray),te=getFlag(h,v,"warnings",mustBeArray),re=getFlag(h,v,"watchFiles",mustBeArray),A=getFlag(h,v,"watchDirs",mustBeArray);checkForInvalidFlags(h,v,`from onLoad() callback in plugin ${JSON.stringify(b)}`),p.id=R,L!=null&&(p.pluginName=L),F instanceof Uint8Array?p.contents=F:F!=null&&(p.contents=encodeUTF8(F)),B!=null&&(p.resolveDir=B),V!=null&&(p.pluginData=f.store(V)),W!=null&&(p.loader=W),M!=null&&(p.errors=sanitizeMessages(M,"errors",f,b)),te!=null&&(p.warnings=sanitizeMessages(te,"warnings",f,b)),re!=null&&(p.watchFiles=sanitizeStringArray(re,"watchFiles")),A!=null&&(p.watchDirs=sanitizeStringArray(A,"watchDirs"));break}}catch(h){return{id:R,errors:[extractErrorMessageV8(h,e,f,m&&m(),b)]}}return p}default:throw new Error("Invalid command: "+$.command)}};let O=($,p,b)=>b();I.length>0&&(O=($,p,b)=>{(async()=>{for(const{name:o,callback:m,note:R}of I)try{await m($)}catch(h){$.errors.push(await new Promise(v=>p(h,o,R&&R(),v)))}})().then(b)});let j=0;return{ok:!0,requestPlugins:y,runOnEndCallbacks:O,pluginRefs:{ref(){++j==1&&r.set(a,C)},unref(){--j==0&&r.delete(a)}}}},Z=(d,u,a)=>{let f={},N=getFlag(u,f,"port",mustBeInteger),I=getFlag(u,f,"host",mustBeString),D=getFlag(u,f,"servedir",mustBeString),U=getFlag(u,f,"onRequest",mustBeFunction),T=i++,P,y=new Promise((C,O)=>{P=j=>{c.delete(T),j!==null?O(new Error(j)):C()}});return a.serve={serveID:T},checkForInvalidFlags(u,f,"in serve() call"),N!==void 0&&(a.serve.port=N),I!==void 0&&(a.serve.host=I),D!==void 0&&(a.serve.servedir=D),c.set(T,{onRequest:U,onWait:P}),{wait:y,stop(){w(d,{command:"serve-stop",serveID:T},()=>{})}}};const ee="warning",ne="silent";let q=d=>{let u=s++;const a=createObjectStash();let f,{refs:N,options:I,isTTY:D,callback:U}=d;if(typeof I=="object"){let y=I.plugins;if(y!==void 0){if(!Array.isArray(y))throw new Error('"plugins" must be an array');f=y}}let T=(y,C,O,j)=>{let $=[];try{pushLogFlags($,I,{},D,ee)}catch(b){}const p=extractErrorMessageV8(y,e,a,O,C);w(N,{command:"error",flags:$,error:p},()=>{p.detail=a.load(p.detail),j(p)})},P=(y,C)=>{T(y,C,void 0,O=>{U(failureErrorWithLog("Build failed",[O],[]),null)})};if(f&&f.length>0){if(e.isSync)return P(new Error("Cannot use plugins in synchronous API calls"),"");H(I,f,u,a).then(y=>{if(!y.ok)P(y.error,y.pluginName);else try{ie(__spreadProps(__spreadValues({},d),{key:u,details:a,logPluginError:T,requestPlugins:y.requestPlugins,runOnEndCallbacks:y.runOnEndCallbacks,pluginRefs:y.pluginRefs}))}catch(C){P(C,"")}},y=>P(y,""))}else try{ie(__spreadProps(__spreadValues({},d),{key:u,details:a,logPluginError:T,requestPlugins:null,runOnEndCallbacks:(y,C,O)=>O(),pluginRefs:null}))}catch(y){P(y,"")}},ie=({callName:d,refs:u,serveOptions:a,options:f,isTTY:N,defaultWD:I,callback:D,key:U,details:T,logPluginError:P,requestPlugins:y,runOnEndCallbacks:C,pluginRefs:O})=>{const j={ref(){O&&O.ref(),u&&u.ref()},unref(){O&&O.unref(),u&&u.unref()}};let $=!e.isBrowser,{entries:p,flags:b,write:o,stdinContents:m,stdinResolveDir:R,absWorkingDir:h,incremental:v,nodePaths:L,watch:F}=flagsForBuildOptions(d,f,N,ee,$),B={command:"build",key:U,entries:p,flags:b,write:o,stdinContents:m,stdinResolveDir:R,absWorkingDir:h||I,incremental:v,nodePaths:L};y&&(B.plugins=y);let V=a&&Z(j,a,B),W,M,te=(A,J)=>{A.outputFiles&&(J.outputFiles=A.outputFiles.map(convertOutputFiles)),A.metafile&&(J.metafile=JSON.parse(A.metafile)),A.writeToStdout!==void 0&&console.log(decodeUTF8(A.writeToStdout).replace(/\n$/,""))},re=(A,J)=>{let K={errors:replaceDetailsInMessages(A.errors,T),warnings:replaceDetailsInMessages(A.warnings,T)};te(A,K),C(K,P,()=>{if(K.errors.length>0)return J(failureErrorWithLog("Build failed",K.errors,K.warnings),null);if(A.rebuildID!==void 0){if(!W){let X=!1;W=()=>new Promise((le,se)=>{if(X||n)throw new Error("Cannot rebuild");w(j,{command:"rebuild",rebuildID:A.rebuildID},(Y,fe)=>{if(Y)return J(failureErrorWithLog("Build failed",[{pluginName:"",text:Y,location:null,notes:[],detail:void 0}],[]),null);re(fe,(ue,de)=>{ue?se(ue):le(de)})})}),j.ref(),W.dispose=()=>{X||(X=!0,w(j,{command:"rebuild-dispose",rebuildID:A.rebuildID},()=>{}),j.unref())}}K.rebuild=W}if(A.watchID!==void 0){if(!M){let X=!1;j.ref(),M=()=>{X||(X=!0,l.delete(A.watchID),w(j,{command:"watch-stop",watchID:A.watchID},()=>{}),j.unref())},F&&l.set(A.watchID,(le,se)=>{if(le){F.onRebuild&&F.onRebuild(le,null);return}let Y={errors:replaceDetailsInMessages(se.errors,T),warnings:replaceDetailsInMessages(se.warnings,T)};te(se,Y),C(Y,P,()=>{if(Y.errors.length>0){F.onRebuild&&F.onRebuild(failureErrorWithLog("Build failed",Y.errors,Y.warnings),null);return}se.rebuildID!==void 0&&(Y.rebuild=W),Y.stop=M,F.onRebuild&&F.onRebuild(null,Y)})})}K.stop=M}J(null,K)})};if(o&&e.isBrowser)throw new Error('Cannot enable "write" in the browser');if(v&&e.isSync)throw new Error('Cannot use "incremental" with a synchronous build');if(F&&e.isSync)throw new Error('Cannot use "watch" with a synchronous build');w(j,B,(A,J)=>{if(A)return D(new Error(A),null);if(V){let K=J,X=!1;j.ref();let le={port:K.port,host:K.host,wait:V.wait,stop(){X||(X=!0,V.stop(),j.unref())}};return j.ref(),V.wait.then(j.unref,j.unref),D(null,le)}return re(J,D)})};return{readFromStdout:x,afterClose:S,service:{buildOrServe:q,transform:({callName:d,refs:u,input:a,options:f,isTTY:N,fs:I,callback:D})=>{const U=createObjectStash();let T=P=>{try{if(typeof a!="string")throw new Error('The input to "transform" must be a string');let y=flagsForTransformOptions(d,f,N,ne);w(u,{command:"transform",flags:y,inputFS:P!==null,input:P!==null?P:a},(O,j)=>{if(O)return D(new Error(O),null);let $=replaceDetailsInMessages(j.errors,U),p=replaceDetailsInMessages(j.warnings,U),b=1,o=()=>--b==0&&D(null,{warnings:p,code:j.code,map:j.map});if($.length>0)return D(failureErrorWithLog("Transform failed",$,p),null);j.codeFS&&(b++,I.readFile(j.code,(m,R)=>{m!==null?D(m,null):(j.code=R,o())})),j.mapFS&&(b++,I.readFile(j.map,(m,R)=>{m!==null?D(m,null):(j.map=R,o())})),o()})}catch(y){let C=[];try{pushLogFlags(C,f,{},N,ne)}catch(j){}const O=extractErrorMessageV8(y,e,U,void 0,"");w(u,{command:"error",flags:C,error:O},()=>{O.detail=U.load(O.detail),D(failureErrorWithLog("Transform failed",[O],[]),null)})}};if(typeof a=="string"&&a.length>1024*1024){let P=T;T=()=>I.writeFile(a,P)}T(null)},formatMessages:({callName:d,refs:u,messages:a,options:f,callback:N})=>{let I=sanitizeMessages(a,"messages",null,"");if(!f)throw new Error(`Missing second argument in ${d}() call`);let D={},U=getFlag(f,D,"kind",mustBeString),T=getFlag(f,D,"color",mustBeBoolean),P=getFlag(f,D,"terminalWidth",mustBeInteger);if(checkForInvalidFlags(f,D,`in ${d}() call`),U===void 0)throw new Error(`Missing "kind" in ${d}() call`);if(U!=="error"&&U!=="warning")throw new Error(`Expected "kind" to be "error" or "warning" in ${d}() call`);let y={command:"format-msgs",messages:I,isWarning:U==="warning"};T!==void 0&&(y.color=T),P!==void 0&&(y.terminalWidth=P),w(u,y,(C,O)=>{if(C)return N(new Error(C),null);N(null,O.messages)})},analyzeMetafile:({callName:d,refs:u,metafile:a,options:f,callback:N})=>{f===void 0&&(f={});let I={},D=getFlag(f,I,"color",mustBeBoolean),U=getFlag(f,I,"verbose",mustBeBoolean);checkForInvalidFlags(f,I,`in ${d}() call`);let T={command:"analyze-metafile",metafile:a};D!==void 0&&(T.color=D),U!==void 0&&(T.verbose=U),w(u,T,(P,y)=>{if(P)return N(new Error(P),null);N(null,y.result)})}}}}function createObjectStash(){const e=new Map;let t=0;return{load(r){return e.get(r)},store(r){if(r===void 0)return-1;const l=t++;return e.set(l,r),l}}}function extractCallerV8(e,t,r){let l,c=!1;return()=>{if(c)return l;c=!0;try{let i=(e.stack+"").split(`
`);i.splice(1,1);let n=parseStackLinesV8(t,i,r);if(n)return l={text:e.message,location:n},l}catch(i){}}}function extractErrorMessageV8(e,t,r,l,c){let i="Internal error",n=null;try{i=(e&&e.message||e)+""}catch(g){}try{n=parseStackLinesV8(t,(e.stack+"").split(`
`),"")}catch(g){}return{pluginName:c,text:i,location:n,notes:l?[l]:[],detail:r?r.store(e):-1}}function parseStackLinesV8(e,t,r){let l="    at ";if(e.readFileSync&&!t[0].startsWith(l)&&t[1].startsWith(l))for(let c=1;c<t.length;c++){let i=t[c];if(!!i.startsWith(l))for(i=i.slice(l.length);;){let n=/^(?:new |async )?\S+ \((.*)\)$/.exec(i);if(n){i=n[1];continue}if(n=/^eval at \S+ \((.*)\)(?:, \S+:\d+:\d+)?$/.exec(i),n){i=n[1];continue}if(n=/^(\S+):(\d+):(\d+)$/.exec(i),n){let g;try{g=e.readFileSync(n[1],"utf8")}catch(x){break}let s=g.split(/\r\n|\r|\n|\u2028|\u2029/)[+n[2]-1]||"",k=+n[3]-1,E=s.slice(k,k+r.length)===r?r.length:0;return{file:n[1],namespace:"file",line:+n[2],column:encodeUTF8(s.slice(0,k)).length,length:encodeUTF8(s.slice(k,k+E)).length,lineText:s+`
`+t.slice(1).join(`
`),suggestion:""}}break}}return null}function failureErrorWithLog(e,t,r){let l=5,c=t.length<1?"":` with ${t.length} error${t.length<2?"":"s"}:`+t.slice(0,l+1).map((n,g)=>{if(g===l)return`
...`;if(!n.location)return`
error: ${n.text}`;let{file:s,line:k,column:E}=n.location,x=n.pluginName?`[plugin: ${n.pluginName}] `:"";return`
${s}:${k}:${E}: error: ${x}${n.text}`}).join(""),i=new Error(`${e}${c}`);return i.errors=t,i.warnings=r,i}function replaceDetailsInMessages(e,t){for(const r of e)r.detail=t.load(r.detail);return e}function sanitizeLocation(e,t){if(e==null)return null;let r={},l=getFlag(e,r,"file",mustBeString),c=getFlag(e,r,"namespace",mustBeString),i=getFlag(e,r,"line",mustBeInteger),n=getFlag(e,r,"column",mustBeInteger),g=getFlag(e,r,"length",mustBeInteger),s=getFlag(e,r,"lineText",mustBeString),k=getFlag(e,r,"suggestion",mustBeString);return checkForInvalidFlags(e,r,t),{file:l||"",namespace:c||"",line:i||0,column:n||0,length:g||0,lineText:s||"",suggestion:k||""}}function sanitizeMessages(e,t,r,l){let c=[],i=0;for(const n of e){let g={},s=getFlag(n,g,"pluginName",mustBeString),k=getFlag(n,g,"text",mustBeString),E=getFlag(n,g,"location",mustBeObjectOrNull),x=getFlag(n,g,"notes",mustBeArray),S=getFlag(n,g,"detail",canBeAnything),w=`in element ${i} of "${t}"`;checkForInvalidFlags(n,g,w);let _=[];if(x)for(const z of x){let G={},Q=getFlag(z,G,"text",mustBeString),H=getFlag(z,G,"location",mustBeObjectOrNull);checkForInvalidFlags(z,G,w),_.push({text:Q||"",location:sanitizeLocation(H,w)})}c.push({pluginName:s||l,text:k||"",location:sanitizeLocation(E,w),notes:_,detail:r?r.store(S):-1}),i++}return c}function sanitizeStringArray(e,t){const r=[];for(const l of e){if(typeof l!="string")throw new Error(`${JSON.stringify(t)} must be an array of strings`);r.push(l)}return r}function convertOutputFiles({path:e,contents:t}){let r=null;return{path:e,contents:t,get text(){return r===null&&(r=decodeUTF8(t)),r}}}var build=e=>ensureServiceIsRunning().build(e),initializePromise,longLivedService,ensureServiceIsRunning=()=>{if(longLivedService)return longLivedService;throw initializePromise?new Error('You need to wait for the promise returned from "initialize" to be resolved before calling this'):new Error('You need to call "initialize" before calling this')},initialize=e=>{e=validateInitializeOptions(e||{});let t=e.wasmURL,r=e.worker!==!1;if(!t)throw new Error('Must provide the "wasmURL" option');if(t+="",initializePromise)throw new Error('Cannot call "initialize" more than once');return initializePromise=startRunningService(t,r),initializePromise.catch(()=>{initializePromise=void 0}),initializePromise},startRunningService=async(e,t)=>{let r=await fetch(e);if(!r.ok)throw new Error(`Failed to download ${JSON.stringify(e)}`);let l=await r.arrayBuffer(),c=`{let global={};for(let o=self;o;o=Object.getPrototypeOf(o))for(let k of Object.getOwnPropertyNames(o))if(!(k in global))Object.defineProperty(global,k,{get:()=>self[k]});// Copyright 2018 The Go Authors. All rights reserved.
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.

(() => {
	// Map multiple JavaScript environments to a single common API,
	// preferring web standards over Node.js API.
	//
	// Environments considered:
	// - Browsers
	// - Node.js
	// - Electron
	// - Parcel
	// - Webpack

	if (typeof global !== "undefined") {
		// global already exists
	} else if (typeof window !== "undefined") {
		window.global = window;
	} else if (typeof self !== "undefined") {
		self.global = self;
	} else {
		throw new Error("cannot export Go (neither global, window nor self is defined)");
	}

	if (!global.require && typeof require !== "undefined") {
		global.require = require;
	}

	if (!global.fs && global.require) {
		const fs = require("fs");
		if (typeof fs === "object" && fs !== null && Object.keys(fs).length !== 0) {
			
    global.fs = Object.assign({}, fs, {
      // Hack around a Unicode bug in node: https://github.com/nodejs/node/issues/24550
      write(fd, buf, offset, length, position, callback) {
        if (offset === 0 && length === buf.length && position === null) {
          if (fd === process.stdout.fd) {
            try {
              process.stdout.write(buf, err => err ? callback(err, 0, null) : callback(null, length, buf));
            } catch (err) {
              callback(err, 0, null);
            }
            return;
          }
          if (fd === process.stderr.fd) {
            try {
              process.stderr.write(buf, err => err ? callback(err, 0, null) : callback(null, length, buf));
            } catch (err) {
              callback(err, 0, null);
            }
            return;
          }
        }
        fs.write(fd, buf, offset, length, position, callback);
      },
    });
  
		}
	}

	const enosys = () => {
		const err = new Error("not implemented");
		err.code = "ENOSYS";
		return err;
	};

	if (!global.fs) {
		let outputBuf = "";
		global.fs = {
			constants: { O_WRONLY: -1, O_RDWR: -1, O_CREAT: -1, O_TRUNC: -1, O_APPEND: -1, O_EXCL: -1 }, // unused
			writeSync(fd, buf) {
				outputBuf += decoder.decode(buf);
				const nl = outputBuf.lastIndexOf("\\n");
				if (nl != -1) {
					console.log(outputBuf.substr(0, nl));
					outputBuf = outputBuf.substr(nl + 1);
				}
				return buf.length;
			},
			write(fd, buf, offset, length, position, callback) {
				if (offset !== 0 || length !== buf.length || position !== null) {
					callback(enosys());
					return;
				}
				const n = this.writeSync(fd, buf);
				callback(null, n);
			},
			chmod(path, mode, callback) { callback(enosys()); },
			chown(path, uid, gid, callback) { callback(enosys()); },
			close(fd, callback) { callback(enosys()); },
			fchmod(fd, mode, callback) { callback(enosys()); },
			fchown(fd, uid, gid, callback) { callback(enosys()); },
			fstat(fd, callback) { callback(enosys()); },
			fsync(fd, callback) { callback(null); },
			ftruncate(fd, length, callback) { callback(enosys()); },
			lchown(path, uid, gid, callback) { callback(enosys()); },
			link(path, link, callback) { callback(enosys()); },
			lstat(path, callback) { callback(enosys()); },
			mkdir(path, perm, callback) { callback(enosys()); },
			open(path, flags, mode, callback) { callback(enosys()); },
			read(fd, buffer, offset, length, position, callback) { callback(enosys()); },
			readdir(path, callback) { callback(enosys()); },
			readlink(path, callback) { callback(enosys()); },
			rename(from, to, callback) { callback(enosys()); },
			rmdir(path, callback) { callback(enosys()); },
			stat(path, callback) { callback(enosys()); },
			symlink(path, link, callback) { callback(enosys()); },
			truncate(path, length, callback) { callback(enosys()); },
			unlink(path, callback) { callback(enosys()); },
			utimes(path, atime, mtime, callback) { callback(enosys()); },
		};
	}

	if (!global.process) {
		global.process = {
			getuid() { return -1; },
			getgid() { return -1; },
			geteuid() { return -1; },
			getegid() { return -1; },
			getgroups() { throw enosys(); },
			pid: -1,
			ppid: -1,
			umask() { throw enosys(); },
			cwd() { throw enosys(); },
			chdir() { throw enosys(); },
		}
	}

	if (!global.crypto && global.require) {
		const nodeCrypto = require("crypto");
		global.crypto = {
			getRandomValues(b) {
				nodeCrypto.randomFillSync(b);
			},
		};
	}
	if (!global.crypto) {
		throw new Error("global.crypto is not available, polyfill required (getRandomValues only)");
	}

	if (!global.performance) {
		global.performance = {
			now() {
				const [sec, nsec] = process.hrtime();
				return sec * 1000 + nsec / 1000000;
			},
		};
	}

	if (!global.TextEncoder && global.require) {
		global.TextEncoder = require("util").TextEncoder;
	}
	if (!global.TextEncoder) {
		throw new Error("global.TextEncoder is not available, polyfill required");
	}

	if (!global.TextDecoder && global.require) {
		global.TextDecoder = require("util").TextDecoder;
	}
	if (!global.TextDecoder) {
		throw new Error("global.TextDecoder is not available, polyfill required");
	}

	// End of polyfills for common API.

	const encoder = new TextEncoder("utf-8");
	const decoder = new TextDecoder("utf-8");

	global.Go = class {
		constructor() {
			this.argv = ["js"];
			this.env = {};
			this.exit = (code) => {
				if (code !== 0) {
					console.warn("exit code:", code);
				}
			};
			this._exitPromise = new Promise((resolve) => {
				this._resolveExitPromise = resolve;
			});
			this._pendingEvent = null;
			this._scheduledTimeouts = new Map();
			this._nextCallbackTimeoutID = 1;

			const setInt64 = (addr, v) => {
				this.mem.setUint32(addr + 0, v, true);
				this.mem.setUint32(addr + 4, Math.floor(v / 4294967296), true);
			}

			const getInt64 = (addr) => {
				const low = this.mem.getUint32(addr + 0, true);
				const high = this.mem.getInt32(addr + 4, true);
				return low + high * 4294967296;
			}

			const loadValue = (addr) => {
				const f = this.mem.getFloat64(addr, true);
				if (f === 0) {
					return undefined;
				}
				if (!isNaN(f)) {
					return f;
				}

				const id = this.mem.getUint32(addr, true);
				return this._values[id];
			}

			const storeValue = (addr, v) => {
				const nanHead = 0x7FF80000;

				if (typeof v === "number" && v !== 0) {
					if (isNaN(v)) {
						this.mem.setUint32(addr + 4, nanHead, true);
						this.mem.setUint32(addr, 0, true);
						return;
					}
					this.mem.setFloat64(addr, v, true);
					return;
				}

				if (v === undefined) {
					this.mem.setFloat64(addr, 0, true);
					return;
				}

				let id = this._ids.get(v);
				if (id === undefined) {
					id = this._idPool.pop();
					if (id === undefined) {
						id = this._values.length;
					}
					this._values[id] = v;
					this._goRefCounts[id] = 0;
					this._ids.set(v, id);
				}
				this._goRefCounts[id]++;
				let typeFlag = 0;
				switch (typeof v) {
					case "object":
						if (v !== null) {
							typeFlag = 1;
						}
						break;
					case "string":
						typeFlag = 2;
						break;
					case "symbol":
						typeFlag = 3;
						break;
					case "function":
						typeFlag = 4;
						break;
				}
				this.mem.setUint32(addr + 4, nanHead | typeFlag, true);
				this.mem.setUint32(addr, id, true);
			}

			const loadSlice = (addr) => {
				const array = getInt64(addr + 0);
				const len = getInt64(addr + 8);
				return new Uint8Array(this._inst.exports.mem.buffer, array, len);
			}

			const loadSliceOfValues = (addr) => {
				const array = getInt64(addr + 0);
				const len = getInt64(addr + 8);
				const a = new Array(len);
				for (let i = 0; i < len; i++) {
					a[i] = loadValue(array + i * 8);
				}
				return a;
			}

			const loadString = (addr) => {
				const saddr = getInt64(addr + 0);
				const len = getInt64(addr + 8);
				return decoder.decode(new DataView(this._inst.exports.mem.buffer, saddr, len));
			}

			const timeOrigin = Date.now() - performance.now();
			this.importObject = {
				go: {
					// Go's SP does not change as long as no Go code is running. Some operations (e.g. calls, getters and setters)
					// may synchronously trigger a Go event handler. This makes Go code get executed in the middle of the imported
					// function. A goroutine can switch to a new stack if the current stack is too small (see morestack function).
					// This changes the SP, thus we have to update the SP used by the imported function.

					// func wasmExit(code int32)
					"runtime.wasmExit": (sp) => {
						sp >>>= 0;
						const code = this.mem.getInt32(sp + 8, true);
						this.exited = true;
						delete this._inst;
						delete this._values;
						delete this._goRefCounts;
						delete this._ids;
						delete this._idPool;
						this.exit(code);
					},

					// func wasmWrite(fd uintptr, p unsafe.Pointer, n int32)
					"runtime.wasmWrite": (sp) => {
						sp >>>= 0;
						const fd = getInt64(sp + 8);
						const p = getInt64(sp + 16);
						const n = this.mem.getInt32(sp + 24, true);
						fs.writeSync(fd, new Uint8Array(this._inst.exports.mem.buffer, p, n));
					},

					// func resetMemoryDataView()
					"runtime.resetMemoryDataView": (sp) => {
						sp >>>= 0;
						this.mem = new DataView(this._inst.exports.mem.buffer);
					},

					// func nanotime1() int64
					"runtime.nanotime1": (sp) => {
						sp >>>= 0;
						setInt64(sp + 8, (timeOrigin + performance.now()) * 1000000);
					},

					// func walltime() (sec int64, nsec int32)
					"runtime.walltime": (sp) => {
						sp >>>= 0;
						const msec = (new Date).getTime();
						setInt64(sp + 8, msec / 1000);
						this.mem.setInt32(sp + 16, (msec % 1000) * 1000000, true);
					},

					// func scheduleTimeoutEvent(delay int64) int32
					"runtime.scheduleTimeoutEvent": (sp) => {
						sp >>>= 0;
						const id = this._nextCallbackTimeoutID;
						this._nextCallbackTimeoutID++;
						this._scheduledTimeouts.set(id, setTimeout(
							() => {
								this._resume();
								while (this._scheduledTimeouts.has(id)) {
									// for some reason Go failed to register the timeout event, log and try again
									// (temporary workaround for https://github.com/golang/go/issues/28975)
									console.warn("scheduleTimeoutEvent: missed timeout event");
									this._resume();
								}
							},
							getInt64(sp + 8) + 1, // setTimeout has been seen to fire up to 1 millisecond early
						));
						this.mem.setInt32(sp + 16, id, true);
					},

					// func clearTimeoutEvent(id int32)
					"runtime.clearTimeoutEvent": (sp) => {
						sp >>>= 0;
						const id = this.mem.getInt32(sp + 8, true);
						clearTimeout(this._scheduledTimeouts.get(id));
						this._scheduledTimeouts.delete(id);
					},

					// func getRandomData(r []byte)
					"runtime.getRandomData": (sp) => {
						sp >>>= 0;
						crypto.getRandomValues(loadSlice(sp + 8));
					},

					// func finalizeRef(v ref)
					"syscall/js.finalizeRef": (sp) => {
						sp >>>= 0;
						const id = this.mem.getUint32(sp + 8, true);
						this._goRefCounts[id]--;
						if (this._goRefCounts[id] === 0) {
							const v = this._values[id];
							this._values[id] = null;
							this._ids.delete(v);
							this._idPool.push(id);
						}
					},

					// func stringVal(value string) ref
					"syscall/js.stringVal": (sp) => {
						sp >>>= 0;
						storeValue(sp + 24, loadString(sp + 8));
					},

					// func valueGet(v ref, p string) ref
					"syscall/js.valueGet": (sp) => {
						sp >>>= 0;
						const result = Reflect.get(loadValue(sp + 8), loadString(sp + 16));
						sp = this._inst.exports.getsp() >>> 0; // see comment above
						storeValue(sp + 32, result);
					},

					// func valueSet(v ref, p string, x ref)
					"syscall/js.valueSet": (sp) => {
						sp >>>= 0;
						Reflect.set(loadValue(sp + 8), loadString(sp + 16), loadValue(sp + 32));
					},

					// func valueDelete(v ref, p string)
					"syscall/js.valueDelete": (sp) => {
						sp >>>= 0;
						Reflect.deleteProperty(loadValue(sp + 8), loadString(sp + 16));
					},

					// func valueIndex(v ref, i int) ref
					"syscall/js.valueIndex": (sp) => {
						sp >>>= 0;
						storeValue(sp + 24, Reflect.get(loadValue(sp + 8), getInt64(sp + 16)));
					},

					// valueSetIndex(v ref, i int, x ref)
					"syscall/js.valueSetIndex": (sp) => {
						sp >>>= 0;
						Reflect.set(loadValue(sp + 8), getInt64(sp + 16), loadValue(sp + 24));
					},

					// func valueCall(v ref, m string, args []ref) (ref, bool)
					"syscall/js.valueCall": (sp) => {
						sp >>>= 0;
						try {
							const v = loadValue(sp + 8);
							const m = Reflect.get(v, loadString(sp + 16));
							const args = loadSliceOfValues(sp + 32);
							const result = Reflect.apply(m, v, args);
							sp = this._inst.exports.getsp() >>> 0; // see comment above
							storeValue(sp + 56, result);
							this.mem.setUint8(sp + 64, 1);
						} catch (err) {
							sp = this._inst.exports.getsp() >>> 0; // see comment above
							storeValue(sp + 56, err);
							this.mem.setUint8(sp + 64, 0);
						}
					},

					// func valueInvoke(v ref, args []ref) (ref, bool)
					"syscall/js.valueInvoke": (sp) => {
						sp >>>= 0;
						try {
							const v = loadValue(sp + 8);
							const args = loadSliceOfValues(sp + 16);
							const result = Reflect.apply(v, undefined, args);
							sp = this._inst.exports.getsp() >>> 0; // see comment above
							storeValue(sp + 40, result);
							this.mem.setUint8(sp + 48, 1);
						} catch (err) {
							sp = this._inst.exports.getsp() >>> 0; // see comment above
							storeValue(sp + 40, err);
							this.mem.setUint8(sp + 48, 0);
						}
					},

					// func valueNew(v ref, args []ref) (ref, bool)
					"syscall/js.valueNew": (sp) => {
						sp >>>= 0;
						try {
							const v = loadValue(sp + 8);
							const args = loadSliceOfValues(sp + 16);
							const result = Reflect.construct(v, args);
							sp = this._inst.exports.getsp() >>> 0; // see comment above
							storeValue(sp + 40, result);
							this.mem.setUint8(sp + 48, 1);
						} catch (err) {
							sp = this._inst.exports.getsp() >>> 0; // see comment above
							storeValue(sp + 40, err);
							this.mem.setUint8(sp + 48, 0);
						}
					},

					// func valueLength(v ref) int
					"syscall/js.valueLength": (sp) => {
						sp >>>= 0;
						setInt64(sp + 16, parseInt(loadValue(sp + 8).length));
					},

					// valuePrepareString(v ref) (ref, int)
					"syscall/js.valuePrepareString": (sp) => {
						sp >>>= 0;
						const str = encoder.encode(String(loadValue(sp + 8)));
						storeValue(sp + 16, str);
						setInt64(sp + 24, str.length);
					},

					// valueLoadString(v ref, b []byte)
					"syscall/js.valueLoadString": (sp) => {
						sp >>>= 0;
						const str = loadValue(sp + 8);
						loadSlice(sp + 16).set(str);
					},

					// func valueInstanceOf(v ref, t ref) bool
					"syscall/js.valueInstanceOf": (sp) => {
						sp >>>= 0;
						this.mem.setUint8(sp + 24, (loadValue(sp + 8) instanceof loadValue(sp + 16)) ? 1 : 0);
					},

					// func copyBytesToGo(dst []byte, src ref) (int, bool)
					"syscall/js.copyBytesToGo": (sp) => {
						sp >>>= 0;
						const dst = loadSlice(sp + 8);
						const src = loadValue(sp + 32);
						if (!(src instanceof Uint8Array || src instanceof Uint8ClampedArray)) {
							this.mem.setUint8(sp + 48, 0);
							return;
						}
						const toCopy = src.subarray(0, dst.length);
						dst.set(toCopy);
						setInt64(sp + 40, toCopy.length);
						this.mem.setUint8(sp + 48, 1);
					},

					// func copyBytesToJS(dst ref, src []byte) (int, bool)
					"syscall/js.copyBytesToJS": (sp) => {
						sp >>>= 0;
						const dst = loadValue(sp + 8);
						const src = loadSlice(sp + 16);
						if (!(dst instanceof Uint8Array || dst instanceof Uint8ClampedArray)) {
							this.mem.setUint8(sp + 48, 0);
							return;
						}
						const toCopy = src.subarray(0, dst.length);
						dst.set(toCopy);
						setInt64(sp + 40, toCopy.length);
						this.mem.setUint8(sp + 48, 1);
					},

					"debug": (value) => {
						console.log(value);
					},
				}
			};
		}

		async run(instance) {
			if (!(instance instanceof WebAssembly.Instance)) {
				throw new Error("Go.run: WebAssembly.Instance expected");
			}
			this._inst = instance;
			this.mem = new DataView(this._inst.exports.mem.buffer);
			this._values = [ // JS values that Go currently has references to, indexed by reference id
				NaN,
				0,
				null,
				true,
				false,
				global,
				this,
			];
			this._goRefCounts = new Array(this._values.length).fill(Infinity); // number of references that Go has to a JS value, indexed by reference id
			this._ids = new Map([ // mapping from JS values to reference ids
				[0, 1],
				[null, 2],
				[true, 3],
				[false, 4],
				[global, 5],
				[this, 6],
			]);
			this._idPool = [];   // unused ids that have been garbage collected
			this.exited = false; // whether the Go program has exited

			// Pass command line arguments and environment variables to WebAssembly by writing them to the linear memory.
			let offset = 4096;

			const strPtr = (str) => {
				const ptr = offset;
				const bytes = encoder.encode(str + "\\0");
				new Uint8Array(this.mem.buffer, offset, bytes.length).set(bytes);
				offset += bytes.length;
				if (offset % 8 !== 0) {
					offset += 8 - (offset % 8);
				}
				return ptr;
			};

			const argc = this.argv.length;

			const argvPtrs = [];
			this.argv.forEach((arg) => {
				argvPtrs.push(strPtr(arg));
			});
			argvPtrs.push(0);

			const keys = Object.keys(this.env).sort();
			keys.forEach((key) => {
				argvPtrs.push(strPtr(\`\${key}=\${this.env[key]}\`));
			});
			argvPtrs.push(0);

			const argv = offset;
			argvPtrs.forEach((ptr) => {
				this.mem.setUint32(offset, ptr, true);
				this.mem.setUint32(offset + 4, 0, true);
				offset += 8;
			});

			// The linker guarantees global data starts from at least wasmMinDataAddr.
			// Keep in sync with cmd/link/internal/ld/data.go:wasmMinDataAddr.
			const wasmMinDataAddr = 4096 + 4096;
			if (offset >= wasmMinDataAddr) {
				throw new Error("command line too long");
			}

			this._inst.exports.run(argc, argv);
			if (this.exited) {
				this._resolveExitPromise();
			}
			await this._exitPromise;
		}

		_resume() {
			if (this.exited) {
				throw new Error("Go program has already exited");
			}
			this._inst.exports.resume();
			if (this.exited) {
				this._resolveExitPromise();
			}
		}

		_makeFuncWrapper(id) {
			const go = this;
			return function () {
				const event = { id: id, this: this, args: arguments };
				go._pendingEvent = event;
				go._resume();
				return event.result;
			};
		}
	}

	if (
		typeof module !== "undefined" &&
		global.require &&
		global.require.main === module &&
		global.process &&
		global.process.versions &&
		!global.process.versions.electron
	) {
		if (process.argv.length < 3) {
			console.error("usage: go_js_wasm_exec [wasm binary] [arguments]");
			process.exit(1);
		}

		const go = new Go();
		go.argv = process.argv.slice(2);
		go.env = Object.assign({ TMPDIR: require("os").tmpdir() }, process.env);
		go.exit = process.exit;
		WebAssembly.instantiate(fs.readFileSync(process.argv[2]), go.importObject).then((result) => {
			process.on("exit", (code) => { // Node.js exits if no event handler is pending
				if (code === 0 && !go.exited) {
					// deadlock, make Go print error and stack traces
					go._pendingEvent = { id: 0 };
					go._resume();
				}
			});
			return go.run(result.instance);
		}).catch((err) => {
			console.error(err);
			process.exit(1);
		});
	}
})();
onmessage = ({ data: wasm }) => {
  let decoder = new TextDecoder();
  let fs = global.fs;
  let stderr = "";
  fs.writeSync = (fd, buffer) => {
    if (fd === 1) {
      postMessage(buffer);
    } else if (fd === 2) {
      stderr += decoder.decode(buffer);
      let parts = stderr.split("\\n");
      if (parts.length > 1)
        console.log(parts.slice(0, -1).join("\\n"));
      stderr = parts[parts.length - 1];
    } else {
      throw new Error("Bad write");
    }
    return buffer.length;
  };
  let stdin = [];
  let resumeStdin;
  let stdinPos = 0;
  onmessage = ({ data }) => {
    if (data.length > 0) {
      stdin.push(data);
      if (resumeStdin)
        resumeStdin();
    }
  };
  fs.read = (fd, buffer, offset, length, position, callback) => {
    if (fd !== 0 || offset !== 0 || length !== buffer.length || position !== null) {
      throw new Error("Bad read");
    }
    if (stdin.length === 0) {
      resumeStdin = () => fs.read(fd, buffer, offset, length, position, callback);
      return;
    }
    let first = stdin[0];
    let count = Math.max(0, Math.min(length, first.length - stdinPos));
    buffer.set(first.subarray(stdinPos, stdinPos + count), offset);
    stdinPos += count;
    if (stdinPos === first.length) {
      stdin.shift();
      stdinPos = 0;
    }
    callback(null, count);
  };
  let go = new global.Go();
  go.argv = ["", \`--service=\${"0.13.11"}\`];
  WebAssembly.instantiate(wasm, go.importObject).then(({ instance }) => go.run(instance));
};}`,i;if(t){let s=new Blob([c],{type:"text/javascript"});i=new Worker(URL.createObjectURL(s))}else{let k=new Function("postMessage",c+"var onmessage; return m => onmessage(m)")(E=>i.onmessage({data:E}));i={onmessage:null,postMessage:E=>k({data:E}),terminate(){}}}i.postMessage(l),i.onmessage=({data:s})=>n(s);let{readFromStdout:n,service:g}=createChannel({writeToStdin(s){i.postMessage(s)},isSync:!1,isBrowser:!0});longLivedService={build:s=>new Promise((k,E)=>g.buildOrServe({callName:"build",refs:null,serveOptions:null,options:s,isTTY:!1,defaultWD:"/",callback:(x,S)=>x?E(x):k(S)})),transform:(s,k)=>new Promise((E,x)=>g.transform({callName:"transform",refs:null,input:s,options:k||{},isTTY:!1,fs:{readFile(S,w){w(new Error("Internal error"),null)},writeFile(S,w){w(null)}},callback:(S,w)=>S?x(S):E(w)})),formatMessages:(s,k)=>new Promise((E,x)=>g.formatMessages({callName:"formatMessages",refs:null,messages:s,options:k,callback:(S,w)=>S?x(S):E(w)})),analyzeMetafile:(s,k)=>new Promise((E,x)=>g.analyzeMetafile({callName:"analyzeMetafile",refs:null,metafile:typeof s=="string"?s:JSON.stringify(s),options:k,callback:(S,w)=>S?x(S):E(w)}))}};function isObject(e){return typeof e=="object"&&e!==null&&e.constructor===Object}function sortObject(e){const t={},r=Object.keys(e).sort((l,c)=>c.length-l.length);for(const l of r)t[l]=e[l];return t}function isImportMap(e){return isObject(e)&&(e.imports!==void 0?isImports(e.imports):!0)&&(e.scopes!==void 0?isScopes(e.scopes):!0)}function isImports(e){return isObject(e)}function isScopes(e){return isObject(e)&&Object.values(e).every(t=>isSpecifierMap(t))}function isSpecifierMap(e){return isObject(e)}function sortAndNormalizeSpecifierMap(e,t){const r={};for(const[l,c]of Object.entries(e)){const i=normalizeSpecifierKey(l,t);if(i===null)continue;if(typeof c!="string"){console.warn("addresses need to be strings."),r[i]=null;continue}const n=parseUrlLikeImportSpecifier(c,t);if(n===null){console.warn("the address was invalid."),r[i]=null;continue}if(l.endsWith("/")&&!serializeURL(n).endsWith("/")){console.warn("an invalid address was given for the specifier key specifierKey; since specifierKey ended in a slash, the address needs to as well."),r[i]=null;continue}r[i]=serializeURL(n)}return sortObject(r)}function serializeURL(e){return e.href}function sortAndNormalizeScopes(e,t){const r={};for(const[c,i]of Object.entries(e)){if(!isSpecifierMap(i))throw new TypeError("the value of the scope with prefix scopePrefix needs to be an object.");let n;try{n=new URL(c,t)}catch{console.warn("the scope prefix URL was not parseable.");continue}const g=serializeURL(n);r[g]=sortAndNormalizeSpecifierMap(i,t)}const l={};for(const c of Object.keys(r))l[c]=sortObject(r[c]);return sortObject(l)}function normalizeSpecifierKey(e,t){if(!e.length)return console.warn("specifier key cannot be an empty string."),null;const r=parseUrlLikeImportSpecifier(e,t);return r!==null?serializeURL(r):e}function parseUrlLikeImportSpecifier(e,t){if(t&&(e.startsWith("/")||e.startsWith("./")||e.startsWith("../")))try{return new URL(e,t)}catch{return null}try{return new URL(e)}catch{return null}}function resolveImportMap(e,t){let r={};if(!isImportMap(e))throw new TypeError("the top-level value needs to be a JSON object.");const{imports:l,scopes:c}=e;if(l!==void 0){if(!isImports(l))throw new TypeError('"imports" top-level key needs to be an object.');r=sortAndNormalizeSpecifierMap(l,t)}let i={};if(c!==void 0){if(!isScopes(c))throw new TypeError('"scopes" top-level key needs to be an object.');i=sortAndNormalizeScopes(c,t)}return Object.keys(e).find(n=>n!=="imports"&&n!=="scopes")&&console.warn("an invalid top-level key was present in the import map."),{imports:r,scopes:i}}const loaderList=["js","jsx","ts","tsx","css","json","text","base64","file","dataurl","binary","default"];function isLoader(e){return loaderList.includes(e)}const name="remote-resource",remoteLoader=e=>({name,async setup({onResolve:t,onLoad:r,initialOptions:{external:l}}){const{importmap:c={imports:{}},baseURL:i,progressCallback:n=console.log}=e??{},g=resolveImportMap(c,i),s=await globalThis.caches.open("v1"),k=await s.keys();await Promise.all(k.map(x=>s.delete(x)));const E=x=>l?.includes?.(x)??!1;t({filter:/.*/},({path:x,importer:S,resolveDir:w})=>{if(E(x))return{external:!0};const _=g.imports?.[x]??x;if(E(x))return{external:!0};if(_.startsWith("http"))return n({path:x,importer:S,resolveDir:w},"->",_),{path:_,namespace:name};const z=new URL(_,S).toString();return E(x)?{external:!0}:z.startsWith("http")?(n({path:_,importer:S,resolveDir:w},"->",z),{path:z,namespace:name}):{external:!0}}),r({filter:/^http/,namespace:name},async({path:x})=>{const S=new URL(x);S.hostname==="scrapbox.io"&&(S.port="",S.protocol="https:",S.hostname="scrapbox-proxy-server.vercel.app");let w;const _=await s.match(S.toString());if(_)n(`Use cache ${S}`),w=_;else{if(w=await fetch(S.toString()),!w.ok)throw n({type:"error",data:{status:w.status,statusText:w.statusText}}),w;n(`Download ${S}`),s.put(S.toString(),w.clone())}return{contents:await w.text(),loader:getLoader(w)}})}});function getLoader(e){const r=e.url.split(".").pop();if(r&&isLoader(r))return r;if(r==="mjs")return"js";const l=e.headers.get("Content-Type")??"text/plain";return isLoader(l)?l:"text"}let initialized;self.addEventListener("message",async e=>{initialized??=initialize({wasmURL:"./esbuild.wasm",worker:!1});try{await initialized;const{entryURL:t,...r}=e.data,l=await build({stdin:{contents:`import "${t}";`},write:!1,...r,plugins:[remoteLoader({baseURL:new URL(t)})]});self.postMessage(l.outputFiles[0].text)}catch(t){self.postMessage({type:"error",data:t})}});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsidmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZlByb3BzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXM7XG52YXIgX19nZXRPd25Qcm9wRGVzY3MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycztcbnZhciBfX2dldE93blByb3BTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG5SZWZsZWN0LmdldDtcblJlZmxlY3Quc2V0O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpPT5rZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIHZhbHVlXG4gICAgfSkgOiBvYmpba2V5XSA9IHZhbHVlXG47XG52YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYik9PntcbiAgICBmb3IodmFyIHByb3AgaW4gYiB8fCAoYiA9IHtcbiAgICB9KSlpZiAoX19oYXNPd25Qcm9wLmNhbGwoYiwgcHJvcCkpIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scykgZm9yICh2YXIgcHJvcCBvZiBfX2dldE93blByb3BTeW1ib2xzKGIpKXtcbiAgICAgICAgaWYgKF9fcHJvcElzRW51bS5jYWxsKGIsIHByb3ApKSBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XG4gICAgfVxuICAgIHJldHVybiBhO1xufTtcbnZhciBfX3NwcmVhZFByb3BzID0gKGEsIGIpPT5fX2RlZlByb3BzKGEsIF9fZ2V0T3duUHJvcERlc2NzKGIpKVxuO1xuZnVuY3Rpb24gZW5jb2RlUGFja2V0KHBhY2tldCkge1xuICAgIGxldCB2aXNpdCA9ICh2YWx1ZSk9PntcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICBiYi53cml0ZTgoMCk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICAgICAgYmIud3JpdGU4KDEpO1xuICAgICAgICAgICAgYmIud3JpdGU4KCt2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICBiYi53cml0ZTgoMik7XG4gICAgICAgICAgICBiYi53cml0ZTMyKHZhbHVlIHwgMCk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBiYi53cml0ZTgoMyk7XG4gICAgICAgICAgICBiYi53cml0ZShlbmNvZGVVVEY4KHZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgICAgICBiYi53cml0ZTgoNCk7XG4gICAgICAgICAgICBiYi53cml0ZSh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgYmIud3JpdGU4KDUpO1xuICAgICAgICAgICAgYmIud3JpdGUzMih2YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB2YWx1ZSl7XG4gICAgICAgICAgICAgICAgdmlzaXQoaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcbiAgICAgICAgICAgIGJiLndyaXRlOCg2KTtcbiAgICAgICAgICAgIGJiLndyaXRlMzIoa2V5cy5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQga2V5IG9mIGtleXMpe1xuICAgICAgICAgICAgICAgIGJiLndyaXRlKGVuY29kZVVURjgoa2V5KSk7XG4gICAgICAgICAgICAgICAgdmlzaXQodmFsdWVba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGxldCBiYiA9IG5ldyBCeXRlQnVmZmVyKCk7XG4gICAgYmIud3JpdGUzMigwKTtcbiAgICBiYi53cml0ZTMyKHBhY2tldC5pZCA8PCAxIHwgKyFwYWNrZXQuaXNSZXF1ZXN0KTtcbiAgICB2aXNpdChwYWNrZXQudmFsdWUpO1xuICAgIHdyaXRlVUludDMyTEUoYmIuYnVmLCBiYi5sZW4gLSA0LCAwKTtcbiAgICByZXR1cm4gYmIuYnVmLnN1YmFycmF5KDAsIGJiLmxlbik7XG59XG5mdW5jdGlvbiBkZWNvZGVQYWNrZXQoYnl0ZXMpIHtcbiAgICBsZXQgdmlzaXQgPSAoKT0+e1xuICAgICAgICBzd2l0Y2goYmIucmVhZDgoKSl7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhYmIucmVhZDgoKTtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gYmIucmVhZDMyKCk7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVURjgoYmIucmVhZCgpKTtcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICByZXR1cm4gYmIucmVhZCgpO1xuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gYmIucmVhZDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZTIgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUyLnB1c2godmlzaXQoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY291bnQgPSBiYi5yZWFkMzIoKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlMiA9IHtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUyW2RlY29kZVVURjgoYmIucmVhZCgpKV0gPSB2aXNpdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhY2tldFwiKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgbGV0IGJiID0gbmV3IEJ5dGVCdWZmZXIoYnl0ZXMpO1xuICAgIGxldCBpZCA9IGJiLnJlYWQzMigpO1xuICAgIGxldCBpc1JlcXVlc3QgPSAoaWQgJiAxKSA9PT0gMDtcbiAgICBpZCA+Pj49IDE7XG4gICAgbGV0IHZhbHVlID0gdmlzaXQoKTtcbiAgICBpZiAoYmIucHRyICE9PSBieXRlcy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYWNrZXRcIik7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGlkLFxuICAgICAgICBpc1JlcXVlc3QsXG4gICAgICAgIHZhbHVlXG4gICAgfTtcbn1cbnZhciBCeXRlQnVmZmVyID0gY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGJ1ZiA9IG5ldyBVaW50OEFycmF5KDEwMjQpKXtcbiAgICAgICAgdGhpcy5idWYgPSBidWY7XG4gICAgICAgIHRoaXMubGVuID0gMDtcbiAgICAgICAgdGhpcy5wdHIgPSAwO1xuICAgIH1cbiAgICBfd3JpdGUoZGVsdGEpIHtcbiAgICAgICAgaWYgKHRoaXMubGVuICsgZGVsdGEgPiB0aGlzLmJ1Zi5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCBjbG9uZSA9IG5ldyBVaW50OEFycmF5KCh0aGlzLmxlbiArIGRlbHRhKSAqIDIpO1xuICAgICAgICAgICAgY2xvbmUuc2V0KHRoaXMuYnVmKTtcbiAgICAgICAgICAgIHRoaXMuYnVmID0gY2xvbmU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sZW4gKz0gZGVsdGE7XG4gICAgICAgIHJldHVybiB0aGlzLmxlbiAtIGRlbHRhO1xuICAgIH1cbiAgICB3cml0ZTgodmFsdWUpIHtcbiAgICAgICAgbGV0IG9mZnNldCA9IHRoaXMuX3dyaXRlKDEpO1xuICAgICAgICB0aGlzLmJ1ZltvZmZzZXRdID0gdmFsdWU7XG4gICAgfVxuICAgIHdyaXRlMzIodmFsdWUpIHtcbiAgICAgICAgbGV0IG9mZnNldCA9IHRoaXMuX3dyaXRlKDQpO1xuICAgICAgICB3cml0ZVVJbnQzMkxFKHRoaXMuYnVmLCB2YWx1ZSwgb2Zmc2V0KTtcbiAgICB9XG4gICAgd3JpdGUoYnl0ZXMpIHtcbiAgICAgICAgbGV0IG9mZnNldCA9IHRoaXMuX3dyaXRlKDQgKyBieXRlcy5sZW5ndGgpO1xuICAgICAgICB3cml0ZVVJbnQzMkxFKHRoaXMuYnVmLCBieXRlcy5sZW5ndGgsIG9mZnNldCk7XG4gICAgICAgIHRoaXMuYnVmLnNldChieXRlcywgb2Zmc2V0ICsgNCk7XG4gICAgfVxuICAgIF9yZWFkKGRlbHRhKSB7XG4gICAgICAgIGlmICh0aGlzLnB0ciArIGRlbHRhID4gdGhpcy5idWYubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhY2tldFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnB0ciArPSBkZWx0YTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHRyIC0gZGVsdGE7XG4gICAgfVxuICAgIHJlYWQ4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZbdGhpcy5fcmVhZCgxKV07XG4gICAgfVxuICAgIHJlYWQzMigpIHtcbiAgICAgICAgcmV0dXJuIHJlYWRVSW50MzJMRSh0aGlzLmJ1ZiwgdGhpcy5fcmVhZCg0KSk7XG4gICAgfVxuICAgIHJlYWQoKSB7XG4gICAgICAgIGxldCBsZW5ndGggPSB0aGlzLnJlYWQzMigpO1xuICAgICAgICBsZXQgYnl0ZXMgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICAgICAgICBsZXQgcHRyID0gdGhpcy5fcmVhZChieXRlcy5sZW5ndGgpO1xuICAgICAgICBieXRlcy5zZXQodGhpcy5idWYuc3ViYXJyYXkocHRyLCBwdHIgKyBsZW5ndGgpKTtcbiAgICAgICAgcmV0dXJuIGJ5dGVzO1xuICAgIH1cbn07XG52YXIgZW5jb2RlVVRGODtcbnZhciBkZWNvZGVVVEY4O1xuaWYgKHR5cGVvZiBUZXh0RW5jb2RlciAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgVGV4dERlY29kZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBsZXQgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgIGxldCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgZW5jb2RlVVRGOCA9ICh0ZXh0KT0+ZW5jb2Rlci5lbmNvZGUodGV4dClcbiAgICA7XG4gICAgZGVjb2RlVVRGOCA9IChieXRlcyk9PmRlY29kZXIuZGVjb2RlKGJ5dGVzKVxuICAgIDtcbn0gZWxzZSBpZiAodHlwZW9mIEJ1ZmZlciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGVuY29kZVVURjggPSAodGV4dCk9PntcbiAgICAgICAgbGV0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKHRleHQpO1xuICAgICAgICBpZiAoIShidWZmZXIgaW5zdGFuY2VvZiBVaW50OEFycmF5KSkge1xuICAgICAgICAgICAgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgIH07XG4gICAgZGVjb2RlVVRGOCA9IChieXRlcyk9PntcbiAgICAgICAgbGV0IHsgYnVmZmVyICwgYnl0ZU9mZnNldCAsIGJ5dGVMZW5ndGggIH0gPSBieXRlcztcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKGJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCkudG9TdHJpbmcoKTtcbiAgICB9O1xufSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBVVEYtOCBjb2RlYyBmb3VuZFwiKTtcbn1cbmZ1bmN0aW9uIHJlYWRVSW50MzJMRShidWZmZXIsIG9mZnNldCkge1xuICAgIHJldHVybiBidWZmZXJbb2Zmc2V0KytdIHwgYnVmZmVyW29mZnNldCsrXSA8PCA4IHwgYnVmZmVyW29mZnNldCsrXSA8PCAxNiB8IGJ1ZmZlcltvZmZzZXQrK10gPDwgMjQ7XG59XG5mdW5jdGlvbiB3cml0ZVVJbnQzMkxFKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCkge1xuICAgIGJ1ZmZlcltvZmZzZXQrK10gPSB2YWx1ZTtcbiAgICBidWZmZXJbb2Zmc2V0KytdID0gdmFsdWUgPj4gODtcbiAgICBidWZmZXJbb2Zmc2V0KytdID0gdmFsdWUgPj4gMTY7XG4gICAgYnVmZmVyW29mZnNldCsrXSA9IHZhbHVlID4+IDI0O1xufVxuZnVuY3Rpb24gdmFsaWRhdGVUYXJnZXQodGFyZ2V0KSB7XG4gICAgdGFyZ2V0ICs9IFwiXCI7XG4gICAgaWYgKHRhcmdldC5pbmRleE9mKFwiLFwiKSA+PSAwKSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdGFyZ2V0OiAke3RhcmdldH1gKTtcbiAgICByZXR1cm4gdGFyZ2V0O1xufVxudmFyIGNhbkJlQW55dGhpbmcgPSAoKT0+bnVsbFxuO1xudmFyIG11c3RCZUJvb2xlYW4gPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiID8gbnVsbCA6IFwiYSBib29sZWFuXCJcbjtcbnZhciBtdXN0QmVCb29sZWFuT3JPYmplY3QgPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyBudWxsIDogXCJhIGJvb2xlYW4gb3IgYW4gb2JqZWN0XCJcbjtcbnZhciBtdXN0QmVTdHJpbmcgPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyBudWxsIDogXCJhIHN0cmluZ1wiXG47XG52YXIgbXVzdEJlUmVnRXhwID0gKHZhbHVlKT0+dmFsdWUgaW5zdGFuY2VvZiBSZWdFeHAgPyBudWxsIDogXCJhIFJlZ0V4cCBvYmplY3RcIlxuO1xudmFyIG11c3RCZUludGVnZXIgPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgdmFsdWUgPT09ICh2YWx1ZSB8IDApID8gbnVsbCA6IFwiYW4gaW50ZWdlclwiXG47XG52YXIgbXVzdEJlRnVuY3Rpb24gPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiA/IG51bGwgOiBcImEgZnVuY3Rpb25cIlxuO1xudmFyIG11c3RCZUFycmF5ID0gKHZhbHVlKT0+QXJyYXkuaXNBcnJheSh2YWx1ZSkgPyBudWxsIDogXCJhbiBhcnJheVwiXG47XG52YXIgbXVzdEJlT2JqZWN0ID0gKHZhbHVlKT0+dHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSA/IG51bGwgOiBcImFuIG9iamVjdFwiXG47XG52YXIgbXVzdEJlQXJyYXlPclJlY29yZCA9ICh2YWx1ZSk9PnR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCA/IG51bGwgOiBcImFuIGFycmF5IG9yIGFuIG9iamVjdFwiXG47XG52YXIgbXVzdEJlT2JqZWN0T3JOdWxsID0gKHZhbHVlKT0+dHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSA/IG51bGwgOiBcImFuIG9iamVjdCBvciBudWxsXCJcbjtcbnZhciBtdXN0QmVTdHJpbmdPckJvb2xlYW4gPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIiA/IG51bGwgOiBcImEgc3RyaW5nIG9yIGEgYm9vbGVhblwiXG47XG52YXIgbXVzdEJlU3RyaW5nT3JPYmplY3QgPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSA/IG51bGwgOiBcImEgc3RyaW5nIG9yIGFuIG9iamVjdFwiXG47XG52YXIgbXVzdEJlU3RyaW5nT3JBcnJheSA9ICh2YWx1ZSk9PnR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiB8fCBBcnJheS5pc0FycmF5KHZhbHVlKSA/IG51bGwgOiBcImEgc3RyaW5nIG9yIGFuIGFycmF5XCJcbjtcbnZhciBtdXN0QmVTdHJpbmdPclVpbnQ4QXJyYXkgPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgfHwgdmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbnVsbCA6IFwiYSBzdHJpbmcgb3IgYSBVaW50OEFycmF5XCJcbjtcbmZ1bmN0aW9uIGdldEZsYWcob2JqZWN0LCBrZXlzLCBrZXksIG11c3RCZUZuKSB7XG4gICAgbGV0IHZhbHVlID0gb2JqZWN0W2tleV07XG4gICAga2V5c1trZXkgKyBcIlwiXSA9IHRydWU7XG4gICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHJldHVybiB2b2lkIDA7XG4gICAgbGV0IG11c3RCZSA9IG11c3RCZUZuKHZhbHVlKTtcbiAgICBpZiAobXVzdEJlICE9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoYFwiJHtrZXl9XCIgbXVzdCBiZSAke211c3RCZX1gKTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBjaGVja0ZvckludmFsaWRGbGFncyhvYmplY3QsIGtleXMsIHdoZXJlKSB7XG4gICAgZm9yKGxldCBrZXkgaW4gb2JqZWN0KXtcbiAgICAgICAgaWYgKCEoa2V5IGluIGtleXMpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgb3B0aW9uICR7d2hlcmV9OiBcIiR7a2V5fVwiYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZUluaXRpYWxpemVPcHRpb25zKG9wdGlvbnMpIHtcbiAgICBsZXQga2V5cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbGV0IHdhc21VUkwgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwid2FzbVVSTFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGxldCB3b3JrZXIgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwid29ya2VyXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKG9wdGlvbnMsIGtleXMsIFwiaW4gc3RhcnRTZXJ2aWNlKCkgY2FsbFwiKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB3YXNtVVJMLFxuICAgICAgICB3b3JrZXJcbiAgICB9O1xufVxuZnVuY3Rpb24gcHVzaExvZ0ZsYWdzKGZsYWdzLCBvcHRpb25zLCBrZXlzLCBpc1RUWSwgbG9nTGV2ZWxEZWZhdWx0KSB7XG4gICAgbGV0IGNvbG9yID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImNvbG9yXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGxldCBsb2dMZXZlbCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJsb2dMZXZlbFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGxldCBsb2dMaW1pdCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJsb2dMaW1pdFwiLCBtdXN0QmVJbnRlZ2VyKTtcbiAgICBpZiAoY29sb3IgIT09IHZvaWQgMCkgZmxhZ3MucHVzaChgLS1jb2xvcj0ke2NvbG9yfWApO1xuICAgIGVsc2UgaWYgKGlzVFRZKSBmbGFncy5wdXNoKGAtLWNvbG9yPXRydWVgKTtcbiAgICBmbGFncy5wdXNoKGAtLWxvZy1sZXZlbD0ke2xvZ0xldmVsIHx8IGxvZ0xldmVsRGVmYXVsdH1gKTtcbiAgICBmbGFncy5wdXNoKGAtLWxvZy1saW1pdD0ke2xvZ0xpbWl0IHx8IDB9YCk7XG59XG5mdW5jdGlvbiBwdXNoQ29tbW9uRmxhZ3MoZmxhZ3MsIG9wdGlvbnMsIGtleXMpIHtcbiAgICBsZXQgbGVnYWxDb21tZW50cyA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJsZWdhbENvbW1lbnRzXCIsIG11c3RCZVN0cmluZyk7XG4gICAgbGV0IHNvdXJjZVJvb3QgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwic291cmNlUm9vdFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGxldCBzb3VyY2VzQ29udGVudCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJzb3VyY2VzQ29udGVudFwiLCBtdXN0QmVCb29sZWFuKTtcbiAgICBsZXQgdGFyZ2V0ID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInRhcmdldFwiLCBtdXN0QmVTdHJpbmdPckFycmF5KTtcbiAgICBsZXQgZm9ybWF0ID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImZvcm1hdFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGxldCBnbG9iYWxOYW1lID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImdsb2JhbE5hbWVcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgbWluaWZ5ID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIm1pbmlmeVwiLCBtdXN0QmVCb29sZWFuKTtcbiAgICBsZXQgbWluaWZ5U3ludGF4ID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIm1pbmlmeVN5bnRheFwiLCBtdXN0QmVCb29sZWFuKTtcbiAgICBsZXQgbWluaWZ5V2hpdGVzcGFjZSA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJtaW5pZnlXaGl0ZXNwYWNlXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGxldCBtaW5pZnlJZGVudGlmaWVycyA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJtaW5pZnlJZGVudGlmaWVyc1wiLCBtdXN0QmVCb29sZWFuKTtcbiAgICBsZXQgY2hhcnNldCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJjaGFyc2V0XCIsIG11c3RCZVN0cmluZyk7XG4gICAgbGV0IHRyZWVTaGFraW5nID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInRyZWVTaGFraW5nXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGxldCBpZ25vcmVBbm5vdGF0aW9ucyA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJpZ25vcmVBbm5vdGF0aW9uc1wiLCBtdXN0QmVCb29sZWFuKTtcbiAgICBsZXQganN4ID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImpzeFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGxldCBqc3hGYWN0b3J5ID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImpzeEZhY3RvcnlcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQganN4RnJhZ21lbnQgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwianN4RnJhZ21lbnRcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgZGVmaW5lID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImRlZmluZVwiLCBtdXN0QmVPYmplY3QpO1xuICAgIGxldCBwdXJlID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInB1cmVcIiwgbXVzdEJlQXJyYXkpO1xuICAgIGxldCBrZWVwTmFtZXMgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwia2VlcE5hbWVzXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGlmIChsZWdhbENvbW1lbnRzKSBmbGFncy5wdXNoKGAtLWxlZ2FsLWNvbW1lbnRzPSR7bGVnYWxDb21tZW50c31gKTtcbiAgICBpZiAoc291cmNlUm9vdCAhPT0gdm9pZCAwKSBmbGFncy5wdXNoKGAtLXNvdXJjZS1yb290PSR7c291cmNlUm9vdH1gKTtcbiAgICBpZiAoc291cmNlc0NvbnRlbnQgIT09IHZvaWQgMCkgZmxhZ3MucHVzaChgLS1zb3VyY2VzLWNvbnRlbnQ9JHtzb3VyY2VzQ29udGVudH1gKTtcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIGZsYWdzLnB1c2goYC0tdGFyZ2V0PSR7QXJyYXkuZnJvbSh0YXJnZXQpLm1hcCh2YWxpZGF0ZVRhcmdldCkuam9pbihcIixcIil9YCk7XG4gICAgICAgIGVsc2UgZmxhZ3MucHVzaChgLS10YXJnZXQ9JHt2YWxpZGF0ZVRhcmdldCh0YXJnZXQpfWApO1xuICAgIH1cbiAgICBpZiAoZm9ybWF0KSBmbGFncy5wdXNoKGAtLWZvcm1hdD0ke2Zvcm1hdH1gKTtcbiAgICBpZiAoZ2xvYmFsTmFtZSkgZmxhZ3MucHVzaChgLS1nbG9iYWwtbmFtZT0ke2dsb2JhbE5hbWV9YCk7XG4gICAgaWYgKG1pbmlmeSkgZmxhZ3MucHVzaChcIi0tbWluaWZ5XCIpO1xuICAgIGlmIChtaW5pZnlTeW50YXgpIGZsYWdzLnB1c2goXCItLW1pbmlmeS1zeW50YXhcIik7XG4gICAgaWYgKG1pbmlmeVdoaXRlc3BhY2UpIGZsYWdzLnB1c2goXCItLW1pbmlmeS13aGl0ZXNwYWNlXCIpO1xuICAgIGlmIChtaW5pZnlJZGVudGlmaWVycykgZmxhZ3MucHVzaChcIi0tbWluaWZ5LWlkZW50aWZpZXJzXCIpO1xuICAgIGlmIChjaGFyc2V0KSBmbGFncy5wdXNoKGAtLWNoYXJzZXQ9JHtjaGFyc2V0fWApO1xuICAgIGlmICh0cmVlU2hha2luZyAhPT0gdm9pZCAwKSBmbGFncy5wdXNoKGAtLXRyZWUtc2hha2luZz0ke3RyZWVTaGFraW5nfWApO1xuICAgIGlmIChpZ25vcmVBbm5vdGF0aW9ucykgZmxhZ3MucHVzaChgLS1pZ25vcmUtYW5ub3RhdGlvbnNgKTtcbiAgICBpZiAoanN4KSBmbGFncy5wdXNoKGAtLWpzeD0ke2pzeH1gKTtcbiAgICBpZiAoanN4RmFjdG9yeSkgZmxhZ3MucHVzaChgLS1qc3gtZmFjdG9yeT0ke2pzeEZhY3Rvcnl9YCk7XG4gICAgaWYgKGpzeEZyYWdtZW50KSBmbGFncy5wdXNoKGAtLWpzeC1mcmFnbWVudD0ke2pzeEZyYWdtZW50fWApO1xuICAgIGlmIChkZWZpbmUpIHtcbiAgICAgICAgZm9yKGxldCBrZXkgaW4gZGVmaW5lKXtcbiAgICAgICAgICAgIGlmIChrZXkuaW5kZXhPZihcIj1cIikgPj0gMCkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGRlZmluZTogJHtrZXl9YCk7XG4gICAgICAgICAgICBmbGFncy5wdXNoKGAtLWRlZmluZToke2tleX09JHtkZWZpbmVba2V5XX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocHVyZSkgZm9yIChsZXQgZm4gb2YgcHVyZSlmbGFncy5wdXNoKGAtLXB1cmU6JHtmbn1gKTtcbiAgICBpZiAoa2VlcE5hbWVzKSBmbGFncy5wdXNoKGAtLWtlZXAtbmFtZXNgKTtcbn1cbmZ1bmN0aW9uIGZsYWdzRm9yQnVpbGRPcHRpb25zKGNhbGxOYW1lLCBvcHRpb25zLCBpc1RUWSwgbG9nTGV2ZWxEZWZhdWx0LCB3cml0ZURlZmF1bHQpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IGZsYWdzID0gW107XG4gICAgbGV0IGVudHJpZXMgPSBbXTtcbiAgICBsZXQga2V5cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbGV0IHN0ZGluQ29udGVudHMgPSBudWxsO1xuICAgIGxldCBzdGRpblJlc29sdmVEaXIgPSBudWxsO1xuICAgIGxldCB3YXRjaE1vZGUgPSBudWxsO1xuICAgIHB1c2hMb2dGbGFncyhmbGFncywgb3B0aW9ucywga2V5cywgaXNUVFksIGxvZ0xldmVsRGVmYXVsdCk7XG4gICAgcHVzaENvbW1vbkZsYWdzKGZsYWdzLCBvcHRpb25zLCBrZXlzKTtcbiAgICBsZXQgc291cmNlbWFwID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInNvdXJjZW1hcFwiLCBtdXN0QmVTdHJpbmdPckJvb2xlYW4pO1xuICAgIGxldCBidW5kbGUgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwiYnVuZGxlXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGxldCB3YXRjaCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJ3YXRjaFwiLCBtdXN0QmVCb29sZWFuT3JPYmplY3QpO1xuICAgIGxldCBzcGxpdHRpbmcgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwic3BsaXR0aW5nXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGxldCBwcmVzZXJ2ZVN5bWxpbmtzID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInByZXNlcnZlU3ltbGlua3NcIiwgbXVzdEJlQm9vbGVhbik7XG4gICAgbGV0IG1ldGFmaWxlID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIm1ldGFmaWxlXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGxldCBvdXRmaWxlID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIm91dGZpbGVcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgb3V0ZGlyID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIm91dGRpclwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGxldCBvdXRiYXNlID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIm91dGJhc2VcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgcGxhdGZvcm0gPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwicGxhdGZvcm1cIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgdHNjb25maWcgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwidHNjb25maWdcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgcmVzb2x2ZUV4dGVuc2lvbnMgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwicmVzb2x2ZUV4dGVuc2lvbnNcIiwgbXVzdEJlQXJyYXkpO1xuICAgIGxldCBub2RlUGF0aHNJbnB1dCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJub2RlUGF0aHNcIiwgbXVzdEJlQXJyYXkpO1xuICAgIGxldCBtYWluRmllbGRzID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIm1haW5GaWVsZHNcIiwgbXVzdEJlQXJyYXkpO1xuICAgIGxldCBjb25kaXRpb25zID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImNvbmRpdGlvbnNcIiwgbXVzdEJlQXJyYXkpO1xuICAgIGxldCBleHRlcm5hbCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJleHRlcm5hbFwiLCBtdXN0QmVBcnJheSk7XG4gICAgbGV0IGxvYWRlciA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJsb2FkZXJcIiwgbXVzdEJlT2JqZWN0KTtcbiAgICBsZXQgb3V0RXh0ZW5zaW9uID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIm91dEV4dGVuc2lvblwiLCBtdXN0QmVPYmplY3QpO1xuICAgIGxldCBwdWJsaWNQYXRoID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInB1YmxpY1BhdGhcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgZW50cnlOYW1lcyA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJlbnRyeU5hbWVzXCIsIG11c3RCZVN0cmluZyk7XG4gICAgbGV0IGNodW5rTmFtZXMgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwiY2h1bmtOYW1lc1wiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGxldCBhc3NldE5hbWVzID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImFzc2V0TmFtZXNcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgaW5qZWN0ID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImluamVjdFwiLCBtdXN0QmVBcnJheSk7XG4gICAgbGV0IGJhbm5lciA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJiYW5uZXJcIiwgbXVzdEJlT2JqZWN0KTtcbiAgICBsZXQgZm9vdGVyID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImZvb3RlclwiLCBtdXN0QmVPYmplY3QpO1xuICAgIGxldCBlbnRyeVBvaW50cyA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJlbnRyeVBvaW50c1wiLCBtdXN0QmVBcnJheU9yUmVjb3JkKTtcbiAgICBsZXQgYWJzV29ya2luZ0RpciA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJhYnNXb3JraW5nRGlyXCIsIG11c3RCZVN0cmluZyk7XG4gICAgbGV0IHN0ZGluID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInN0ZGluXCIsIG11c3RCZU9iamVjdCk7XG4gICAgbGV0IHdyaXRlID0gKF9hID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIndyaXRlXCIsIG11c3RCZUJvb2xlYW4pKSAhPSBudWxsID8gX2EgOiB3cml0ZURlZmF1bHQ7XG4gICAgbGV0IGFsbG93T3ZlcndyaXRlID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImFsbG93T3ZlcndyaXRlXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGxldCBpbmNyZW1lbnRhbCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJpbmNyZW1lbnRhbFwiLCBtdXN0QmVCb29sZWFuKSA9PT0gdHJ1ZTtcbiAgICBrZXlzLnBsdWdpbnMgPSB0cnVlO1xuICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKG9wdGlvbnMsIGtleXMsIGBpbiAke2NhbGxOYW1lfSgpIGNhbGxgKTtcbiAgICBpZiAoc291cmNlbWFwKSBmbGFncy5wdXNoKGAtLXNvdXJjZW1hcCR7c291cmNlbWFwID09PSB0cnVlID8gXCJcIiA6IGA9JHtzb3VyY2VtYXB9YH1gKTtcbiAgICBpZiAoYnVuZGxlKSBmbGFncy5wdXNoKFwiLS1idW5kbGVcIik7XG4gICAgaWYgKGFsbG93T3ZlcndyaXRlKSBmbGFncy5wdXNoKFwiLS1hbGxvdy1vdmVyd3JpdGVcIik7XG4gICAgaWYgKHdhdGNoKSB7XG4gICAgICAgIGZsYWdzLnB1c2goXCItLXdhdGNoXCIpO1xuICAgICAgICBpZiAodHlwZW9mIHdhdGNoID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICAgICAgd2F0Y2hNb2RlID0ge1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCB3YXRjaEtleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgbGV0IG9uUmVidWlsZCA9IGdldEZsYWcod2F0Y2gsIHdhdGNoS2V5cywgXCJvblJlYnVpbGRcIiwgbXVzdEJlRnVuY3Rpb24pO1xuICAgICAgICAgICAgY2hlY2tGb3JJbnZhbGlkRmxhZ3Mod2F0Y2gsIHdhdGNoS2V5cywgYG9uIFwid2F0Y2hcIiBpbiAke2NhbGxOYW1lfSgpIGNhbGxgKTtcbiAgICAgICAgICAgIHdhdGNoTW9kZSA9IHtcbiAgICAgICAgICAgICAgICBvblJlYnVpbGRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNwbGl0dGluZykgZmxhZ3MucHVzaChcIi0tc3BsaXR0aW5nXCIpO1xuICAgIGlmIChwcmVzZXJ2ZVN5bWxpbmtzKSBmbGFncy5wdXNoKFwiLS1wcmVzZXJ2ZS1zeW1saW5rc1wiKTtcbiAgICBpZiAobWV0YWZpbGUpIGZsYWdzLnB1c2goYC0tbWV0YWZpbGVgKTtcbiAgICBpZiAob3V0ZmlsZSkgZmxhZ3MucHVzaChgLS1vdXRmaWxlPSR7b3V0ZmlsZX1gKTtcbiAgICBpZiAob3V0ZGlyKSBmbGFncy5wdXNoKGAtLW91dGRpcj0ke291dGRpcn1gKTtcbiAgICBpZiAob3V0YmFzZSkgZmxhZ3MucHVzaChgLS1vdXRiYXNlPSR7b3V0YmFzZX1gKTtcbiAgICBpZiAocGxhdGZvcm0pIGZsYWdzLnB1c2goYC0tcGxhdGZvcm09JHtwbGF0Zm9ybX1gKTtcbiAgICBpZiAodHNjb25maWcpIGZsYWdzLnB1c2goYC0tdHNjb25maWc9JHt0c2NvbmZpZ31gKTtcbiAgICBpZiAocmVzb2x2ZUV4dGVuc2lvbnMpIHtcbiAgICAgICAgbGV0IHZhbHVlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCB2YWx1ZSBvZiByZXNvbHZlRXh0ZW5zaW9ucyl7XG4gICAgICAgICAgICB2YWx1ZSArPSBcIlwiO1xuICAgICAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoXCIsXCIpID49IDApIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCByZXNvbHZlIGV4dGVuc2lvbjogJHt2YWx1ZX1gKTtcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBmbGFncy5wdXNoKGAtLXJlc29sdmUtZXh0ZW5zaW9ucz0ke3ZhbHVlcy5qb2luKFwiLFwiKX1gKTtcbiAgICB9XG4gICAgaWYgKHB1YmxpY1BhdGgpIGZsYWdzLnB1c2goYC0tcHVibGljLXBhdGg9JHtwdWJsaWNQYXRofWApO1xuICAgIGlmIChlbnRyeU5hbWVzKSBmbGFncy5wdXNoKGAtLWVudHJ5LW5hbWVzPSR7ZW50cnlOYW1lc31gKTtcbiAgICBpZiAoY2h1bmtOYW1lcykgZmxhZ3MucHVzaChgLS1jaHVuay1uYW1lcz0ke2NodW5rTmFtZXN9YCk7XG4gICAgaWYgKGFzc2V0TmFtZXMpIGZsYWdzLnB1c2goYC0tYXNzZXQtbmFtZXM9JHthc3NldE5hbWVzfWApO1xuICAgIGlmIChtYWluRmllbGRzKSB7XG4gICAgICAgIGxldCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgdmFsdWUgb2YgbWFpbkZpZWxkcyl7XG4gICAgICAgICAgICB2YWx1ZSArPSBcIlwiO1xuICAgICAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoXCIsXCIpID49IDApIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBtYWluIGZpZWxkOiAke3ZhbHVlfWApO1xuICAgICAgICAgICAgdmFsdWVzLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGZsYWdzLnB1c2goYC0tbWFpbi1maWVsZHM9JHt2YWx1ZXMuam9pbihcIixcIil9YCk7XG4gICAgfVxuICAgIGlmIChjb25kaXRpb25zKSB7XG4gICAgICAgIGxldCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgdmFsdWUgb2YgY29uZGl0aW9ucyl7XG4gICAgICAgICAgICB2YWx1ZSArPSBcIlwiO1xuICAgICAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoXCIsXCIpID49IDApIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjb25kaXRpb246ICR7dmFsdWV9YCk7XG4gICAgICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZmxhZ3MucHVzaChgLS1jb25kaXRpb25zPSR7dmFsdWVzLmpvaW4oXCIsXCIpfWApO1xuICAgIH1cbiAgICBpZiAoZXh0ZXJuYWwpIGZvciAobGV0IG5hbWUgb2YgZXh0ZXJuYWwpZmxhZ3MucHVzaChgLS1leHRlcm5hbDoke25hbWV9YCk7XG4gICAgaWYgKGJhbm5lcikge1xuICAgICAgICBmb3IobGV0IHR5cGUgaW4gYmFubmVyKXtcbiAgICAgICAgICAgIGlmICh0eXBlLmluZGV4T2YoXCI9XCIpID49IDApIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBiYW5uZXIgZmlsZSB0eXBlOiAke3R5cGV9YCk7XG4gICAgICAgICAgICBmbGFncy5wdXNoKGAtLWJhbm5lcjoke3R5cGV9PSR7YmFubmVyW3R5cGVdfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChmb290ZXIpIHtcbiAgICAgICAgZm9yKGxldCB0eXBlIGluIGZvb3Rlcil7XG4gICAgICAgICAgICBpZiAodHlwZS5pbmRleE9mKFwiPVwiKSA+PSAwKSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZm9vdGVyIGZpbGUgdHlwZTogJHt0eXBlfWApO1xuICAgICAgICAgICAgZmxhZ3MucHVzaChgLS1mb290ZXI6JHt0eXBlfT0ke2Zvb3Rlclt0eXBlXX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW5qZWN0KSBmb3IgKGxldCBwYXRoIG9mIGluamVjdClmbGFncy5wdXNoKGAtLWluamVjdDoke3BhdGh9YCk7XG4gICAgaWYgKGxvYWRlcikge1xuICAgICAgICBmb3IobGV0IGV4dCBpbiBsb2FkZXIpe1xuICAgICAgICAgICAgaWYgKGV4dC5pbmRleE9mKFwiPVwiKSA+PSAwKSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgbG9hZGVyIGV4dGVuc2lvbjogJHtleHR9YCk7XG4gICAgICAgICAgICBmbGFncy5wdXNoKGAtLWxvYWRlcjoke2V4dH09JHtsb2FkZXJbZXh0XX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAob3V0RXh0ZW5zaW9uKSB7XG4gICAgICAgIGZvcihsZXQgZXh0IGluIG91dEV4dGVuc2lvbil7XG4gICAgICAgICAgICBpZiAoZXh0LmluZGV4T2YoXCI9XCIpID49IDApIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBvdXQgZXh0ZW5zaW9uOiAke2V4dH1gKTtcbiAgICAgICAgICAgIGZsYWdzLnB1c2goYC0tb3V0LWV4dGVuc2lvbjoke2V4dH09JHtvdXRFeHRlbnNpb25bZXh0XX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZW50cnlQb2ludHMpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnlQb2ludHMpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBlbnRyeVBvaW50IG9mIGVudHJ5UG9pbnRzKXtcbiAgICAgICAgICAgICAgICBlbnRyaWVzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBlbnRyeVBvaW50ICsgXCJcIlxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGVudHJ5UG9pbnRzKSl7XG4gICAgICAgICAgICAgICAgZW50cmllcy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgICAga2V5ICsgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgKyBcIlwiXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHN0ZGluKSB7XG4gICAgICAgIGxldCBzdGRpbktleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBsZXQgY29udGVudHMgPSBnZXRGbGFnKHN0ZGluLCBzdGRpbktleXMsIFwiY29udGVudHNcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgbGV0IHJlc29sdmVEaXIgPSBnZXRGbGFnKHN0ZGluLCBzdGRpbktleXMsIFwicmVzb2x2ZURpclwiLCBtdXN0QmVTdHJpbmcpO1xuICAgICAgICBsZXQgc291cmNlZmlsZSA9IGdldEZsYWcoc3RkaW4sIHN0ZGluS2V5cywgXCJzb3VyY2VmaWxlXCIsIG11c3RCZVN0cmluZyk7XG4gICAgICAgIGxldCBsb2FkZXIyID0gZ2V0RmxhZyhzdGRpbiwgc3RkaW5LZXlzLCBcImxvYWRlclwiLCBtdXN0QmVTdHJpbmcpO1xuICAgICAgICBjaGVja0ZvckludmFsaWRGbGFncyhzdGRpbiwgc3RkaW5LZXlzLCAnaW4gXCJzdGRpblwiIG9iamVjdCcpO1xuICAgICAgICBpZiAoc291cmNlZmlsZSkgZmxhZ3MucHVzaChgLS1zb3VyY2VmaWxlPSR7c291cmNlZmlsZX1gKTtcbiAgICAgICAgaWYgKGxvYWRlcjIpIGZsYWdzLnB1c2goYC0tbG9hZGVyPSR7bG9hZGVyMn1gKTtcbiAgICAgICAgaWYgKHJlc29sdmVEaXIpIHN0ZGluUmVzb2x2ZURpciA9IHJlc29sdmVEaXIgKyBcIlwiO1xuICAgICAgICBzdGRpbkNvbnRlbnRzID0gY29udGVudHMgPyBjb250ZW50cyArIFwiXCIgOiBcIlwiO1xuICAgIH1cbiAgICBsZXQgbm9kZVBhdGhzID0gW107XG4gICAgaWYgKG5vZGVQYXRoc0lucHV0KSB7XG4gICAgICAgIGZvciAobGV0IHZhbHVlIG9mIG5vZGVQYXRoc0lucHV0KXtcbiAgICAgICAgICAgIHZhbHVlICs9IFwiXCI7XG4gICAgICAgICAgICBub2RlUGF0aHMucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZW50cmllcyxcbiAgICAgICAgZmxhZ3MsXG4gICAgICAgIHdyaXRlLFxuICAgICAgICBzdGRpbkNvbnRlbnRzLFxuICAgICAgICBzdGRpblJlc29sdmVEaXIsXG4gICAgICAgIGFic1dvcmtpbmdEaXIsXG4gICAgICAgIGluY3JlbWVudGFsLFxuICAgICAgICBub2RlUGF0aHMsXG4gICAgICAgIHdhdGNoOiB3YXRjaE1vZGVcbiAgICB9O1xufVxuZnVuY3Rpb24gZmxhZ3NGb3JUcmFuc2Zvcm1PcHRpb25zKGNhbGxOYW1lLCBvcHRpb25zLCBpc1RUWSwgbG9nTGV2ZWxEZWZhdWx0KSB7XG4gICAgbGV0IGZsYWdzID0gW107XG4gICAgbGV0IGtleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHB1c2hMb2dGbGFncyhmbGFncywgb3B0aW9ucywga2V5cywgaXNUVFksIGxvZ0xldmVsRGVmYXVsdCk7XG4gICAgcHVzaENvbW1vbkZsYWdzKGZsYWdzLCBvcHRpb25zLCBrZXlzKTtcbiAgICBsZXQgc291cmNlbWFwID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInNvdXJjZW1hcFwiLCBtdXN0QmVTdHJpbmdPckJvb2xlYW4pO1xuICAgIGxldCB0c2NvbmZpZ1JhdyA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJ0c2NvbmZpZ1Jhd1wiLCBtdXN0QmVTdHJpbmdPck9iamVjdCk7XG4gICAgbGV0IHNvdXJjZWZpbGUgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwic291cmNlZmlsZVwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGxldCBsb2FkZXIgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwibG9hZGVyXCIsIG11c3RCZVN0cmluZyk7XG4gICAgbGV0IGJhbm5lciA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJiYW5uZXJcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgZm9vdGVyID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImZvb3RlclwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKG9wdGlvbnMsIGtleXMsIGBpbiAke2NhbGxOYW1lfSgpIGNhbGxgKTtcbiAgICBpZiAoc291cmNlbWFwKSBmbGFncy5wdXNoKGAtLXNvdXJjZW1hcD0ke3NvdXJjZW1hcCA9PT0gdHJ1ZSA/IFwiZXh0ZXJuYWxcIiA6IHNvdXJjZW1hcH1gKTtcbiAgICBpZiAodHNjb25maWdSYXcpIGZsYWdzLnB1c2goYC0tdHNjb25maWctcmF3PSR7dHlwZW9mIHRzY29uZmlnUmF3ID09PSBcInN0cmluZ1wiID8gdHNjb25maWdSYXcgOiBKU09OLnN0cmluZ2lmeSh0c2NvbmZpZ1Jhdyl9YCk7XG4gICAgaWYgKHNvdXJjZWZpbGUpIGZsYWdzLnB1c2goYC0tc291cmNlZmlsZT0ke3NvdXJjZWZpbGV9YCk7XG4gICAgaWYgKGxvYWRlcikgZmxhZ3MucHVzaChgLS1sb2FkZXI9JHtsb2FkZXJ9YCk7XG4gICAgaWYgKGJhbm5lcikgZmxhZ3MucHVzaChgLS1iYW5uZXI9JHtiYW5uZXJ9YCk7XG4gICAgaWYgKGZvb3RlcikgZmxhZ3MucHVzaChgLS1mb290ZXI9JHtmb290ZXJ9YCk7XG4gICAgcmV0dXJuIGZsYWdzO1xufVxuZnVuY3Rpb24gY3JlYXRlQ2hhbm5lbChzdHJlYW1Jbikge1xuICAgIGxldCByZXNwb25zZUNhbGxiYWNrcyA9IG5ldyBNYXAoKTtcbiAgICBsZXQgcGx1Z2luQ2FsbGJhY2tzID0gbmV3IE1hcCgpO1xuICAgIGxldCB3YXRjaENhbGxiYWNrcyA9IG5ldyBNYXAoKTtcbiAgICBsZXQgc2VydmVDYWxsYmFja3MgPSBuZXcgTWFwKCk7XG4gICAgbGV0IG5leHRTZXJ2ZUlEID0gMDtcbiAgICBsZXQgaXNDbG9zZWQgPSBmYWxzZTtcbiAgICBsZXQgbmV4dFJlcXVlc3RJRCA9IDA7XG4gICAgbGV0IG5leHRCdWlsZEtleSA9IDA7XG4gICAgbGV0IHN0ZG91dCA9IG5ldyBVaW50OEFycmF5KDE2ICogMTAyNCk7XG4gICAgbGV0IHN0ZG91dFVzZWQgPSAwO1xuICAgIGxldCByZWFkRnJvbVN0ZG91dCA9IChjaHVuayk9PntcbiAgICAgICAgbGV0IGxpbWl0ID0gc3Rkb3V0VXNlZCArIGNodW5rLmxlbmd0aDtcbiAgICAgICAgaWYgKGxpbWl0ID4gc3Rkb3V0Lmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHN3YXAgPSBuZXcgVWludDhBcnJheShsaW1pdCAqIDIpO1xuICAgICAgICAgICAgc3dhcC5zZXQoc3Rkb3V0KTtcbiAgICAgICAgICAgIHN0ZG91dCA9IHN3YXA7XG4gICAgICAgIH1cbiAgICAgICAgc3Rkb3V0LnNldChjaHVuaywgc3Rkb3V0VXNlZCk7XG4gICAgICAgIHN0ZG91dFVzZWQgKz0gY2h1bmsubGVuZ3RoO1xuICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICAgICAgd2hpbGUob2Zmc2V0ICsgNCA8PSBzdGRvdXRVc2VkKXtcbiAgICAgICAgICAgIGxldCBsZW5ndGggPSByZWFkVUludDMyTEUoc3Rkb3V0LCBvZmZzZXQpO1xuICAgICAgICAgICAgaWYgKG9mZnNldCArIDQgKyBsZW5ndGggPiBzdGRvdXRVc2VkKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvZmZzZXQgKz0gNDtcbiAgICAgICAgICAgIGhhbmRsZUluY29taW5nUGFja2V0KHN0ZG91dC5zdWJhcnJheShvZmZzZXQsIG9mZnNldCArIGxlbmd0aCkpO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IGxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2Zmc2V0ID4gMCkge1xuICAgICAgICAgICAgc3Rkb3V0LmNvcHlXaXRoaW4oMCwgb2Zmc2V0LCBzdGRvdXRVc2VkKTtcbiAgICAgICAgICAgIHN0ZG91dFVzZWQgLT0gb2Zmc2V0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBsZXQgYWZ0ZXJDbG9zZSA9ICgpPT57XG4gICAgICAgIGlzQ2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgZm9yIChsZXQgY2FsbGJhY2sgb2YgcmVzcG9uc2VDYWxsYmFja3MudmFsdWVzKCkpe1xuICAgICAgICAgICAgY2FsbGJhY2soXCJUaGUgc2VydmljZSB3YXMgc3RvcHBlZFwiLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICByZXNwb25zZUNhbGxiYWNrcy5jbGVhcigpO1xuICAgICAgICBmb3IgKGxldCBjYWxsYmFja3Mgb2Ygc2VydmVDYWxsYmFja3MudmFsdWVzKCkpe1xuICAgICAgICAgICAgY2FsbGJhY2tzLm9uV2FpdChcIlRoZSBzZXJ2aWNlIHdhcyBzdG9wcGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIHNlcnZlQ2FsbGJhY2tzLmNsZWFyKCk7XG4gICAgICAgIGZvciAobGV0IGNhbGxiYWNrMSBvZiB3YXRjaENhbGxiYWNrcy52YWx1ZXMoKSl7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrMShuZXcgRXJyb3IoXCJUaGUgc2VydmljZSB3YXMgc3RvcHBlZFwiKSwgbnVsbCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB3YXRjaENhbGxiYWNrcy5jbGVhcigpO1xuICAgIH07XG4gICAgbGV0IHNlbmRSZXF1ZXN0ID0gKHJlZnMsIHZhbHVlLCBjYWxsYmFjayk9PntcbiAgICAgICAgaWYgKGlzQ2xvc2VkKSByZXR1cm4gY2FsbGJhY2soXCJUaGUgc2VydmljZSBpcyBubyBsb25nZXIgcnVubmluZ1wiLCBudWxsKTtcbiAgICAgICAgbGV0IGlkID0gbmV4dFJlcXVlc3RJRCsrO1xuICAgICAgICByZXNwb25zZUNhbGxiYWNrcy5zZXQoaWQsIChlcnJvciwgcmVzcG9uc2UpPT57XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCByZXNwb25zZSk7XG4gICAgICAgICAgICB9IGZpbmFsbHl7XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMpIHJlZnMudW5yZWYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZWZzKSByZWZzLnJlZigpO1xuICAgICAgICBzdHJlYW1Jbi53cml0ZVRvU3RkaW4oZW5jb2RlUGFja2V0KHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgaXNSZXF1ZXN0OiB0cnVlLFxuICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgfSkpO1xuICAgIH07XG4gICAgbGV0IHNlbmRSZXNwb25zZSA9IChpZCwgdmFsdWUpPT57XG4gICAgICAgIGlmIChpc0Nsb3NlZCkgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHNlcnZpY2UgaXMgbm8gbG9uZ2VyIHJ1bm5pbmdcIik7XG4gICAgICAgIHN0cmVhbUluLndyaXRlVG9TdGRpbihlbmNvZGVQYWNrZXQoe1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBpc1JlcXVlc3Q6IGZhbHNlLFxuICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgfSkpO1xuICAgIH07XG4gICAgbGV0IGhhbmRsZVJlcXVlc3QgPSBhc3luYyAoaWQsIHJlcXVlc3QpPT57XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzd2l0Y2gocmVxdWVzdC5jb21tYW5kKXtcbiAgICAgICAgICAgICAgICBjYXNlIFwicGluZ1wiOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kUmVzcG9uc2UoaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFwic3RhcnRcIjpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbGxiYWNrID0gcGx1Z2luQ2FsbGJhY2tzLmdldChyZXF1ZXN0LmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbGxiYWNrKSBzZW5kUmVzcG9uc2UoaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBzZW5kUmVzcG9uc2UoaWQsIGF3YWl0IGNhbGxiYWNrKHJlcXVlc3QpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBcInJlc29sdmVcIjpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbGxiYWNrID0gcGx1Z2luQ2FsbGJhY2tzLmdldChyZXF1ZXN0LmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbGxiYWNrKSBzZW5kUmVzcG9uc2UoaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBzZW5kUmVzcG9uc2UoaWQsIGF3YWl0IGNhbGxiYWNrKHJlcXVlc3QpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBcImxvYWRcIjpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbGxiYWNrID0gcGx1Z2luQ2FsbGJhY2tzLmdldChyZXF1ZXN0LmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbGxiYWNrKSBzZW5kUmVzcG9uc2UoaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBzZW5kUmVzcG9uc2UoaWQsIGF3YWl0IGNhbGxiYWNrKHJlcXVlc3QpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBcInNlcnZlLXJlcXVlc3RcIjpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbGxiYWNrcyA9IHNlcnZlQ2FsbGJhY2tzLmdldChyZXF1ZXN0LnNlcnZlSUQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrcyAmJiBjYWxsYmFja3Mub25SZXF1ZXN0KSBjYWxsYmFja3Mub25SZXF1ZXN0KHJlcXVlc3QuYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kUmVzcG9uc2UoaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFwic2VydmUtd2FpdFwiOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FsbGJhY2tzID0gc2VydmVDYWxsYmFja3MuZ2V0KHJlcXVlc3Quc2VydmVJRCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2tzKSBjYWxsYmFja3Mub25XYWl0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKGlkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBcIndhdGNoLXJlYnVpbGRcIjpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbGxiYWNrID0gd2F0Y2hDYWxsYmFja3MuZ2V0KHJlcXVlc3Qud2F0Y2hJRCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2sobnVsbCwgcmVxdWVzdC5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRSZXNwb25zZShpZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjb21tYW5kOiBgICsgcmVxdWVzdC5jb21tYW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgc2VuZFJlc3BvbnNlKGlkLCB7XG4gICAgICAgICAgICAgICAgZXJyb3JzOiBbXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3RFcnJvck1lc3NhZ2VWOChlLCBzdHJlYW1JbiwgbnVsbCwgdm9pZCAwLCBcIlwiKVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBsZXQgaXNGaXJzdFBhY2tldCA9IHRydWU7XG4gICAgbGV0IGhhbmRsZUluY29taW5nUGFja2V0ID0gKGJ5dGVzKT0+e1xuICAgICAgICBpZiAoaXNGaXJzdFBhY2tldCkge1xuICAgICAgICAgICAgaXNGaXJzdFBhY2tldCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGJpbmFyeVZlcnNpb24gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLmJ5dGVzKTtcbiAgICAgICAgICAgIGlmIChiaW5hcnlWZXJzaW9uICE9PSBcIjAuMTMuMTFcIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHN0YXJ0IHNlcnZpY2U6IEhvc3QgdmVyc2lvbiBcIiR7XCIwLjEzLjExXCJ9XCIgZG9lcyBub3QgbWF0Y2ggYmluYXJ5IHZlcnNpb24gJHtKU09OLnN0cmluZ2lmeShiaW5hcnlWZXJzaW9uKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGFja2V0ID0gZGVjb2RlUGFja2V0KGJ5dGVzKTtcbiAgICAgICAgaWYgKHBhY2tldC5pc1JlcXVlc3QpIHtcbiAgICAgICAgICAgIGhhbmRsZVJlcXVlc3QocGFja2V0LmlkLCBwYWNrZXQudmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGNhbGxiYWNrID0gcmVzcG9uc2VDYWxsYmFja3MuZ2V0KHBhY2tldC5pZCk7XG4gICAgICAgICAgICByZXNwb25zZUNhbGxiYWNrcy5kZWxldGUocGFja2V0LmlkKTtcbiAgICAgICAgICAgIGlmIChwYWNrZXQudmFsdWUuZXJyb3IpIGNhbGxiYWNrKHBhY2tldC52YWx1ZS5lcnJvciwge1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbHNlIGNhbGxiYWNrKG51bGwsIHBhY2tldC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGxldCBoYW5kbGVQbHVnaW5zID0gYXN5bmMgKGluaXRpYWxPcHRpb25zLCBwbHVnaW5zLCBidWlsZEtleSwgc3Rhc2gpPT57XG4gICAgICAgIGxldCBvblN0YXJ0Q2FsbGJhY2tzID0gW107XG4gICAgICAgIGxldCBvbkVuZENhbGxiYWNrcyA9IFtdO1xuICAgICAgICBsZXQgb25SZXNvbHZlQ2FsbGJhY2tzID0ge1xuICAgICAgICB9O1xuICAgICAgICBsZXQgb25Mb2FkQ2FsbGJhY2tzID0ge1xuICAgICAgICB9O1xuICAgICAgICBsZXQgbmV4dENhbGxiYWNrSUQgPSAwO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGxldCByZXF1ZXN0UGx1Z2lucyA9IFtdO1xuICAgICAgICBwbHVnaW5zID0gW1xuICAgICAgICAgICAgLi4ucGx1Z2luc1xuICAgICAgICBdO1xuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHBsdWdpbnMpe1xuICAgICAgICAgICAgbGV0IGtleXMgPSB7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoYFBsdWdpbiBhdCBpbmRleCAke2l9IG11c3QgYmUgYW4gb2JqZWN0YCk7XG4gICAgICAgICAgICBsZXQgbmFtZSA9IGdldEZsYWcoaXRlbSwga2V5cywgXCJuYW1lXCIsIG11c3RCZVN0cmluZyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIgfHwgbmFtZSA9PT0gXCJcIikgdGhyb3cgbmV3IEVycm9yKGBQbHVnaW4gYXQgaW5kZXggJHtpfSBpcyBtaXNzaW5nIGEgbmFtZWApO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsZXQgc2V0dXAgPSBnZXRGbGFnKGl0ZW0sIGtleXMsIFwic2V0dXBcIiwgbXVzdEJlRnVuY3Rpb24pO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2V0dXAgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yKGBQbHVnaW4gaXMgbWlzc2luZyBhIHNldHVwIGZ1bmN0aW9uYCk7XG4gICAgICAgICAgICAgICAgY2hlY2tGb3JJbnZhbGlkRmxhZ3MoaXRlbSwga2V5cywgYG9uIHBsdWdpbiAke0pTT04uc3RyaW5naWZ5KG5hbWUpfWApO1xuICAgICAgICAgICAgICAgIGxldCBwbHVnaW4gPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG9uUmVzb2x2ZTogW10sXG4gICAgICAgICAgICAgICAgICAgIG9uTG9hZDogW11cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICBsZXQgcHJvbWlzZSA9IHNldHVwKHtcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIG9uU3RhcnQgKGNhbGxiYWNrMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ2lzdGVyZWRUZXh0ID0gYFRoaXMgZXJyb3IgY2FtZSBmcm9tIHRoZSBcIm9uU3RhcnRcIiBjYWxsYmFjayByZWdpc3RlcmVkIGhlcmVgO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ2lzdGVyZWROb3RlID0gZXh0cmFjdENhbGxlclY4KG5ldyBFcnJvcihyZWdpc3RlcmVkVGV4dCksIHN0cmVhbUluLCBcIm9uU3RhcnRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBvblN0YXJ0Q2FsbGJhY2tzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RlOiByZWdpc3RlcmVkTm90ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uRW5kIChjYWxsYmFjazIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdpc3RlcmVkVGV4dCA9IGBUaGlzIGVycm9yIGNhbWUgZnJvbSB0aGUgXCJvbkVuZFwiIGNhbGxiYWNrIHJlZ2lzdGVyZWQgaGVyZWA7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnaXN0ZXJlZE5vdGUgPSBleHRyYWN0Q2FsbGVyVjgobmV3IEVycm9yKHJlZ2lzdGVyZWRUZXh0KSwgc3RyZWFtSW4sIFwib25FbmRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkVuZENhbGxiYWNrcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjazIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90ZTogcmVnaXN0ZXJlZE5vdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvblJlc29sdmUgKG9wdGlvbnMsIGNhbGxiYWNrMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ2lzdGVyZWRUZXh0ID0gYFRoaXMgZXJyb3IgY2FtZSBmcm9tIHRoZSBcIm9uUmVzb2x2ZVwiIGNhbGxiYWNrIHJlZ2lzdGVyZWQgaGVyZWA7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnaXN0ZXJlZE5vdGUgPSBleHRyYWN0Q2FsbGVyVjgobmV3IEVycm9yKHJlZ2lzdGVyZWRUZXh0KSwgc3RyZWFtSW4sIFwib25SZXNvbHZlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGtleXMyID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXIgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMyLCBcImZpbHRlclwiLCBtdXN0QmVSZWdFeHApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5hbWVzcGFjZSA9IGdldEZsYWcob3B0aW9ucywga2V5czIsIFwibmFtZXNwYWNlXCIsIG11c3RCZVN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0ZvckludmFsaWRGbGFncyhvcHRpb25zLCBrZXlzMiwgYGluIG9uUmVzb2x2ZSgpIGNhbGwgZm9yIHBsdWdpbiAke0pTT04uc3RyaW5naWZ5KG5hbWUpfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlciA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoYG9uUmVzb2x2ZSgpIGNhbGwgaXMgbWlzc2luZyBhIGZpbHRlcmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlkID0gbmV4dENhbGxiYWNrSUQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzb2x2ZUNhbGxiYWNrc1tpZF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2syLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGU6IHJlZ2lzdGVyZWROb3RlXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luLm9uUmVzb2x2ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXI6IGZpbHRlci5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiBuYW1lc3BhY2UgfHwgXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uTG9hZCAob3B0aW9ucywgY2FsbGJhY2syKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnaXN0ZXJlZFRleHQgPSBgVGhpcyBlcnJvciBjYW1lIGZyb20gdGhlIFwib25Mb2FkXCIgY2FsbGJhY2sgcmVnaXN0ZXJlZCBoZXJlYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdpc3RlcmVkTm90ZSA9IGV4dHJhY3RDYWxsZXJWOChuZXcgRXJyb3IocmVnaXN0ZXJlZFRleHQpLCBzdHJlYW1JbiwgXCJvbkxvYWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQga2V5czIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlciA9IGdldEZsYWcob3B0aW9ucywga2V5czIsIFwiZmlsdGVyXCIsIG11c3RCZVJlZ0V4cCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmFtZXNwYWNlID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzMiwgXCJuYW1lc3BhY2VcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKG9wdGlvbnMsIGtleXMyLCBgaW4gb25Mb2FkKCkgY2FsbCBmb3IgcGx1Z2luICR7SlNPTi5zdHJpbmdpZnkobmFtZSl9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyID09IG51bGwpIHRocm93IG5ldyBFcnJvcihgb25Mb2FkKCkgY2FsbCBpcyBtaXNzaW5nIGEgZmlsdGVyYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaWQgPSBuZXh0Q2FsbGJhY2tJRCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgb25Mb2FkQ2FsbGJhY2tzW2lkXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjazIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90ZTogcmVnaXN0ZXJlZE5vdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4ub25Mb2FkLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcjogZmlsdGVyLnNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IG5hbWVzcGFjZSB8fCBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChwcm9taXNlKSBhd2FpdCBwcm9taXNlO1xuICAgICAgICAgICAgICAgIHJlcXVlc3RQbHVnaW5zLnB1c2gocGx1Z2luKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBvazogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlLFxuICAgICAgICAgICAgICAgICAgICBwbHVnaW5OYW1lOiBuYW1lXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYWxsYmFjayA9IGFzeW5jIChyZXF1ZXN0KT0+e1xuICAgICAgICAgICAgc3dpdGNoKHJlcXVlc3QuY29tbWFuZCl7XG4gICAgICAgICAgICAgICAgY2FzZSBcInN0YXJ0XCI6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzOiBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKG9uU3RhcnRDYWxsYmFja3MubWFwKGFzeW5jICh7IG5hbWUgLCBjYWxsYmFjazogY2FsbGJhY2syICwgbm90ZSAgfSk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgY2FsbGJhY2syKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgb25TdGFydCgpIGNhbGxiYWNrIGluIHBsdWdpbiAke0pTT04uc3RyaW5naWZ5KG5hbWUpfSB0byByZXR1cm4gYW4gb2JqZWN0YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQga2V5cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3JzID0gZ2V0RmxhZyhyZXN1bHQsIGtleXMsIFwiZXJyb3JzXCIsIG11c3RCZUFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3YXJuaW5ncyA9IGdldEZsYWcocmVzdWx0LCBrZXlzLCBcIndhcm5pbmdzXCIsIG11c3RCZUFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKHJlc3VsdCwga2V5cywgYGZyb20gb25TdGFydCgpIGNhbGxiYWNrIGluIHBsdWdpbiAke0pTT04uc3RyaW5naWZ5KG5hbWUpfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9ycyAhPSBudWxsKSByZXNwb25zZS5lcnJvcnMucHVzaCguLi5zYW5pdGl6ZU1lc3NhZ2VzKGVycm9ycywgXCJlcnJvcnNcIiwgc3Rhc2gsIG5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXJuaW5ncyAhPSBudWxsKSByZXNwb25zZS53YXJuaW5ncy5wdXNoKC4uLnNhbml0aXplTWVzc2FnZXMod2FybmluZ3MsIFwid2FybmluZ3NcIiwgc3Rhc2gsIG5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZXJyb3JzLnB1c2goZXh0cmFjdEVycm9yTWVzc2FnZVY4KGUsIHN0cmVhbUluLCBzdGFzaCwgbm90ZSAmJiBub3RlKCksIG5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFwicmVzb2x2ZVwiOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBuYW1lID0gXCJcIiwgY2FsbGJhY2syLCBub3RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaWQgb2YgcmVxdWVzdC5pZHMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh7IG5hbWUgLCBjYWxsYmFjazogY2FsbGJhY2syICwgbm90ZSAgfSA9IG9uUmVzb2x2ZUNhbGxiYWNrc1tpZF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgY2FsbGJhY2syKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHJlcXVlc3QucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydGVyOiByZXF1ZXN0LmltcG9ydGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiByZXF1ZXN0Lm5hbWVzcGFjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVEaXI6IHJlcXVlc3QucmVzb2x2ZURpcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6IHJlcXVlc3Qua2luZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbkRhdGE6IHN0YXNoLmxvYWQocmVxdWVzdC5wbHVnaW5EYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBvblJlc29sdmUoKSBjYWxsYmFjayBpbiBwbHVnaW4gJHtKU09OLnN0cmluZ2lmeShuYW1lKX0gdG8gcmV0dXJuIGFuIG9iamVjdGApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGtleXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBsdWdpbk5hbWUgPSBnZXRGbGFnKHJlc3VsdCwga2V5cywgXCJwbHVnaW5OYW1lXCIsIG11c3RCZVN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGF0aCA9IGdldEZsYWcocmVzdWx0LCBrZXlzLCBcInBhdGhcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuYW1lc3BhY2UgPSBnZXRGbGFnKHJlc3VsdCwga2V5cywgXCJuYW1lc3BhY2VcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleHRlcm5hbCA9IGdldEZsYWcocmVzdWx0LCBrZXlzLCBcImV4dGVybmFsXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNpZGVFZmZlY3RzID0gZ2V0RmxhZyhyZXN1bHQsIGtleXMsIFwic2lkZUVmZmVjdHNcIiwgbXVzdEJlQm9vbGVhbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGx1Z2luRGF0YSA9IGdldEZsYWcocmVzdWx0LCBrZXlzLCBcInBsdWdpbkRhdGFcIiwgY2FuQmVBbnl0aGluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3JzID0gZ2V0RmxhZyhyZXN1bHQsIGtleXMsIFwiZXJyb3JzXCIsIG11c3RCZUFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3YXJuaW5ncyA9IGdldEZsYWcocmVzdWx0LCBrZXlzLCBcIndhcm5pbmdzXCIsIG11c3RCZUFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3YXRjaEZpbGVzID0gZ2V0RmxhZyhyZXN1bHQsIGtleXMsIFwid2F0Y2hGaWxlc1wiLCBtdXN0QmVBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2F0Y2hEaXJzID0gZ2V0RmxhZyhyZXN1bHQsIGtleXMsIFwid2F0Y2hEaXJzXCIsIG11c3RCZUFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKHJlc3VsdCwga2V5cywgYGZyb20gb25SZXNvbHZlKCkgY2FsbGJhY2sgaW4gcGx1Z2luICR7SlNPTi5zdHJpbmdpZnkobmFtZSl9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5pZCA9IGlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsdWdpbk5hbWUgIT0gbnVsbCkgcmVzcG9uc2UucGx1Z2luTmFtZSA9IHBsdWdpbk5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGF0aCAhPSBudWxsKSByZXNwb25zZS5wYXRoID0gcGF0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYW1lc3BhY2UgIT0gbnVsbCkgcmVzcG9uc2UubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4dGVybmFsICE9IG51bGwpIHJlc3BvbnNlLmV4dGVybmFsID0gZXh0ZXJuYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZUVmZmVjdHMgIT0gbnVsbCkgcmVzcG9uc2Uuc2lkZUVmZmVjdHMgPSBzaWRlRWZmZWN0cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbHVnaW5EYXRhICE9IG51bGwpIHJlc3BvbnNlLnBsdWdpbkRhdGEgPSBzdGFzaC5zdG9yZShwbHVnaW5EYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcnMgIT0gbnVsbCkgcmVzcG9uc2UuZXJyb3JzID0gc2FuaXRpemVNZXNzYWdlcyhlcnJvcnMsIFwiZXJyb3JzXCIsIHN0YXNoLCBuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXJuaW5ncyAhPSBudWxsKSByZXNwb25zZS53YXJuaW5ncyA9IHNhbml0aXplTWVzc2FnZXMod2FybmluZ3MsIFwid2FybmluZ3NcIiwgc3Rhc2gsIG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoRmlsZXMgIT0gbnVsbCkgcmVzcG9uc2Uud2F0Y2hGaWxlcyA9IHNhbml0aXplU3RyaW5nQXJyYXkod2F0Y2hGaWxlcywgXCJ3YXRjaEZpbGVzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoRGlycyAhPSBudWxsKSByZXNwb25zZS53YXRjaERpcnMgPSBzYW5pdGl6ZVN0cmluZ0FycmF5KHdhdGNoRGlycywgXCJ3YXRjaERpcnNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdEVycm9yTWVzc2FnZVY4KGUsIHN0cmVhbUluLCBzdGFzaCwgbm90ZSAmJiBub3RlKCksIG5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBcImxvYWRcIjpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgbmFtZSA9IFwiXCIsIGNhbGxiYWNrMiwgbm90ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGlkIG9mIHJlcXVlc3QuaWRzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoeyBuYW1lICwgY2FsbGJhY2s6IGNhbGxiYWNrMiAsIG5vdGUgIH0gPSBvbkxvYWRDYWxsYmFja3NbaWRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGNhbGxiYWNrMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiByZXF1ZXN0LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IHJlcXVlc3QubmFtZXNwYWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luRGF0YTogc3Rhc2gubG9hZChyZXF1ZXN0LnBsdWdpbkRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIG9uTG9hZCgpIGNhbGxiYWNrIGluIHBsdWdpbiAke0pTT04uc3RyaW5naWZ5KG5hbWUpfSB0byByZXR1cm4gYW4gb2JqZWN0YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQga2V5cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGx1Z2luTmFtZSA9IGdldEZsYWcocmVzdWx0LCBrZXlzLCBcInBsdWdpbk5hbWVcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250ZW50cyA9IGdldEZsYWcocmVzdWx0LCBrZXlzLCBcImNvbnRlbnRzXCIsIG11c3RCZVN0cmluZ09yVWludDhBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzb2x2ZURpciA9IGdldEZsYWcocmVzdWx0LCBrZXlzLCBcInJlc29sdmVEaXJcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwbHVnaW5EYXRhID0gZ2V0RmxhZyhyZXN1bHQsIGtleXMsIFwicGx1Z2luRGF0YVwiLCBjYW5CZUFueXRoaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsb2FkZXIgPSBnZXRGbGFnKHJlc3VsdCwga2V5cywgXCJsb2FkZXJcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlcnJvcnMgPSBnZXRGbGFnKHJlc3VsdCwga2V5cywgXCJlcnJvcnNcIiwgbXVzdEJlQXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdhcm5pbmdzID0gZ2V0RmxhZyhyZXN1bHQsIGtleXMsIFwid2FybmluZ3NcIiwgbXVzdEJlQXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdhdGNoRmlsZXMgPSBnZXRGbGFnKHJlc3VsdCwga2V5cywgXCJ3YXRjaEZpbGVzXCIsIG11c3RCZUFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3YXRjaERpcnMgPSBnZXRGbGFnKHJlc3VsdCwga2V5cywgXCJ3YXRjaERpcnNcIiwgbXVzdEJlQXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tGb3JJbnZhbGlkRmxhZ3MocmVzdWx0LCBrZXlzLCBgZnJvbSBvbkxvYWQoKSBjYWxsYmFjayBpbiBwbHVnaW4gJHtKU09OLnN0cmluZ2lmeShuYW1lKX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmlkID0gaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luTmFtZSAhPSBudWxsKSByZXNwb25zZS5wbHVnaW5OYW1lID0gcGx1Z2luTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50cyBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHJlc3BvbnNlLmNvbnRlbnRzID0gY29udGVudHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjb250ZW50cyAhPSBudWxsKSByZXNwb25zZS5jb250ZW50cyA9IGVuY29kZVVURjgoY29udGVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc29sdmVEaXIgIT0gbnVsbCkgcmVzcG9uc2UucmVzb2x2ZURpciA9IHJlc29sdmVEaXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luRGF0YSAhPSBudWxsKSByZXNwb25zZS5wbHVnaW5EYXRhID0gc3Rhc2guc3RvcmUocGx1Z2luRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVyICE9IG51bGwpIHJlc3BvbnNlLmxvYWRlciA9IGxvYWRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcnMgIT0gbnVsbCkgcmVzcG9uc2UuZXJyb3JzID0gc2FuaXRpemVNZXNzYWdlcyhlcnJvcnMsIFwiZXJyb3JzXCIsIHN0YXNoLCBuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXJuaW5ncyAhPSBudWxsKSByZXNwb25zZS53YXJuaW5ncyA9IHNhbml0aXplTWVzc2FnZXMod2FybmluZ3MsIFwid2FybmluZ3NcIiwgc3Rhc2gsIG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoRmlsZXMgIT0gbnVsbCkgcmVzcG9uc2Uud2F0Y2hGaWxlcyA9IHNhbml0aXplU3RyaW5nQXJyYXkod2F0Y2hGaWxlcywgXCJ3YXRjaEZpbGVzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoRGlycyAhPSBudWxsKSByZXNwb25zZS53YXRjaERpcnMgPSBzYW5pdGl6ZVN0cmluZ0FycmF5KHdhdGNoRGlycywgXCJ3YXRjaERpcnNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdEVycm9yTWVzc2FnZVY4KGUsIHN0cmVhbUluLCBzdGFzaCwgbm90ZSAmJiBub3RlKCksIG5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGNvbW1hbmQ6IGAgKyByZXF1ZXN0LmNvbW1hbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBsZXQgcnVuT25FbmRDYWxsYmFja3MgPSAocmVzdWx0LCBsb2dQbHVnaW5FcnJvciwgZG9uZSk9PmRvbmUoKVxuICAgICAgICA7XG4gICAgICAgIGlmIChvbkVuZENhbGxiYWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBydW5PbkVuZENhbGxiYWNrcyA9IChyZXN1bHQsIGxvZ1BsdWdpbkVycm9yLCBkb25lKT0+e1xuICAgICAgICAgICAgICAgIChhc3luYyAoKT0+e1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHsgbmFtZSAsIGNhbGxiYWNrOiBjYWxsYmFjazIgLCBub3RlICB9IG9mIG9uRW5kQ2FsbGJhY2tzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2FsbGJhY2syKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmVycm9ycy5wdXNoKGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKT0+bG9nUGx1Z2luRXJyb3IoZSwgbmFtZSwgbm90ZSAmJiBub3RlKCksIHJlc29sdmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSgpLnRoZW4oZG9uZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGxldCByZWZDb3VudCA9IDA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIHJlcXVlc3RQbHVnaW5zLFxuICAgICAgICAgICAgcnVuT25FbmRDYWxsYmFja3MsXG4gICAgICAgICAgICBwbHVnaW5SZWZzOiB7XG4gICAgICAgICAgICAgICAgcmVmICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCsrcmVmQ291bnQgPT09IDEpIHBsdWdpbkNhbGxiYWNrcy5zZXQoYnVpbGRLZXksIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHVucmVmICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKC0tcmVmQ291bnQgPT09IDApIHBsdWdpbkNhbGxiYWNrcy5kZWxldGUoYnVpbGRLZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGxldCBidWlsZFNlcnZlRGF0YSA9IChyZWZzLCBvcHRpb25zLCByZXF1ZXN0KT0+e1xuICAgICAgICBsZXQga2V5cyA9IHtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHBvcnQgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwicG9ydFwiLCBtdXN0QmVJbnRlZ2VyKTtcbiAgICAgICAgbGV0IGhvc3QgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwiaG9zdFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgICAgICBsZXQgc2VydmVkaXIgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwic2VydmVkaXJcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgbGV0IG9uUmVxdWVzdCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJvblJlcXVlc3RcIiwgbXVzdEJlRnVuY3Rpb24pO1xuICAgICAgICBsZXQgc2VydmVJRCA9IG5leHRTZXJ2ZUlEKys7XG4gICAgICAgIGxldCBvbldhaXQ7XG4gICAgICAgIGxldCB3YWl0ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PntcbiAgICAgICAgICAgIG9uV2FpdCA9IChlcnJvcik9PntcbiAgICAgICAgICAgICAgICBzZXJ2ZUNhbGxiYWNrcy5kZWxldGUoc2VydmVJRCk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yICE9PSBudWxsKSByZWplY3QobmV3IEVycm9yKGVycm9yKSk7XG4gICAgICAgICAgICAgICAgZWxzZSByZXNvbHZlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgcmVxdWVzdC5zZXJ2ZSA9IHtcbiAgICAgICAgICAgIHNlcnZlSURcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tGb3JJbnZhbGlkRmxhZ3Mob3B0aW9ucywga2V5cywgYGluIHNlcnZlKCkgY2FsbGApO1xuICAgICAgICBpZiAocG9ydCAhPT0gdm9pZCAwKSByZXF1ZXN0LnNlcnZlLnBvcnQgPSBwb3J0O1xuICAgICAgICBpZiAoaG9zdCAhPT0gdm9pZCAwKSByZXF1ZXN0LnNlcnZlLmhvc3QgPSBob3N0O1xuICAgICAgICBpZiAoc2VydmVkaXIgIT09IHZvaWQgMCkgcmVxdWVzdC5zZXJ2ZS5zZXJ2ZWRpciA9IHNlcnZlZGlyO1xuICAgICAgICBzZXJ2ZUNhbGxiYWNrcy5zZXQoc2VydmVJRCwge1xuICAgICAgICAgICAgb25SZXF1ZXN0LFxuICAgICAgICAgICAgb25XYWl0XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2FpdCxcbiAgICAgICAgICAgIHN0b3AgKCkge1xuICAgICAgICAgICAgICAgIHNlbmRSZXF1ZXN0KHJlZnMsIHtcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogXCJzZXJ2ZS1zdG9wXCIsXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlSURcbiAgICAgICAgICAgICAgICB9LCAoKT0+e1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYnVpbGRMb2dMZXZlbERlZmF1bHQgPSBcIndhcm5pbmdcIjtcbiAgICBjb25zdCB0cmFuc2Zvcm1Mb2dMZXZlbERlZmF1bHQgPSBcInNpbGVudFwiO1xuICAgIGxldCBidWlsZE9yU2VydmUgPSAoYXJncyk9PntcbiAgICAgICAgbGV0IGtleSA9IG5leHRCdWlsZEtleSsrO1xuICAgICAgICBjb25zdCBkZXRhaWxzID0gY3JlYXRlT2JqZWN0U3Rhc2goKTtcbiAgICAgICAgbGV0IHBsdWdpbnM7XG4gICAgICAgIGxldCB7IHJlZnMgLCBvcHRpb25zICwgaXNUVFkgLCBjYWxsYmFjayAgfSA9IGFyZ3M7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gb3B0aW9ucy5wbHVnaW5zO1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB0aHJvdyBuZXcgRXJyb3IoYFwicGx1Z2luc1wiIG11c3QgYmUgYW4gYXJyYXlgKTtcbiAgICAgICAgICAgICAgICBwbHVnaW5zID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxvZ1BsdWdpbkVycm9yID0gKGUsIHBsdWdpbk5hbWUsIG5vdGUsIGRvbmUpPT57XG4gICAgICAgICAgICBsZXQgZmxhZ3MgPSBbXTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcHVzaExvZ0ZsYWdzKGZsYWdzLCBvcHRpb25zLCB7XG4gICAgICAgICAgICAgICAgfSwgaXNUVFksIGJ1aWxkTG9nTGV2ZWxEZWZhdWx0KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUyKSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZXh0cmFjdEVycm9yTWVzc2FnZVY4KGUsIHN0cmVhbUluLCBkZXRhaWxzLCBub3RlLCBwbHVnaW5OYW1lKTtcbiAgICAgICAgICAgIHNlbmRSZXF1ZXN0KHJlZnMsIHtcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcImVycm9yXCIsXG4gICAgICAgICAgICAgICAgZmxhZ3MsXG4gICAgICAgICAgICAgICAgZXJyb3I6IG1lc3NhZ2VcbiAgICAgICAgICAgIH0sICgpPT57XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5kZXRhaWwgPSBkZXRhaWxzLmxvYWQobWVzc2FnZS5kZXRhaWwpO1xuICAgICAgICAgICAgICAgIGRvbmUobWVzc2FnZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGhhbmRsZUVycm9yID0gKGUsIHBsdWdpbk5hbWUpPT57XG4gICAgICAgICAgICBsb2dQbHVnaW5FcnJvcihlLCBwbHVnaW5OYW1lLCB2b2lkIDAsIChlcnJvcik9PntcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhmYWlsdXJlRXJyb3JXaXRoTG9nKFwiQnVpbGQgZmFpbGVkXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICAgICAgICBdLCBbXSksIG51bGwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChwbHVnaW5zICYmIHBsdWdpbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKHN0cmVhbUluLmlzU3luYykgcmV0dXJuIGhhbmRsZUVycm9yKG5ldyBFcnJvcihcIkNhbm5vdCB1c2UgcGx1Z2lucyBpbiBzeW5jaHJvbm91cyBBUEkgY2FsbHNcIiksIFwiXCIpO1xuICAgICAgICAgICAgaGFuZGxlUGx1Z2lucyhvcHRpb25zLCBwbHVnaW5zLCBrZXksIGRldGFpbHMpLnRoZW4oKHJlc3VsdCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5vaykge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcihyZXN1bHQuZXJyb3IsIHJlc3VsdC5wbHVnaW5OYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRPclNlcnZlQ29udGludWUoX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBhcmdzKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ1BsdWdpbkVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RQbHVnaW5zOiByZXN1bHQucmVxdWVzdFBsdWdpbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVuT25FbmRDYWxsYmFja3M6IHJlc3VsdC5ydW5PbkVuZENhbGxiYWNrcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5SZWZzOiByZXN1bHQucGx1Z2luUmVmc1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcihlLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIChlKT0+aGFuZGxlRXJyb3IoZSwgXCJcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGJ1aWxkT3JTZXJ2ZUNvbnRpbnVlKF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgICAgICAgICAgIH0sIGFyZ3MpLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgbG9nUGx1Z2luRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RQbHVnaW5zOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBydW5PbkVuZENhbGxiYWNrczogKHJlc3VsdCwgbG9nUGx1Z2luRXJyb3IyLCBkb25lKT0+ZG9uZSgpXG4gICAgICAgICAgICAgICAgICAgICxcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luUmVmczogbnVsbFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcihlLCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgbGV0IGJ1aWxkT3JTZXJ2ZUNvbnRpbnVlID0gKHsgY2FsbE5hbWUgLCByZWZzOiBjYWxsZXJSZWZzICwgc2VydmVPcHRpb25zICwgb3B0aW9ucyAsIGlzVFRZICwgZGVmYXVsdFdEICwgY2FsbGJhY2sgLCBrZXkgLCBkZXRhaWxzICwgbG9nUGx1Z2luRXJyb3IgLCByZXF1ZXN0UGx1Z2lucyAsIHJ1bk9uRW5kQ2FsbGJhY2tzICwgcGx1Z2luUmVmcyAgfSk9PntcbiAgICAgICAgY29uc3QgcmVmcyA9IHtcbiAgICAgICAgICAgIHJlZiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBsdWdpblJlZnMpIHBsdWdpblJlZnMucmVmKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxlclJlZnMpIGNhbGxlclJlZnMucmVmKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdW5yZWYgKCkge1xuICAgICAgICAgICAgICAgIGlmIChwbHVnaW5SZWZzKSBwbHVnaW5SZWZzLnVucmVmKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxlclJlZnMpIGNhbGxlclJlZnMudW5yZWYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHdyaXRlRGVmYXVsdCA9ICFzdHJlYW1Jbi5pc0Jyb3dzZXI7XG4gICAgICAgIGxldCB7IGVudHJpZXMgLCBmbGFncyAsIHdyaXRlICwgc3RkaW5Db250ZW50cyAsIHN0ZGluUmVzb2x2ZURpciAsIGFic1dvcmtpbmdEaXIgLCBpbmNyZW1lbnRhbCAsIG5vZGVQYXRocyAsIHdhdGNoICB9ID0gZmxhZ3NGb3JCdWlsZE9wdGlvbnMoY2FsbE5hbWUsIG9wdGlvbnMsIGlzVFRZLCBidWlsZExvZ0xldmVsRGVmYXVsdCwgd3JpdGVEZWZhdWx0KTtcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB7XG4gICAgICAgICAgICBjb21tYW5kOiBcImJ1aWxkXCIsXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBlbnRyaWVzLFxuICAgICAgICAgICAgZmxhZ3MsXG4gICAgICAgICAgICB3cml0ZSxcbiAgICAgICAgICAgIHN0ZGluQ29udGVudHMsXG4gICAgICAgICAgICBzdGRpblJlc29sdmVEaXIsXG4gICAgICAgICAgICBhYnNXb3JraW5nRGlyOiBhYnNXb3JraW5nRGlyIHx8IGRlZmF1bHRXRCxcbiAgICAgICAgICAgIGluY3JlbWVudGFsLFxuICAgICAgICAgICAgbm9kZVBhdGhzXG4gICAgICAgIH07XG4gICAgICAgIGlmIChyZXF1ZXN0UGx1Z2lucykgcmVxdWVzdC5wbHVnaW5zID0gcmVxdWVzdFBsdWdpbnM7XG4gICAgICAgIGxldCBzZXJ2ZTIgPSBzZXJ2ZU9wdGlvbnMgJiYgYnVpbGRTZXJ2ZURhdGEocmVmcywgc2VydmVPcHRpb25zLCByZXF1ZXN0KTtcbiAgICAgICAgbGV0IHJlYnVpbGQ7XG4gICAgICAgIGxldCBzdG9wO1xuICAgICAgICBsZXQgY29weVJlc3BvbnNlVG9SZXN1bHQgPSAocmVzcG9uc2UsIHJlc3VsdCk9PntcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vdXRwdXRGaWxlcykgcmVzdWx0Lm91dHB1dEZpbGVzID0gcmVzcG9uc2Uub3V0cHV0RmlsZXMubWFwKGNvbnZlcnRPdXRwdXRGaWxlcyk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UubWV0YWZpbGUpIHJlc3VsdC5tZXRhZmlsZSA9IEpTT04ucGFyc2UocmVzcG9uc2UubWV0YWZpbGUpO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLndyaXRlVG9TdGRvdXQgIT09IHZvaWQgMCkgY29uc29sZS5sb2coZGVjb2RlVVRGOChyZXNwb25zZS53cml0ZVRvU3Rkb3V0KS5yZXBsYWNlKC9cXG4kLywgXCJcIikpO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgYnVpbGRSZXNwb25zZVRvUmVzdWx0ID0gKHJlc3BvbnNlLCBjYWxsYmFjazIpPT57XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgIGVycm9yczogcmVwbGFjZURldGFpbHNJbk1lc3NhZ2VzKHJlc3BvbnNlLmVycm9ycywgZGV0YWlscyksXG4gICAgICAgICAgICAgICAgd2FybmluZ3M6IHJlcGxhY2VEZXRhaWxzSW5NZXNzYWdlcyhyZXNwb25zZS53YXJuaW5ncywgZGV0YWlscylcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb3B5UmVzcG9uc2VUb1Jlc3VsdChyZXNwb25zZSwgcmVzdWx0KTtcbiAgICAgICAgICAgIHJ1bk9uRW5kQ2FsbGJhY2tzKHJlc3VsdCwgbG9nUGx1Z2luRXJyb3IsICgpPT57XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5lcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2syKGZhaWx1cmVFcnJvcldpdGhMb2coXCJCdWlsZCBmYWlsZWRcIiwgcmVzdWx0LmVycm9ycywgcmVzdWx0Lndhcm5pbmdzKSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5yZWJ1aWxkSUQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlYnVpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWJ1aWxkID0gKCk9Pm5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0Rpc3Bvc2VkIHx8IGlzQ2xvc2VkKSB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgcmVidWlsZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFJlcXVlc3QocmVmcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogXCJyZWJ1aWxkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWJ1aWxkSUQ6IHJlc3BvbnNlLnJlYnVpbGRJRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAoZXJyb3IyLCByZXNwb25zZTIpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luTmFtZTogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZXJyb3IyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHZvaWQgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrMihmYWlsdXJlRXJyb3JXaXRoTG9nKFwiQnVpbGQgZmFpbGVkXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sIFtdKSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZFJlc3BvbnNlVG9SZXN1bHQocmVzcG9uc2UyLCAoZXJyb3IzLCByZXN1bHQzKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcjMpIHJlamVjdChlcnJvcjMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgcmVzb2x2ZShyZXN1bHQzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmcy5yZWYoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYnVpbGQuZGlzcG9zZSA9ICgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGlzcG9zZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kUmVxdWVzdChyZWZzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwicmVidWlsZC1kaXNwb3NlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYnVpbGRJRDogcmVzcG9uc2UucmVidWlsZElEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgKCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZzLnVucmVmKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWJ1aWxkID0gcmVidWlsZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLndhdGNoSUQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXN0b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnMucmVmKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9wID0gKCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTdG9wcGVkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXRjaENhbGxiYWNrcy5kZWxldGUocmVzcG9uc2Uud2F0Y2hJRCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFJlcXVlc3QocmVmcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiBcIndhdGNoLXN0b3BcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2F0Y2hJRDogcmVzcG9uc2Uud2F0Y2hJRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sICgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmcy51bnJlZigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoQ2FsbGJhY2tzLnNldChyZXNwb25zZS53YXRjaElELCAoc2VydmljZVN0b3BFcnJvciwgd2F0Y2hSZXNwb25zZSk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlcnZpY2VTdG9wRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXRjaC5vblJlYnVpbGQpIHdhdGNoLm9uUmVidWlsZChzZXJ2aWNlU3RvcEVycm9yLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0MiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yczogcmVwbGFjZURldGFpbHNJbk1lc3NhZ2VzKHdhdGNoUmVzcG9uc2UuZXJyb3JzLCBkZXRhaWxzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzOiByZXBsYWNlRGV0YWlsc0luTWVzc2FnZXMod2F0Y2hSZXNwb25zZS53YXJuaW5ncywgZGV0YWlscylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weVJlc3BvbnNlVG9SZXN1bHQod2F0Y2hSZXNwb25zZSwgcmVzdWx0Mik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bk9uRW5kQ2FsbGJhY2tzKHJlc3VsdDIsIGxvZ1BsdWdpbkVycm9yLCAoKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdDIuZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2F0Y2gub25SZWJ1aWxkKSB3YXRjaC5vblJlYnVpbGQoZmFpbHVyZUVycm9yV2l0aExvZyhcIkJ1aWxkIGZhaWxlZFwiLCByZXN1bHQyLmVycm9ycywgcmVzdWx0Mi53YXJuaW5ncyksIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXRjaFJlc3BvbnNlLnJlYnVpbGRJRCAhPT0gdm9pZCAwKSByZXN1bHQyLnJlYnVpbGQgPSByZWJ1aWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Mi5zdG9wID0gc3RvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXRjaC5vblJlYnVpbGQpIHdhdGNoLm9uUmVidWlsZChudWxsLCByZXN1bHQyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0b3AgPSBzdG9wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYWxsYmFjazIobnVsbCwgcmVzdWx0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBpZiAod3JpdGUgJiYgc3RyZWFtSW4uaXNCcm93c2VyKSB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBlbmFibGUgXCJ3cml0ZVwiIGluIHRoZSBicm93c2VyYCk7XG4gICAgICAgIGlmIChpbmNyZW1lbnRhbCAmJiBzdHJlYW1Jbi5pc1N5bmMpIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHVzZSBcImluY3JlbWVudGFsXCIgd2l0aCBhIHN5bmNocm9ub3VzIGJ1aWxkYCk7XG4gICAgICAgIGlmICh3YXRjaCAmJiBzdHJlYW1Jbi5pc1N5bmMpIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHVzZSBcIndhdGNoXCIgd2l0aCBhIHN5bmNocm9ub3VzIGJ1aWxkYCk7XG4gICAgICAgIHNlbmRSZXF1ZXN0KHJlZnMsIHJlcXVlc3QsIChlcnJvciwgcmVzcG9uc2UpPT57XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoZXJyb3IpLCBudWxsKTtcbiAgICAgICAgICAgIGlmIChzZXJ2ZTIpIHtcbiAgICAgICAgICAgICAgICBsZXQgc2VydmVSZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIGxldCBpc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZWZzLnJlZigpO1xuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcnQ6IHNlcnZlUmVzcG9uc2UucG9ydCxcbiAgICAgICAgICAgICAgICAgICAgaG9zdDogc2VydmVSZXNwb25zZS5ob3N0LFxuICAgICAgICAgICAgICAgICAgICB3YWl0OiBzZXJ2ZTIud2FpdCxcbiAgICAgICAgICAgICAgICAgICAgc3RvcCAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTdG9wcGVkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmUyLnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnMudW5yZWYoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmVmcy5yZWYoKTtcbiAgICAgICAgICAgICAgICBzZXJ2ZTIud2FpdC50aGVuKHJlZnMudW5yZWYsIHJlZnMudW5yZWYpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCByZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkUmVzcG9uc2VUb1Jlc3VsdChyZXNwb25zZSwgY2FsbGJhY2spO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGxldCB0cmFuc2Zvcm0yID0gKHsgY2FsbE5hbWUgLCByZWZzICwgaW5wdXQgLCBvcHRpb25zICwgaXNUVFkgLCBmcyAsIGNhbGxiYWNrICB9KT0+e1xuICAgICAgICBjb25zdCBkZXRhaWxzID0gY3JlYXRlT2JqZWN0U3Rhc2goKTtcbiAgICAgICAgbGV0IHN0YXJ0ID0gKGlucHV0UGF0aCk9PntcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gXCJzdHJpbmdcIikgdGhyb3cgbmV3IEVycm9yKCdUaGUgaW5wdXQgdG8gXCJ0cmFuc2Zvcm1cIiBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICAgICAgICAgICAgbGV0IGZsYWdzID0gZmxhZ3NGb3JUcmFuc2Zvcm1PcHRpb25zKGNhbGxOYW1lLCBvcHRpb25zLCBpc1RUWSwgdHJhbnNmb3JtTG9nTGV2ZWxEZWZhdWx0KTtcbiAgICAgICAgICAgICAgICBsZXQgcmVxdWVzdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogXCJ0cmFuc2Zvcm1cIixcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3MsXG4gICAgICAgICAgICAgICAgICAgIGlucHV0RlM6IGlucHV0UGF0aCAhPT0gbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGlucHV0UGF0aCAhPT0gbnVsbCA/IGlucHV0UGF0aCA6IGlucHV0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBzZW5kUmVxdWVzdChyZWZzLCByZXF1ZXN0LCAoZXJyb3IsIHJlc3BvbnNlKT0+e1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoZXJyb3IpLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9ycyA9IHJlcGxhY2VEZXRhaWxzSW5NZXNzYWdlcyhyZXNwb25zZS5lcnJvcnMsIGRldGFpbHMpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgd2FybmluZ3MgPSByZXBsYWNlRGV0YWlsc0luTWVzc2FnZXMocmVzcG9uc2Uud2FybmluZ3MsIGRldGFpbHMpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgb3V0c3RhbmRpbmcgPSAxO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dCA9ICgpPT4tLW91dHN0YW5kaW5nID09PSAwICYmIGNhbGxiYWNrKG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiByZXNwb25zZS5jb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcDogcmVzcG9uc2UubWFwXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkgcmV0dXJuIGNhbGxiYWNrKGZhaWx1cmVFcnJvcldpdGhMb2coXCJUcmFuc2Zvcm0gZmFpbGVkXCIsIGVycm9ycywgd2FybmluZ3MpLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGVGUykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0c3RhbmRpbmcrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGZzLnJlYWRGaWxlKHJlc3BvbnNlLmNvZGUsIChlcnIsIGNvbnRlbnRzKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5jb2RlID0gY29udGVudHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UubWFwRlMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHN0YW5kaW5nKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcy5yZWFkRmlsZShyZXNwb25zZS5tYXAsIChlcnIsIGNvbnRlbnRzKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5tYXAgPSBjb250ZW50cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgZmxhZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBwdXNoTG9nRmxhZ3MoZmxhZ3MsIG9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICAgICAgfSwgaXNUVFksIHRyYW5zZm9ybUxvZ0xldmVsRGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZTIpIHtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBleHRyYWN0RXJyb3JNZXNzYWdlVjgoZSwgc3RyZWFtSW4sIGRldGFpbHMsIHZvaWQgMCwgXCJcIik7XG4gICAgICAgICAgICAgICAgc2VuZFJlcXVlc3QocmVmcywge1xuICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiBcImVycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgIGZsYWdzLFxuICAgICAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgICAgIH0sICgpPT57XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmRldGFpbCA9IGRldGFpbHMubG9hZChlcnJvci5kZXRhaWwpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhmYWlsdXJlRXJyb3JXaXRoTG9nKFwiVHJhbnNmb3JtIGZhaWxlZFwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgICAgICAgICBdLCBbXSksIG51bGwpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiICYmIGlucHV0Lmxlbmd0aCA+IDEwMjQgKiAxMDI0KSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IHN0YXJ0O1xuICAgICAgICAgICAgc3RhcnQgPSAoKT0+ZnMud3JpdGVGaWxlKGlucHV0LCBuZXh0KVxuICAgICAgICAgICAgO1xuICAgICAgICB9XG4gICAgICAgIHN0YXJ0KG51bGwpO1xuICAgIH07XG4gICAgbGV0IGZvcm1hdE1lc3NhZ2VzMiA9ICh7IGNhbGxOYW1lICwgcmVmcyAsIG1lc3NhZ2VzICwgb3B0aW9ucyAsIGNhbGxiYWNrICB9KT0+e1xuICAgICAgICBsZXQgcmVzdWx0ID0gc2FuaXRpemVNZXNzYWdlcyhtZXNzYWdlcywgXCJtZXNzYWdlc1wiLCBudWxsLCBcIlwiKTtcbiAgICAgICAgaWYgKCFvcHRpb25zKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3Npbmcgc2Vjb25kIGFyZ3VtZW50IGluICR7Y2FsbE5hbWV9KCkgY2FsbGApO1xuICAgICAgICBsZXQga2V5cyA9IHtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGtpbmQgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwia2luZFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgICAgICBsZXQgY29sb3IgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwiY29sb3JcIiwgbXVzdEJlQm9vbGVhbik7XG4gICAgICAgIGxldCB0ZXJtaW5hbFdpZHRoID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInRlcm1pbmFsV2lkdGhcIiwgbXVzdEJlSW50ZWdlcik7XG4gICAgICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKG9wdGlvbnMsIGtleXMsIGBpbiAke2NhbGxOYW1lfSgpIGNhbGxgKTtcbiAgICAgICAgaWYgKGtpbmQgPT09IHZvaWQgMCkgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIFwia2luZFwiIGluICR7Y2FsbE5hbWV9KCkgY2FsbGApO1xuICAgICAgICBpZiAoa2luZCAhPT0gXCJlcnJvclwiICYmIGtpbmQgIT09IFwid2FybmluZ1wiKSB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIFwia2luZFwiIHRvIGJlIFwiZXJyb3JcIiBvciBcIndhcm5pbmdcIiBpbiAke2NhbGxOYW1lfSgpIGNhbGxgKTtcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB7XG4gICAgICAgICAgICBjb21tYW5kOiBcImZvcm1hdC1tc2dzXCIsXG4gICAgICAgICAgICBtZXNzYWdlczogcmVzdWx0LFxuICAgICAgICAgICAgaXNXYXJuaW5nOiBraW5kID09PSBcIndhcm5pbmdcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoY29sb3IgIT09IHZvaWQgMCkgcmVxdWVzdC5jb2xvciA9IGNvbG9yO1xuICAgICAgICBpZiAodGVybWluYWxXaWR0aCAhPT0gdm9pZCAwKSByZXF1ZXN0LnRlcm1pbmFsV2lkdGggPSB0ZXJtaW5hbFdpZHRoO1xuICAgICAgICBzZW5kUmVxdWVzdChyZWZzLCByZXF1ZXN0LCAoZXJyb3IsIHJlc3BvbnNlKT0+e1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKGVycm9yKSwgbnVsbCk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXNwb25zZS5tZXNzYWdlcyk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgbGV0IGFuYWx5emVNZXRhZmlsZTIgPSAoeyBjYWxsTmFtZSAsIHJlZnMgLCBtZXRhZmlsZSAsIG9wdGlvbnMgLCBjYWxsYmFjayAgfSk9PntcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgb3B0aW9ucyA9IHtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGtleXMgPSB7XG4gICAgICAgIH07XG4gICAgICAgIGxldCBjb2xvciA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJjb2xvclwiLCBtdXN0QmVCb29sZWFuKTtcbiAgICAgICAgbGV0IHZlcmJvc2UgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwidmVyYm9zZVwiLCBtdXN0QmVCb29sZWFuKTtcbiAgICAgICAgY2hlY2tGb3JJbnZhbGlkRmxhZ3Mob3B0aW9ucywga2V5cywgYGluICR7Y2FsbE5hbWV9KCkgY2FsbGApO1xuICAgICAgICBsZXQgcmVxdWVzdCA9IHtcbiAgICAgICAgICAgIGNvbW1hbmQ6IFwiYW5hbHl6ZS1tZXRhZmlsZVwiLFxuICAgICAgICAgICAgbWV0YWZpbGVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGNvbG9yICE9PSB2b2lkIDApIHJlcXVlc3QuY29sb3IgPSBjb2xvcjtcbiAgICAgICAgaWYgKHZlcmJvc2UgIT09IHZvaWQgMCkgcmVxdWVzdC52ZXJib3NlID0gdmVyYm9zZTtcbiAgICAgICAgc2VuZFJlcXVlc3QocmVmcywgcmVxdWVzdCwgKGVycm9yLCByZXNwb25zZSk9PntcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcihlcnJvciksIG51bGwpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzcG9uc2UucmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICByZWFkRnJvbVN0ZG91dCxcbiAgICAgICAgYWZ0ZXJDbG9zZSxcbiAgICAgICAgc2VydmljZToge1xuICAgICAgICAgICAgYnVpbGRPclNlcnZlLFxuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2Zvcm0yLFxuICAgICAgICAgICAgZm9ybWF0TWVzc2FnZXM6IGZvcm1hdE1lc3NhZ2VzMixcbiAgICAgICAgICAgIGFuYWx5emVNZXRhZmlsZTogYW5hbHl6ZU1ldGFmaWxlMlxuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZU9iamVjdFN0YXNoKCkge1xuICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoKTtcbiAgICBsZXQgbmV4dElEID0gMDtcbiAgICByZXR1cm4ge1xuICAgICAgICBsb2FkIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuIG1hcC5nZXQoaWQpO1xuICAgICAgICB9LFxuICAgICAgICBzdG9yZSAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBjb25zdCBpZCA9IG5leHRJRCsrO1xuICAgICAgICAgICAgbWFwLnNldChpZCwgdmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RDYWxsZXJWOChlLCBzdHJlYW1JbiwgaWRlbnQpIHtcbiAgICBsZXQgbm90ZTtcbiAgICBsZXQgdHJpZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gKCk9PntcbiAgICAgICAgaWYgKHRyaWVkKSByZXR1cm4gbm90ZTtcbiAgICAgICAgdHJpZWQgPSB0cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IGxpbmVzID0gKGUuc3RhY2sgKyBcIlwiKS5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgICAgIGxpbmVzLnNwbGljZSgxLCAxKTtcbiAgICAgICAgICAgIGxldCBsb2NhdGlvbiA9IHBhcnNlU3RhY2tMaW5lc1Y4KHN0cmVhbUluLCBsaW5lcywgaWRlbnQpO1xuICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgbm90ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvblxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUyKSB7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gZXh0cmFjdEVycm9yTWVzc2FnZVY4KGUsIHN0cmVhbUluLCBzdGFzaCwgbm90ZSwgcGx1Z2luTmFtZSkge1xuICAgIGxldCB0ZXh0ID0gXCJJbnRlcm5hbCBlcnJvclwiO1xuICAgIGxldCBsb2NhdGlvbiA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgICAgdGV4dCA9IChlICYmIGUubWVzc2FnZSB8fCBlKSArIFwiXCI7XG4gICAgfSBjYXRjaCAoZTIpIHtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgbG9jYXRpb24gPSBwYXJzZVN0YWNrTGluZXNWOChzdHJlYW1JbiwgKGUuc3RhY2sgKyBcIlwiKS5zcGxpdChcIlxcblwiKSwgXCJcIik7XG4gICAgfSBjYXRjaCAoZTIxKSB7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHBsdWdpbk5hbWUsXG4gICAgICAgIHRleHQsXG4gICAgICAgIGxvY2F0aW9uLFxuICAgICAgICBub3Rlczogbm90ZSA/IFtcbiAgICAgICAgICAgIG5vdGVcbiAgICAgICAgXSA6IFtdLFxuICAgICAgICBkZXRhaWw6IHN0YXNoID8gc3Rhc2guc3RvcmUoZSkgOiAtMVxuICAgIH07XG59XG5mdW5jdGlvbiBwYXJzZVN0YWNrTGluZXNWOChzdHJlYW1JbiwgbGluZXMsIGlkZW50KSB7XG4gICAgbGV0IGF0ID0gXCIgICAgYXQgXCI7XG4gICAgaWYgKHN0cmVhbUluLnJlYWRGaWxlU3luYyAmJiAhbGluZXNbMF0uc3RhcnRzV2l0aChhdCkgJiYgbGluZXNbMV0uc3RhcnRzV2l0aChhdCkpIHtcbiAgICAgICAgZm9yKGxldCBpID0gMTsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGxldCBsaW5lID0gbGluZXNbaV07XG4gICAgICAgICAgICBpZiAoIWxpbmUuc3RhcnRzV2l0aChhdCkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGluZSA9IGxpbmUuc2xpY2UoYXQubGVuZ3RoKTtcbiAgICAgICAgICAgIHdoaWxlKHRydWUpe1xuICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IC9eKD86bmV3IHxhc3luYyApP1xcUysgXFwoKC4qKVxcKSQvLmV4ZWMobGluZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmUgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1hdGNoID0gL15ldmFsIGF0IFxcUysgXFwoKC4qKVxcKSg/OiwgXFxTKzpcXGQrOlxcZCspPyQvLmV4ZWMobGluZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmUgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1hdGNoID0gL14oXFxTKyk6KFxcZCspOihcXGQrKSQvLmV4ZWMobGluZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb250ZW50cztcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzID0gc3RyZWFtSW4ucmVhZEZpbGVTeW5jKG1hdGNoWzFdLCBcInV0ZjhcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5lVGV4dCA9IGNvbnRlbnRzLnNwbGl0KC9cXHJcXG58XFxyfFxcbnxcXHUyMDI4fFxcdTIwMjkvKVsrbWF0Y2hbMl0gLSAxXSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY29sdW1uID0gK21hdGNoWzNdIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxlbmd0aCA9IGxpbmVUZXh0LnNsaWNlKGNvbHVtbiwgY29sdW1uICsgaWRlbnQubGVuZ3RoKSA9PT0gaWRlbnQgPyBpZGVudC5sZW5ndGggOiAwO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTogbWF0Y2hbMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IFwiZmlsZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZTogK21hdGNoWzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBlbmNvZGVVVEY4KGxpbmVUZXh0LnNsaWNlKDAsIGNvbHVtbikpLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aDogZW5jb2RlVVRGOChsaW5lVGV4dC5zbGljZShjb2x1bW4sIGNvbHVtbiArIGxlbmd0aCkpLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVUZXh0OiBsaW5lVGV4dCArIFwiXFxuXCIgKyBsaW5lcy5zbGljZSgxKS5qb2luKFwiXFxuXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbjogXCJcIlxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGZhaWx1cmVFcnJvcldpdGhMb2codGV4dCwgZXJyb3JzLCB3YXJuaW5ncykge1xuICAgIGxldCBsaW1pdCA9IDU7XG4gICAgbGV0IHN1bW1hcnkgPSBlcnJvcnMubGVuZ3RoIDwgMSA/IFwiXCIgOiBgIHdpdGggJHtlcnJvcnMubGVuZ3RofSBlcnJvciR7ZXJyb3JzLmxlbmd0aCA8IDIgPyBcIlwiIDogXCJzXCJ9OmAgKyBlcnJvcnMuc2xpY2UoMCwgbGltaXQgKyAxKS5tYXAoKGUsIGkpPT57XG4gICAgICAgIGlmIChpID09PSBsaW1pdCkgcmV0dXJuIFwiXFxuLi4uXCI7XG4gICAgICAgIGlmICghZS5sb2NhdGlvbikgcmV0dXJuIGBcbmVycm9yOiAke2UudGV4dH1gO1xuICAgICAgICBsZXQgeyBmaWxlICwgbGluZSAsIGNvbHVtbiAgfSA9IGUubG9jYXRpb247XG4gICAgICAgIGxldCBwbHVnaW5UZXh0ID0gZS5wbHVnaW5OYW1lID8gYFtwbHVnaW46ICR7ZS5wbHVnaW5OYW1lfV0gYCA6IFwiXCI7XG4gICAgICAgIHJldHVybiBgXG4ke2ZpbGV9OiR7bGluZX06JHtjb2x1bW59OiBlcnJvcjogJHtwbHVnaW5UZXh0fSR7ZS50ZXh0fWA7XG4gICAgfSkuam9pbihcIlwiKTtcbiAgICBsZXQgZXJyb3IgPSBuZXcgRXJyb3IoYCR7dGV4dH0ke3N1bW1hcnl9YCk7XG4gICAgZXJyb3IuZXJyb3JzID0gZXJyb3JzO1xuICAgIGVycm9yLndhcm5pbmdzID0gd2FybmluZ3M7XG4gICAgcmV0dXJuIGVycm9yO1xufVxuZnVuY3Rpb24gcmVwbGFjZURldGFpbHNJbk1lc3NhZ2VzKG1lc3NhZ2VzLCBzdGFzaCkge1xuICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBtZXNzYWdlcyl7XG4gICAgICAgIG1lc3NhZ2UuZGV0YWlsID0gc3Rhc2gubG9hZChtZXNzYWdlLmRldGFpbCk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlcztcbn1cbmZ1bmN0aW9uIHNhbml0aXplTG9jYXRpb24obG9jYXRpb24sIHdoZXJlKSB7XG4gICAgaWYgKGxvY2F0aW9uID09IG51bGwpIHJldHVybiBudWxsO1xuICAgIGxldCBrZXlzID0ge1xuICAgIH07XG4gICAgbGV0IGZpbGUgPSBnZXRGbGFnKGxvY2F0aW9uLCBrZXlzLCBcImZpbGVcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgbmFtZXNwYWNlID0gZ2V0RmxhZyhsb2NhdGlvbiwga2V5cywgXCJuYW1lc3BhY2VcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgbGluZSA9IGdldEZsYWcobG9jYXRpb24sIGtleXMsIFwibGluZVwiLCBtdXN0QmVJbnRlZ2VyKTtcbiAgICBsZXQgY29sdW1uID0gZ2V0RmxhZyhsb2NhdGlvbiwga2V5cywgXCJjb2x1bW5cIiwgbXVzdEJlSW50ZWdlcik7XG4gICAgbGV0IGxlbmd0aCA9IGdldEZsYWcobG9jYXRpb24sIGtleXMsIFwibGVuZ3RoXCIsIG11c3RCZUludGVnZXIpO1xuICAgIGxldCBsaW5lVGV4dCA9IGdldEZsYWcobG9jYXRpb24sIGtleXMsIFwibGluZVRleHRcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgc3VnZ2VzdGlvbiA9IGdldEZsYWcobG9jYXRpb24sIGtleXMsIFwic3VnZ2VzdGlvblwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKGxvY2F0aW9uLCBrZXlzLCB3aGVyZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZmlsZTogZmlsZSB8fCBcIlwiLFxuICAgICAgICBuYW1lc3BhY2U6IG5hbWVzcGFjZSB8fCBcIlwiLFxuICAgICAgICBsaW5lOiBsaW5lIHx8IDAsXG4gICAgICAgIGNvbHVtbjogY29sdW1uIHx8IDAsXG4gICAgICAgIGxlbmd0aDogbGVuZ3RoIHx8IDAsXG4gICAgICAgIGxpbmVUZXh0OiBsaW5lVGV4dCB8fCBcIlwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBzdWdnZXN0aW9uIHx8IFwiXCJcbiAgICB9O1xufVxuZnVuY3Rpb24gc2FuaXRpemVNZXNzYWdlcyhtZXNzYWdlcywgcHJvcGVydHksIHN0YXNoLCBmYWxsYmFja1BsdWdpbk5hbWUpIHtcbiAgICBsZXQgbWVzc2FnZXNDbG9uZSA9IFtdO1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzKXtcbiAgICAgICAgbGV0IGtleXMgPSB7XG4gICAgICAgIH07XG4gICAgICAgIGxldCBwbHVnaW5OYW1lID0gZ2V0RmxhZyhtZXNzYWdlLCBrZXlzLCBcInBsdWdpbk5hbWVcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgbGV0IHRleHQgPSBnZXRGbGFnKG1lc3NhZ2UsIGtleXMsIFwidGV4dFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgICAgICBsZXQgbG9jYXRpb24gPSBnZXRGbGFnKG1lc3NhZ2UsIGtleXMsIFwibG9jYXRpb25cIiwgbXVzdEJlT2JqZWN0T3JOdWxsKTtcbiAgICAgICAgbGV0IG5vdGVzID0gZ2V0RmxhZyhtZXNzYWdlLCBrZXlzLCBcIm5vdGVzXCIsIG11c3RCZUFycmF5KTtcbiAgICAgICAgbGV0IGRldGFpbCA9IGdldEZsYWcobWVzc2FnZSwga2V5cywgXCJkZXRhaWxcIiwgY2FuQmVBbnl0aGluZyk7XG4gICAgICAgIGxldCB3aGVyZSA9IGBpbiBlbGVtZW50ICR7aW5kZXh9IG9mIFwiJHtwcm9wZXJ0eX1cImA7XG4gICAgICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKG1lc3NhZ2UsIGtleXMsIHdoZXJlKTtcbiAgICAgICAgbGV0IG5vdGVzQ2xvbmUgPSBbXTtcbiAgICAgICAgaWYgKG5vdGVzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5vdGUgb2Ygbm90ZXMpe1xuICAgICAgICAgICAgICAgIGxldCBub3RlS2V5cyA9IHtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGxldCBub3RlVGV4dCA9IGdldEZsYWcobm90ZSwgbm90ZUtleXMsIFwidGV4dFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgICAgICAgICAgICAgIGxldCBub3RlTG9jYXRpb24gPSBnZXRGbGFnKG5vdGUsIG5vdGVLZXlzLCBcImxvY2F0aW9uXCIsIG11c3RCZU9iamVjdE9yTnVsbCk7XG4gICAgICAgICAgICAgICAgY2hlY2tGb3JJbnZhbGlkRmxhZ3Mobm90ZSwgbm90ZUtleXMsIHdoZXJlKTtcbiAgICAgICAgICAgICAgICBub3Rlc0Nsb25lLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBub3RlVGV4dCB8fCBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogc2FuaXRpemVMb2NhdGlvbihub3RlTG9jYXRpb24sIHdoZXJlKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2VzQ2xvbmUucHVzaCh7XG4gICAgICAgICAgICBwbHVnaW5OYW1lOiBwbHVnaW5OYW1lIHx8IGZhbGxiYWNrUGx1Z2luTmFtZSxcbiAgICAgICAgICAgIHRleHQ6IHRleHQgfHwgXCJcIixcbiAgICAgICAgICAgIGxvY2F0aW9uOiBzYW5pdGl6ZUxvY2F0aW9uKGxvY2F0aW9uLCB3aGVyZSksXG4gICAgICAgICAgICBub3Rlczogbm90ZXNDbG9uZSxcbiAgICAgICAgICAgIGRldGFpbDogc3Rhc2ggPyBzdGFzaC5zdG9yZShkZXRhaWwpIDogLTFcbiAgICAgICAgfSk7XG4gICAgICAgIGluZGV4Kys7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlc0Nsb25lO1xufVxuZnVuY3Rpb24gc2FuaXRpemVTdHJpbmdBcnJheSh2YWx1ZXMsIHByb3BlcnR5KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpe1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInN0cmluZ1wiKSB0aHJvdyBuZXcgRXJyb3IoYCR7SlNPTi5zdHJpbmdpZnkocHJvcGVydHkpfSBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ3NgKTtcbiAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY29udmVydE91dHB1dEZpbGVzKHsgcGF0aCAsIGNvbnRlbnRzICB9KSB7XG4gICAgbGV0IHRleHQgPSBudWxsO1xuICAgIHJldHVybiB7XG4gICAgICAgIHBhdGgsXG4gICAgICAgIGNvbnRlbnRzLFxuICAgICAgICBnZXQgdGV4dCAoKSB7XG4gICAgICAgICAgICBpZiAodGV4dCA9PT0gbnVsbCkgdGV4dCA9IGRlY29kZVVURjgoY29udGVudHMpO1xuICAgICAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgICAgIH1cbiAgICB9O1xufVxudmFyIGJ1aWxkID0gKG9wdGlvbnMpPT5lbnN1cmVTZXJ2aWNlSXNSdW5uaW5nKCkuYnVpbGQob3B0aW9ucylcbjtcbnZhciBpbml0aWFsaXplUHJvbWlzZTtcbnZhciBsb25nTGl2ZWRTZXJ2aWNlO1xudmFyIGVuc3VyZVNlcnZpY2VJc1J1bm5pbmcgPSAoKT0+e1xuICAgIGlmIChsb25nTGl2ZWRTZXJ2aWNlKSByZXR1cm4gbG9uZ0xpdmVkU2VydmljZTtcbiAgICBpZiAoaW5pdGlhbGl6ZVByb21pc2UpIHRocm93IG5ldyBFcnJvcignWW91IG5lZWQgdG8gd2FpdCBmb3IgdGhlIHByb21pc2UgcmV0dXJuZWQgZnJvbSBcImluaXRpYWxpemVcIiB0byBiZSByZXNvbHZlZCBiZWZvcmUgY2FsbGluZyB0aGlzJyk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbmVlZCB0byBjYWxsIFwiaW5pdGlhbGl6ZVwiIGJlZm9yZSBjYWxsaW5nIHRoaXMnKTtcbn07XG52YXIgaW5pdGlhbGl6ZSA9IChvcHRpb25zKT0+e1xuICAgIG9wdGlvbnMgPSB2YWxpZGF0ZUluaXRpYWxpemVPcHRpb25zKG9wdGlvbnMgfHwge1xuICAgIH0pO1xuICAgIGxldCB3YXNtVVJMID0gb3B0aW9ucy53YXNtVVJMO1xuICAgIGxldCB1c2VXb3JrZXIgPSBvcHRpb25zLndvcmtlciAhPT0gZmFsc2U7XG4gICAgaWYgKCF3YXNtVVJMKSB0aHJvdyBuZXcgRXJyb3IoJ011c3QgcHJvdmlkZSB0aGUgXCJ3YXNtVVJMXCIgb3B0aW9uJyk7XG4gICAgd2FzbVVSTCArPSBcIlwiO1xuICAgIGlmIChpbml0aWFsaXplUHJvbWlzZSkgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgY2FsbCBcImluaXRpYWxpemVcIiBtb3JlIHRoYW4gb25jZScpO1xuICAgIGluaXRpYWxpemVQcm9taXNlID0gc3RhcnRSdW5uaW5nU2VydmljZSh3YXNtVVJMLCB1c2VXb3JrZXIpO1xuICAgIGluaXRpYWxpemVQcm9taXNlLmNhdGNoKCgpPT57XG4gICAgICAgIGluaXRpYWxpemVQcm9taXNlID0gdm9pZCAwO1xuICAgIH0pO1xuICAgIHJldHVybiBpbml0aWFsaXplUHJvbWlzZTtcbn07XG52YXIgc3RhcnRSdW5uaW5nU2VydmljZSA9IGFzeW5jICh3YXNtVVJMLCB1c2VXb3JrZXIpPT57XG4gICAgbGV0IHJlcyA9IGF3YWl0IGZldGNoKHdhc21VUkwpO1xuICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBkb3dubG9hZCAke0pTT04uc3RyaW5naWZ5KHdhc21VUkwpfWApO1xuICAgIGxldCB3YXNtID0gYXdhaXQgcmVzLmFycmF5QnVmZmVyKCk7XG4gICAgbGV0IGNvZGUgPSBge2xldCBnbG9iYWw9e307Zm9yKGxldCBvPXNlbGY7bztvPU9iamVjdC5nZXRQcm90b3R5cGVPZihvKSlmb3IobGV0IGsgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobykpaWYoIShrIGluIGdsb2JhbCkpT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCxrLHtnZXQ6KCk9PnNlbGZba119KTsvLyBDb3B5cmlnaHQgMjAxOCBUaGUgR28gQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlXG4vLyBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUuXG5cbigoKSA9PiB7XG5cdC8vIE1hcCBtdWx0aXBsZSBKYXZhU2NyaXB0IGVudmlyb25tZW50cyB0byBhIHNpbmdsZSBjb21tb24gQVBJLFxuXHQvLyBwcmVmZXJyaW5nIHdlYiBzdGFuZGFyZHMgb3ZlciBOb2RlLmpzIEFQSS5cblx0Ly9cblx0Ly8gRW52aXJvbm1lbnRzIGNvbnNpZGVyZWQ6XG5cdC8vIC0gQnJvd3NlcnNcblx0Ly8gLSBOb2RlLmpzXG5cdC8vIC0gRWxlY3Ryb25cblx0Ly8gLSBQYXJjZWxcblx0Ly8gLSBXZWJwYWNrXG5cblx0aWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHQvLyBnbG9iYWwgYWxyZWFkeSBleGlzdHNcblx0fSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0d2luZG93Lmdsb2JhbCA9IHdpbmRvdztcblx0fSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdHNlbGYuZ2xvYmFsID0gc2VsZjtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJjYW5ub3QgZXhwb3J0IEdvIChuZWl0aGVyIGdsb2JhbCwgd2luZG93IG5vciBzZWxmIGlzIGRlZmluZWQpXCIpO1xuXHR9XG5cblx0aWYgKCFnbG9iYWwucmVxdWlyZSAmJiB0eXBlb2YgcmVxdWlyZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdGdsb2JhbC5yZXF1aXJlID0gcmVxdWlyZTtcblx0fVxuXG5cdGlmICghZ2xvYmFsLmZzICYmIGdsb2JhbC5yZXF1aXJlKSB7XG5cdFx0Y29uc3QgZnMgPSByZXF1aXJlKFwiZnNcIik7XG5cdFx0aWYgKHR5cGVvZiBmcyA9PT0gXCJvYmplY3RcIiAmJiBmcyAhPT0gbnVsbCAmJiBPYmplY3Qua2V5cyhmcykubGVuZ3RoICE9PSAwKSB7XG5cdFx0XHRcbiAgICBnbG9iYWwuZnMgPSBPYmplY3QuYXNzaWduKHt9LCBmcywge1xuICAgICAgLy8gSGFjayBhcm91bmQgYSBVbmljb2RlIGJ1ZyBpbiBub2RlOiBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvaXNzdWVzLzI0NTUwXG4gICAgICB3cml0ZShmZCwgYnVmLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChvZmZzZXQgPT09IDAgJiYgbGVuZ3RoID09PSBidWYubGVuZ3RoICYmIHBvc2l0aW9uID09PSBudWxsKSB7XG4gICAgICAgICAgaWYgKGZkID09PSBwcm9jZXNzLnN0ZG91dC5mZCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcHJvY2Vzcy5zdGRvdXQud3JpdGUoYnVmLCBlcnIgPT4gZXJyID8gY2FsbGJhY2soZXJyLCAwLCBudWxsKSA6IGNhbGxiYWNrKG51bGwsIGxlbmd0aCwgYnVmKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soZXJyLCAwLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGZkID09PSBwcm9jZXNzLnN0ZGVyci5mZCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcHJvY2Vzcy5zdGRlcnIud3JpdGUoYnVmLCBlcnIgPT4gZXJyID8gY2FsbGJhY2soZXJyLCAwLCBudWxsKSA6IGNhbGxiYWNrKG51bGwsIGxlbmd0aCwgYnVmKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soZXJyLCAwLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnMud3JpdGUoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgsIHBvc2l0aW9uLCBjYWxsYmFjayk7XG4gICAgICB9LFxuICAgIH0pO1xuICBcblx0XHR9XG5cdH1cblxuXHRjb25zdCBlbm9zeXMgPSAoKSA9PiB7XG5cdFx0Y29uc3QgZXJyID0gbmV3IEVycm9yKFwibm90IGltcGxlbWVudGVkXCIpO1xuXHRcdGVyci5jb2RlID0gXCJFTk9TWVNcIjtcblx0XHRyZXR1cm4gZXJyO1xuXHR9O1xuXG5cdGlmICghZ2xvYmFsLmZzKSB7XG5cdFx0bGV0IG91dHB1dEJ1ZiA9IFwiXCI7XG5cdFx0Z2xvYmFsLmZzID0ge1xuXHRcdFx0Y29uc3RhbnRzOiB7IE9fV1JPTkxZOiAtMSwgT19SRFdSOiAtMSwgT19DUkVBVDogLTEsIE9fVFJVTkM6IC0xLCBPX0FQUEVORDogLTEsIE9fRVhDTDogLTEgfSwgLy8gdW51c2VkXG5cdFx0XHR3cml0ZVN5bmMoZmQsIGJ1Zikge1xuXHRcdFx0XHRvdXRwdXRCdWYgKz0gZGVjb2Rlci5kZWNvZGUoYnVmKTtcblx0XHRcdFx0Y29uc3QgbmwgPSBvdXRwdXRCdWYubGFzdEluZGV4T2YoXCJcXFxcblwiKTtcblx0XHRcdFx0aWYgKG5sICE9IC0xKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2cob3V0cHV0QnVmLnN1YnN0cigwLCBubCkpO1xuXHRcdFx0XHRcdG91dHB1dEJ1ZiA9IG91dHB1dEJ1Zi5zdWJzdHIobmwgKyAxKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gYnVmLmxlbmd0aDtcblx0XHRcdH0sXG5cdFx0XHR3cml0ZShmZCwgYnVmLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24sIGNhbGxiYWNrKSB7XG5cdFx0XHRcdGlmIChvZmZzZXQgIT09IDAgfHwgbGVuZ3RoICE9PSBidWYubGVuZ3RoIHx8IHBvc2l0aW9uICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soZW5vc3lzKCkpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCBuID0gdGhpcy53cml0ZVN5bmMoZmQsIGJ1Zik7XG5cdFx0XHRcdGNhbGxiYWNrKG51bGwsIG4pO1xuXHRcdFx0fSxcblx0XHRcdGNobW9kKHBhdGgsIG1vZGUsIGNhbGxiYWNrKSB7IGNhbGxiYWNrKGVub3N5cygpKTsgfSxcblx0XHRcdGNob3duKHBhdGgsIHVpZCwgZ2lkLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRjbG9zZShmZCwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0ZmNobW9kKGZkLCBtb2RlLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRmY2hvd24oZmQsIHVpZCwgZ2lkLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRmc3RhdChmZCwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0ZnN5bmMoZmQsIGNhbGxiYWNrKSB7IGNhbGxiYWNrKG51bGwpOyB9LFxuXHRcdFx0ZnRydW5jYXRlKGZkLCBsZW5ndGgsIGNhbGxiYWNrKSB7IGNhbGxiYWNrKGVub3N5cygpKTsgfSxcblx0XHRcdGxjaG93bihwYXRoLCB1aWQsIGdpZCwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0bGluayhwYXRoLCBsaW5rLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRsc3RhdChwYXRoLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRta2RpcihwYXRoLCBwZXJtLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRvcGVuKHBhdGgsIGZsYWdzLCBtb2RlLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRyZWFkKGZkLCBidWZmZXIsIG9mZnNldCwgbGVuZ3RoLCBwb3NpdGlvbiwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0cmVhZGRpcihwYXRoLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRyZWFkbGluayhwYXRoLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRyZW5hbWUoZnJvbSwgdG8sIGNhbGxiYWNrKSB7IGNhbGxiYWNrKGVub3N5cygpKTsgfSxcblx0XHRcdHJtZGlyKHBhdGgsIGNhbGxiYWNrKSB7IGNhbGxiYWNrKGVub3N5cygpKTsgfSxcblx0XHRcdHN0YXQocGF0aCwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0c3ltbGluayhwYXRoLCBsaW5rLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHR0cnVuY2F0ZShwYXRoLCBsZW5ndGgsIGNhbGxiYWNrKSB7IGNhbGxiYWNrKGVub3N5cygpKTsgfSxcblx0XHRcdHVubGluayhwYXRoLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHR1dGltZXMocGF0aCwgYXRpbWUsIG10aW1lLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0fTtcblx0fVxuXG5cdGlmICghZ2xvYmFsLnByb2Nlc3MpIHtcblx0XHRnbG9iYWwucHJvY2VzcyA9IHtcblx0XHRcdGdldHVpZCgpIHsgcmV0dXJuIC0xOyB9LFxuXHRcdFx0Z2V0Z2lkKCkgeyByZXR1cm4gLTE7IH0sXG5cdFx0XHRnZXRldWlkKCkgeyByZXR1cm4gLTE7IH0sXG5cdFx0XHRnZXRlZ2lkKCkgeyByZXR1cm4gLTE7IH0sXG5cdFx0XHRnZXRncm91cHMoKSB7IHRocm93IGVub3N5cygpOyB9LFxuXHRcdFx0cGlkOiAtMSxcblx0XHRcdHBwaWQ6IC0xLFxuXHRcdFx0dW1hc2soKSB7IHRocm93IGVub3N5cygpOyB9LFxuXHRcdFx0Y3dkKCkgeyB0aHJvdyBlbm9zeXMoKTsgfSxcblx0XHRcdGNoZGlyKCkgeyB0aHJvdyBlbm9zeXMoKTsgfSxcblx0XHR9XG5cdH1cblxuXHRpZiAoIWdsb2JhbC5jcnlwdG8gJiYgZ2xvYmFsLnJlcXVpcmUpIHtcblx0XHRjb25zdCBub2RlQ3J5cHRvID0gcmVxdWlyZShcImNyeXB0b1wiKTtcblx0XHRnbG9iYWwuY3J5cHRvID0ge1xuXHRcdFx0Z2V0UmFuZG9tVmFsdWVzKGIpIHtcblx0XHRcdFx0bm9kZUNyeXB0by5yYW5kb21GaWxsU3luYyhiKTtcblx0XHRcdH0sXG5cdFx0fTtcblx0fVxuXHRpZiAoIWdsb2JhbC5jcnlwdG8pIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJnbG9iYWwuY3J5cHRvIGlzIG5vdCBhdmFpbGFibGUsIHBvbHlmaWxsIHJlcXVpcmVkIChnZXRSYW5kb21WYWx1ZXMgb25seSlcIik7XG5cdH1cblxuXHRpZiAoIWdsb2JhbC5wZXJmb3JtYW5jZSkge1xuXHRcdGdsb2JhbC5wZXJmb3JtYW5jZSA9IHtcblx0XHRcdG5vdygpIHtcblx0XHRcdFx0Y29uc3QgW3NlYywgbnNlY10gPSBwcm9jZXNzLmhydGltZSgpO1xuXHRcdFx0XHRyZXR1cm4gc2VjICogMTAwMCArIG5zZWMgLyAxMDAwMDAwO1xuXHRcdFx0fSxcblx0XHR9O1xuXHR9XG5cblx0aWYgKCFnbG9iYWwuVGV4dEVuY29kZXIgJiYgZ2xvYmFsLnJlcXVpcmUpIHtcblx0XHRnbG9iYWwuVGV4dEVuY29kZXIgPSByZXF1aXJlKFwidXRpbFwiKS5UZXh0RW5jb2Rlcjtcblx0fVxuXHRpZiAoIWdsb2JhbC5UZXh0RW5jb2Rlcikge1xuXHRcdHRocm93IG5ldyBFcnJvcihcImdsb2JhbC5UZXh0RW5jb2RlciBpcyBub3QgYXZhaWxhYmxlLCBwb2x5ZmlsbCByZXF1aXJlZFwiKTtcblx0fVxuXG5cdGlmICghZ2xvYmFsLlRleHREZWNvZGVyICYmIGdsb2JhbC5yZXF1aXJlKSB7XG5cdFx0Z2xvYmFsLlRleHREZWNvZGVyID0gcmVxdWlyZShcInV0aWxcIikuVGV4dERlY29kZXI7XG5cdH1cblx0aWYgKCFnbG9iYWwuVGV4dERlY29kZXIpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJnbG9iYWwuVGV4dERlY29kZXIgaXMgbm90IGF2YWlsYWJsZSwgcG9seWZpbGwgcmVxdWlyZWRcIik7XG5cdH1cblxuXHQvLyBFbmQgb2YgcG9seWZpbGxzIGZvciBjb21tb24gQVBJLlxuXG5cdGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoXCJ1dGYtOFwiKTtcblx0Y29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpO1xuXG5cdGdsb2JhbC5HbyA9IGNsYXNzIHtcblx0XHRjb25zdHJ1Y3RvcigpIHtcblx0XHRcdHRoaXMuYXJndiA9IFtcImpzXCJdO1xuXHRcdFx0dGhpcy5lbnYgPSB7fTtcblx0XHRcdHRoaXMuZXhpdCA9IChjb2RlKSA9PiB7XG5cdFx0XHRcdGlmIChjb2RlICE9PSAwKSB7XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKFwiZXhpdCBjb2RlOlwiLCBjb2RlKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdHRoaXMuX2V4aXRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdFx0dGhpcy5fcmVzb2x2ZUV4aXRQcm9taXNlID0gcmVzb2x2ZTtcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5fcGVuZGluZ0V2ZW50ID0gbnVsbDtcblx0XHRcdHRoaXMuX3NjaGVkdWxlZFRpbWVvdXRzID0gbmV3IE1hcCgpO1xuXHRcdFx0dGhpcy5fbmV4dENhbGxiYWNrVGltZW91dElEID0gMTtcblxuXHRcdFx0Y29uc3Qgc2V0SW50NjQgPSAoYWRkciwgdikgPT4ge1xuXHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50MzIoYWRkciArIDAsIHYsIHRydWUpO1xuXHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50MzIoYWRkciArIDQsIE1hdGguZmxvb3IodiAvIDQyOTQ5NjcyOTYpLCB0cnVlKTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgZ2V0SW50NjQgPSAoYWRkcikgPT4ge1xuXHRcdFx0XHRjb25zdCBsb3cgPSB0aGlzLm1lbS5nZXRVaW50MzIoYWRkciArIDAsIHRydWUpO1xuXHRcdFx0XHRjb25zdCBoaWdoID0gdGhpcy5tZW0uZ2V0SW50MzIoYWRkciArIDQsIHRydWUpO1xuXHRcdFx0XHRyZXR1cm4gbG93ICsgaGlnaCAqIDQyOTQ5NjcyOTY7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGxvYWRWYWx1ZSA9IChhZGRyKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGYgPSB0aGlzLm1lbS5nZXRGbG9hdDY0KGFkZHIsIHRydWUpO1xuXHRcdFx0XHRpZiAoZiA9PT0gMCkge1xuXHRcdFx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCFpc05hTihmKSkge1xuXHRcdFx0XHRcdHJldHVybiBmO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgaWQgPSB0aGlzLm1lbS5nZXRVaW50MzIoYWRkciwgdHJ1ZSk7XG5cdFx0XHRcdHJldHVybiB0aGlzLl92YWx1ZXNbaWRdO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzdG9yZVZhbHVlID0gKGFkZHIsIHYpID0+IHtcblx0XHRcdFx0Y29uc3QgbmFuSGVhZCA9IDB4N0ZGODAwMDA7XG5cblx0XHRcdFx0aWYgKHR5cGVvZiB2ID09PSBcIm51bWJlclwiICYmIHYgIT09IDApIHtcblx0XHRcdFx0XHRpZiAoaXNOYU4odikpIHtcblx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQzMihhZGRyICsgNCwgbmFuSGVhZCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50MzIoYWRkciwgMCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRoaXMubWVtLnNldEZsb2F0NjQoYWRkciwgdiwgdHJ1ZSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHYgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHRoaXMubWVtLnNldEZsb2F0NjQoYWRkciwgMCwgdHJ1ZSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0bGV0IGlkID0gdGhpcy5faWRzLmdldCh2KTtcblx0XHRcdFx0aWYgKGlkID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRpZCA9IHRoaXMuX2lkUG9vbC5wb3AoKTtcblx0XHRcdFx0XHRpZiAoaWQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0aWQgPSB0aGlzLl92YWx1ZXMubGVuZ3RoO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLl92YWx1ZXNbaWRdID0gdjtcblx0XHRcdFx0XHR0aGlzLl9nb1JlZkNvdW50c1tpZF0gPSAwO1xuXHRcdFx0XHRcdHRoaXMuX2lkcy5zZXQodiwgaWQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuX2dvUmVmQ291bnRzW2lkXSsrO1xuXHRcdFx0XHRsZXQgdHlwZUZsYWcgPSAwO1xuXHRcdFx0XHRzd2l0Y2ggKHR5cGVvZiB2KSB7XG5cdFx0XHRcdFx0Y2FzZSBcIm9iamVjdFwiOlxuXHRcdFx0XHRcdFx0aWYgKHYgIT09IG51bGwpIHtcblx0XHRcdFx0XHRcdFx0dHlwZUZsYWcgPSAxO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInN0cmluZ1wiOlxuXHRcdFx0XHRcdFx0dHlwZUZsYWcgPSAyO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInN5bWJvbFwiOlxuXHRcdFx0XHRcdFx0dHlwZUZsYWcgPSAzO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcImZ1bmN0aW9uXCI6XG5cdFx0XHRcdFx0XHR0eXBlRmxhZyA9IDQ7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50MzIoYWRkciArIDQsIG5hbkhlYWQgfCB0eXBlRmxhZywgdHJ1ZSk7XG5cdFx0XHRcdHRoaXMubWVtLnNldFVpbnQzMihhZGRyLCBpZCwgdHJ1ZSk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGxvYWRTbGljZSA9IChhZGRyKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGFycmF5ID0gZ2V0SW50NjQoYWRkciArIDApO1xuXHRcdFx0XHRjb25zdCBsZW4gPSBnZXRJbnQ2NChhZGRyICsgOCk7XG5cdFx0XHRcdHJldHVybiBuZXcgVWludDhBcnJheSh0aGlzLl9pbnN0LmV4cG9ydHMubWVtLmJ1ZmZlciwgYXJyYXksIGxlbik7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGxvYWRTbGljZU9mVmFsdWVzID0gKGFkZHIpID0+IHtcblx0XHRcdFx0Y29uc3QgYXJyYXkgPSBnZXRJbnQ2NChhZGRyICsgMCk7XG5cdFx0XHRcdGNvbnN0IGxlbiA9IGdldEludDY0KGFkZHIgKyA4KTtcblx0XHRcdFx0Y29uc3QgYSA9IG5ldyBBcnJheShsZW4pO1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRcdFx0YVtpXSA9IGxvYWRWYWx1ZShhcnJheSArIGkgKiA4KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gYTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgbG9hZFN0cmluZyA9IChhZGRyKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNhZGRyID0gZ2V0SW50NjQoYWRkciArIDApO1xuXHRcdFx0XHRjb25zdCBsZW4gPSBnZXRJbnQ2NChhZGRyICsgOCk7XG5cdFx0XHRcdHJldHVybiBkZWNvZGVyLmRlY29kZShuZXcgRGF0YVZpZXcodGhpcy5faW5zdC5leHBvcnRzLm1lbS5idWZmZXIsIHNhZGRyLCBsZW4pKTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgdGltZU9yaWdpbiA9IERhdGUubm93KCkgLSBwZXJmb3JtYW5jZS5ub3coKTtcblx0XHRcdHRoaXMuaW1wb3J0T2JqZWN0ID0ge1xuXHRcdFx0XHRnbzoge1xuXHRcdFx0XHRcdC8vIEdvJ3MgU1AgZG9lcyBub3QgY2hhbmdlIGFzIGxvbmcgYXMgbm8gR28gY29kZSBpcyBydW5uaW5nLiBTb21lIG9wZXJhdGlvbnMgKGUuZy4gY2FsbHMsIGdldHRlcnMgYW5kIHNldHRlcnMpXG5cdFx0XHRcdFx0Ly8gbWF5IHN5bmNocm9ub3VzbHkgdHJpZ2dlciBhIEdvIGV2ZW50IGhhbmRsZXIuIFRoaXMgbWFrZXMgR28gY29kZSBnZXQgZXhlY3V0ZWQgaW4gdGhlIG1pZGRsZSBvZiB0aGUgaW1wb3J0ZWRcblx0XHRcdFx0XHQvLyBmdW5jdGlvbi4gQSBnb3JvdXRpbmUgY2FuIHN3aXRjaCB0byBhIG5ldyBzdGFjayBpZiB0aGUgY3VycmVudCBzdGFjayBpcyB0b28gc21hbGwgKHNlZSBtb3Jlc3RhY2sgZnVuY3Rpb24pLlxuXHRcdFx0XHRcdC8vIFRoaXMgY2hhbmdlcyB0aGUgU1AsIHRodXMgd2UgaGF2ZSB0byB1cGRhdGUgdGhlIFNQIHVzZWQgYnkgdGhlIGltcG9ydGVkIGZ1bmN0aW9uLlxuXG5cdFx0XHRcdFx0Ly8gZnVuYyB3YXNtRXhpdChjb2RlIGludDMyKVxuXHRcdFx0XHRcdFwicnVudGltZS53YXNtRXhpdFwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdGNvbnN0IGNvZGUgPSB0aGlzLm1lbS5nZXRJbnQzMihzcCArIDgsIHRydWUpO1xuXHRcdFx0XHRcdFx0dGhpcy5leGl0ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuX2luc3Q7XG5cdFx0XHRcdFx0XHRkZWxldGUgdGhpcy5fdmFsdWVzO1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuX2dvUmVmQ291bnRzO1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuX2lkcztcblx0XHRcdFx0XHRcdGRlbGV0ZSB0aGlzLl9pZFBvb2w7XG5cdFx0XHRcdFx0XHR0aGlzLmV4aXQoY29kZSk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIGZ1bmMgd2FzbVdyaXRlKGZkIHVpbnRwdHIsIHAgdW5zYWZlLlBvaW50ZXIsIG4gaW50MzIpXG5cdFx0XHRcdFx0XCJydW50aW1lLndhc21Xcml0ZVwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdGNvbnN0IGZkID0gZ2V0SW50NjQoc3AgKyA4KTtcblx0XHRcdFx0XHRcdGNvbnN0IHAgPSBnZXRJbnQ2NChzcCArIDE2KTtcblx0XHRcdFx0XHRcdGNvbnN0IG4gPSB0aGlzLm1lbS5nZXRJbnQzMihzcCArIDI0LCB0cnVlKTtcblx0XHRcdFx0XHRcdGZzLndyaXRlU3luYyhmZCwgbmV3IFVpbnQ4QXJyYXkodGhpcy5faW5zdC5leHBvcnRzLm1lbS5idWZmZXIsIHAsIG4pKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyByZXNldE1lbW9yeURhdGFWaWV3KClcblx0XHRcdFx0XHRcInJ1bnRpbWUucmVzZXRNZW1vcnlEYXRhVmlld1wiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdHRoaXMubWVtID0gbmV3IERhdGFWaWV3KHRoaXMuX2luc3QuZXhwb3J0cy5tZW0uYnVmZmVyKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyBuYW5vdGltZTEoKSBpbnQ2NFxuXHRcdFx0XHRcdFwicnVudGltZS5uYW5vdGltZTFcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRzZXRJbnQ2NChzcCArIDgsICh0aW1lT3JpZ2luICsgcGVyZm9ybWFuY2Uubm93KCkpICogMTAwMDAwMCk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIGZ1bmMgd2FsbHRpbWUoKSAoc2VjIGludDY0LCBuc2VjIGludDMyKVxuXHRcdFx0XHRcdFwicnVudGltZS53YWxsdGltZVwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdGNvbnN0IG1zZWMgPSAobmV3IERhdGUpLmdldFRpbWUoKTtcblx0XHRcdFx0XHRcdHNldEludDY0KHNwICsgOCwgbXNlYyAvIDEwMDApO1xuXHRcdFx0XHRcdFx0dGhpcy5tZW0uc2V0SW50MzIoc3AgKyAxNiwgKG1zZWMgJSAxMDAwKSAqIDEwMDAwMDAsIHRydWUpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHNjaGVkdWxlVGltZW91dEV2ZW50KGRlbGF5IGludDY0KSBpbnQzMlxuXHRcdFx0XHRcdFwicnVudGltZS5zY2hlZHVsZVRpbWVvdXRFdmVudFwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdGNvbnN0IGlkID0gdGhpcy5fbmV4dENhbGxiYWNrVGltZW91dElEO1xuXHRcdFx0XHRcdFx0dGhpcy5fbmV4dENhbGxiYWNrVGltZW91dElEKys7XG5cdFx0XHRcdFx0XHR0aGlzLl9zY2hlZHVsZWRUaW1lb3V0cy5zZXQoaWQsIHNldFRpbWVvdXQoXG5cdFx0XHRcdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLl9yZXN1bWUoKTtcblx0XHRcdFx0XHRcdFx0XHR3aGlsZSAodGhpcy5fc2NoZWR1bGVkVGltZW91dHMuaGFzKGlkKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gZm9yIHNvbWUgcmVhc29uIEdvIGZhaWxlZCB0byByZWdpc3RlciB0aGUgdGltZW91dCBldmVudCwgbG9nIGFuZCB0cnkgYWdhaW5cblx0XHRcdFx0XHRcdFx0XHRcdC8vICh0ZW1wb3Jhcnkgd29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9naXRodWIuY29tL2dvbGFuZy9nby9pc3N1ZXMvMjg5NzUpXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oXCJzY2hlZHVsZVRpbWVvdXRFdmVudDogbWlzc2VkIHRpbWVvdXQgZXZlbnRcIik7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLl9yZXN1bWUoKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGdldEludDY0KHNwICsgOCkgKyAxLCAvLyBzZXRUaW1lb3V0IGhhcyBiZWVuIHNlZW4gdG8gZmlyZSB1cCB0byAxIG1pbGxpc2Vjb25kIGVhcmx5XG5cdFx0XHRcdFx0XHQpKTtcblx0XHRcdFx0XHRcdHRoaXMubWVtLnNldEludDMyKHNwICsgMTYsIGlkLCB0cnVlKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyBjbGVhclRpbWVvdXRFdmVudChpZCBpbnQzMilcblx0XHRcdFx0XHRcInJ1bnRpbWUuY2xlYXJUaW1lb3V0RXZlbnRcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjb25zdCBpZCA9IHRoaXMubWVtLmdldEludDMyKHNwICsgOCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQodGhpcy5fc2NoZWR1bGVkVGltZW91dHMuZ2V0KGlkKSk7XG5cdFx0XHRcdFx0XHR0aGlzLl9zY2hlZHVsZWRUaW1lb3V0cy5kZWxldGUoaWQpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIGdldFJhbmRvbURhdGEociBbXWJ5dGUpXG5cdFx0XHRcdFx0XCJydW50aW1lLmdldFJhbmRvbURhdGFcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGxvYWRTbGljZShzcCArIDgpKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyBmaW5hbGl6ZVJlZih2IHJlZilcblx0XHRcdFx0XHRcInN5c2NhbGwvanMuZmluYWxpemVSZWZcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjb25zdCBpZCA9IHRoaXMubWVtLmdldFVpbnQzMihzcCArIDgsIHRydWUpO1xuXHRcdFx0XHRcdFx0dGhpcy5fZ29SZWZDb3VudHNbaWRdLS07XG5cdFx0XHRcdFx0XHRpZiAodGhpcy5fZ29SZWZDb3VudHNbaWRdID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHYgPSB0aGlzLl92YWx1ZXNbaWRdO1xuXHRcdFx0XHRcdFx0XHR0aGlzLl92YWx1ZXNbaWRdID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0dGhpcy5faWRzLmRlbGV0ZSh2KTtcblx0XHRcdFx0XHRcdFx0dGhpcy5faWRQb29sLnB1c2goaWQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHN0cmluZ1ZhbCh2YWx1ZSBzdHJpbmcpIHJlZlxuXHRcdFx0XHRcdFwic3lzY2FsbC9qcy5zdHJpbmdWYWxcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRzdG9yZVZhbHVlKHNwICsgMjQsIGxvYWRTdHJpbmcoc3AgKyA4KSk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIGZ1bmMgdmFsdWVHZXQodiByZWYsIHAgc3RyaW5nKSByZWZcblx0XHRcdFx0XHRcInN5c2NhbGwvanMudmFsdWVHZXRcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBSZWZsZWN0LmdldChsb2FkVmFsdWUoc3AgKyA4KSwgbG9hZFN0cmluZyhzcCArIDE2KSk7XG5cdFx0XHRcdFx0XHRzcCA9IHRoaXMuX2luc3QuZXhwb3J0cy5nZXRzcCgpID4+PiAwOyAvLyBzZWUgY29tbWVudCBhYm92ZVxuXHRcdFx0XHRcdFx0c3RvcmVWYWx1ZShzcCArIDMyLCByZXN1bHQpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHZhbHVlU2V0KHYgcmVmLCBwIHN0cmluZywgeCByZWYpXG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLnZhbHVlU2V0XCI6IChzcCkgPT4ge1xuXHRcdFx0XHRcdFx0c3AgPj4+PSAwO1xuXHRcdFx0XHRcdFx0UmVmbGVjdC5zZXQobG9hZFZhbHVlKHNwICsgOCksIGxvYWRTdHJpbmcoc3AgKyAxNiksIGxvYWRWYWx1ZShzcCArIDMyKSk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIGZ1bmMgdmFsdWVEZWxldGUodiByZWYsIHAgc3RyaW5nKVxuXHRcdFx0XHRcdFwic3lzY2FsbC9qcy52YWx1ZURlbGV0ZVwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdFJlZmxlY3QuZGVsZXRlUHJvcGVydHkobG9hZFZhbHVlKHNwICsgOCksIGxvYWRTdHJpbmcoc3AgKyAxNikpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHZhbHVlSW5kZXgodiByZWYsIGkgaW50KSByZWZcblx0XHRcdFx0XHRcInN5c2NhbGwvanMudmFsdWVJbmRleFwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdHN0b3JlVmFsdWUoc3AgKyAyNCwgUmVmbGVjdC5nZXQobG9hZFZhbHVlKHNwICsgOCksIGdldEludDY0KHNwICsgMTYpKSk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIHZhbHVlU2V0SW5kZXgodiByZWYsIGkgaW50LCB4IHJlZilcblx0XHRcdFx0XHRcInN5c2NhbGwvanMudmFsdWVTZXRJbmRleFwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdFJlZmxlY3Quc2V0KGxvYWRWYWx1ZShzcCArIDgpLCBnZXRJbnQ2NChzcCArIDE2KSwgbG9hZFZhbHVlKHNwICsgMjQpKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyB2YWx1ZUNhbGwodiByZWYsIG0gc3RyaW5nLCBhcmdzIFtdcmVmKSAocmVmLCBib29sKVxuXHRcdFx0XHRcdFwic3lzY2FsbC9qcy52YWx1ZUNhbGxcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCB2ID0gbG9hZFZhbHVlKHNwICsgOCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IG0gPSBSZWZsZWN0LmdldCh2LCBsb2FkU3RyaW5nKHNwICsgMTYpKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgYXJncyA9IGxvYWRTbGljZU9mVmFsdWVzKHNwICsgMzIpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KG0sIHYsIGFyZ3MpO1xuXHRcdFx0XHRcdFx0XHRzcCA9IHRoaXMuX2luc3QuZXhwb3J0cy5nZXRzcCgpID4+PiAwOyAvLyBzZWUgY29tbWVudCBhYm92ZVxuXHRcdFx0XHRcdFx0XHRzdG9yZVZhbHVlKHNwICsgNTYsIHJlc3VsdCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQ4KHNwICsgNjQsIDEpO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdHNwID0gdGhpcy5faW5zdC5leHBvcnRzLmdldHNwKCkgPj4+IDA7IC8vIHNlZSBjb21tZW50IGFib3ZlXG5cdFx0XHRcdFx0XHRcdHN0b3JlVmFsdWUoc3AgKyA1NiwgZXJyKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5tZW0uc2V0VWludDgoc3AgKyA2NCwgMCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIGZ1bmMgdmFsdWVJbnZva2UodiByZWYsIGFyZ3MgW11yZWYpIChyZWYsIGJvb2wpXG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLnZhbHVlSW52b2tlXCI6IChzcCkgPT4ge1xuXHRcdFx0XHRcdFx0c3AgPj4+PSAwO1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgdiA9IGxvYWRWYWx1ZShzcCArIDgpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBhcmdzID0gbG9hZFNsaWNlT2ZWYWx1ZXMoc3AgKyAxNik7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IFJlZmxlY3QuYXBwbHkodiwgdW5kZWZpbmVkLCBhcmdzKTtcblx0XHRcdFx0XHRcdFx0c3AgPSB0aGlzLl9pbnN0LmV4cG9ydHMuZ2V0c3AoKSA+Pj4gMDsgLy8gc2VlIGNvbW1lbnQgYWJvdmVcblx0XHRcdFx0XHRcdFx0c3RvcmVWYWx1ZShzcCArIDQwLCByZXN1bHQpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50OChzcCArIDQ4LCAxKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHRzcCA9IHRoaXMuX2luc3QuZXhwb3J0cy5nZXRzcCgpID4+PiAwOyAvLyBzZWUgY29tbWVudCBhYm92ZVxuXHRcdFx0XHRcdFx0XHRzdG9yZVZhbHVlKHNwICsgNDAsIGVycik7XG5cdFx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQ4KHNwICsgNDgsIDApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHZhbHVlTmV3KHYgcmVmLCBhcmdzIFtdcmVmKSAocmVmLCBib29sKVxuXHRcdFx0XHRcdFwic3lzY2FsbC9qcy52YWx1ZU5ld1wiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHYgPSBsb2FkVmFsdWUoc3AgKyA4KTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgYXJncyA9IGxvYWRTbGljZU9mVmFsdWVzKHNwICsgMTYpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdCh2LCBhcmdzKTtcblx0XHRcdFx0XHRcdFx0c3AgPSB0aGlzLl9pbnN0LmV4cG9ydHMuZ2V0c3AoKSA+Pj4gMDsgLy8gc2VlIGNvbW1lbnQgYWJvdmVcblx0XHRcdFx0XHRcdFx0c3RvcmVWYWx1ZShzcCArIDQwLCByZXN1bHQpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50OChzcCArIDQ4LCAxKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHRzcCA9IHRoaXMuX2luc3QuZXhwb3J0cy5nZXRzcCgpID4+PiAwOyAvLyBzZWUgY29tbWVudCBhYm92ZVxuXHRcdFx0XHRcdFx0XHRzdG9yZVZhbHVlKHNwICsgNDAsIGVycik7XG5cdFx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQ4KHNwICsgNDgsIDApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHZhbHVlTGVuZ3RoKHYgcmVmKSBpbnRcblx0XHRcdFx0XHRcInN5c2NhbGwvanMudmFsdWVMZW5ndGhcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRzZXRJbnQ2NChzcCArIDE2LCBwYXJzZUludChsb2FkVmFsdWUoc3AgKyA4KS5sZW5ndGgpKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gdmFsdWVQcmVwYXJlU3RyaW5nKHYgcmVmKSAocmVmLCBpbnQpXG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLnZhbHVlUHJlcGFyZVN0cmluZ1wiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdGNvbnN0IHN0ciA9IGVuY29kZXIuZW5jb2RlKFN0cmluZyhsb2FkVmFsdWUoc3AgKyA4KSkpO1xuXHRcdFx0XHRcdFx0c3RvcmVWYWx1ZShzcCArIDE2LCBzdHIpO1xuXHRcdFx0XHRcdFx0c2V0SW50NjQoc3AgKyAyNCwgc3RyLmxlbmd0aCk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIHZhbHVlTG9hZFN0cmluZyh2IHJlZiwgYiBbXWJ5dGUpXG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLnZhbHVlTG9hZFN0cmluZ1wiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdGNvbnN0IHN0ciA9IGxvYWRWYWx1ZShzcCArIDgpO1xuXHRcdFx0XHRcdFx0bG9hZFNsaWNlKHNwICsgMTYpLnNldChzdHIpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHZhbHVlSW5zdGFuY2VPZih2IHJlZiwgdCByZWYpIGJvb2xcblx0XHRcdFx0XHRcInN5c2NhbGwvanMudmFsdWVJbnN0YW5jZU9mXCI6IChzcCkgPT4ge1xuXHRcdFx0XHRcdFx0c3AgPj4+PSAwO1xuXHRcdFx0XHRcdFx0dGhpcy5tZW0uc2V0VWludDgoc3AgKyAyNCwgKGxvYWRWYWx1ZShzcCArIDgpIGluc3RhbmNlb2YgbG9hZFZhbHVlKHNwICsgMTYpKSA/IDEgOiAwKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyBjb3B5Qnl0ZXNUb0dvKGRzdCBbXWJ5dGUsIHNyYyByZWYpIChpbnQsIGJvb2wpXG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLmNvcHlCeXRlc1RvR29cIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjb25zdCBkc3QgPSBsb2FkU2xpY2Uoc3AgKyA4KTtcblx0XHRcdFx0XHRcdGNvbnN0IHNyYyA9IGxvYWRWYWx1ZShzcCArIDMyKTtcblx0XHRcdFx0XHRcdGlmICghKHNyYyBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgfHwgc3JjIGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXkpKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQ4KHNwICsgNDgsIDApO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjb25zdCB0b0NvcHkgPSBzcmMuc3ViYXJyYXkoMCwgZHN0Lmxlbmd0aCk7XG5cdFx0XHRcdFx0XHRkc3Quc2V0KHRvQ29weSk7XG5cdFx0XHRcdFx0XHRzZXRJbnQ2NChzcCArIDQwLCB0b0NvcHkubGVuZ3RoKTtcblx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQ4KHNwICsgNDgsIDEpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIGNvcHlCeXRlc1RvSlMoZHN0IHJlZiwgc3JjIFtdYnl0ZSkgKGludCwgYm9vbClcblx0XHRcdFx0XHRcInN5c2NhbGwvanMuY29weUJ5dGVzVG9KU1wiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdGNvbnN0IGRzdCA9IGxvYWRWYWx1ZShzcCArIDgpO1xuXHRcdFx0XHRcdFx0Y29uc3Qgc3JjID0gbG9hZFNsaWNlKHNwICsgMTYpO1xuXHRcdFx0XHRcdFx0aWYgKCEoZHN0IGluc3RhbmNlb2YgVWludDhBcnJheSB8fCBkc3QgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheSkpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5tZW0uc2V0VWludDgoc3AgKyA0OCwgMCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNvbnN0IHRvQ29weSA9IHNyYy5zdWJhcnJheSgwLCBkc3QubGVuZ3RoKTtcblx0XHRcdFx0XHRcdGRzdC5zZXQodG9Db3B5KTtcblx0XHRcdFx0XHRcdHNldEludDY0KHNwICsgNDAsIHRvQ29weS5sZW5ndGgpO1xuXHRcdFx0XHRcdFx0dGhpcy5tZW0uc2V0VWludDgoc3AgKyA0OCwgMSk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdFwiZGVidWdcIjogKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyh2YWx1ZSk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRhc3luYyBydW4oaW5zdGFuY2UpIHtcblx0XHRcdGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgV2ViQXNzZW1ibHkuSW5zdGFuY2UpKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIkdvLnJ1bjogV2ViQXNzZW1ibHkuSW5zdGFuY2UgZXhwZWN0ZWRcIik7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9pbnN0ID0gaW5zdGFuY2U7XG5cdFx0XHR0aGlzLm1lbSA9IG5ldyBEYXRhVmlldyh0aGlzLl9pbnN0LmV4cG9ydHMubWVtLmJ1ZmZlcik7XG5cdFx0XHR0aGlzLl92YWx1ZXMgPSBbIC8vIEpTIHZhbHVlcyB0aGF0IEdvIGN1cnJlbnRseSBoYXMgcmVmZXJlbmNlcyB0bywgaW5kZXhlZCBieSByZWZlcmVuY2UgaWRcblx0XHRcdFx0TmFOLFxuXHRcdFx0XHQwLFxuXHRcdFx0XHRudWxsLFxuXHRcdFx0XHR0cnVlLFxuXHRcdFx0XHRmYWxzZSxcblx0XHRcdFx0Z2xvYmFsLFxuXHRcdFx0XHR0aGlzLFxuXHRcdFx0XTtcblx0XHRcdHRoaXMuX2dvUmVmQ291bnRzID0gbmV3IEFycmF5KHRoaXMuX3ZhbHVlcy5sZW5ndGgpLmZpbGwoSW5maW5pdHkpOyAvLyBudW1iZXIgb2YgcmVmZXJlbmNlcyB0aGF0IEdvIGhhcyB0byBhIEpTIHZhbHVlLCBpbmRleGVkIGJ5IHJlZmVyZW5jZSBpZFxuXHRcdFx0dGhpcy5faWRzID0gbmV3IE1hcChbIC8vIG1hcHBpbmcgZnJvbSBKUyB2YWx1ZXMgdG8gcmVmZXJlbmNlIGlkc1xuXHRcdFx0XHRbMCwgMV0sXG5cdFx0XHRcdFtudWxsLCAyXSxcblx0XHRcdFx0W3RydWUsIDNdLFxuXHRcdFx0XHRbZmFsc2UsIDRdLFxuXHRcdFx0XHRbZ2xvYmFsLCA1XSxcblx0XHRcdFx0W3RoaXMsIDZdLFxuXHRcdFx0XSk7XG5cdFx0XHR0aGlzLl9pZFBvb2wgPSBbXTsgICAvLyB1bnVzZWQgaWRzIHRoYXQgaGF2ZSBiZWVuIGdhcmJhZ2UgY29sbGVjdGVkXG5cdFx0XHR0aGlzLmV4aXRlZCA9IGZhbHNlOyAvLyB3aGV0aGVyIHRoZSBHbyBwcm9ncmFtIGhhcyBleGl0ZWRcblxuXHRcdFx0Ly8gUGFzcyBjb21tYW5kIGxpbmUgYXJndW1lbnRzIGFuZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgdG8gV2ViQXNzZW1ibHkgYnkgd3JpdGluZyB0aGVtIHRvIHRoZSBsaW5lYXIgbWVtb3J5LlxuXHRcdFx0bGV0IG9mZnNldCA9IDQwOTY7XG5cblx0XHRcdGNvbnN0IHN0clB0ciA9IChzdHIpID0+IHtcblx0XHRcdFx0Y29uc3QgcHRyID0gb2Zmc2V0O1xuXHRcdFx0XHRjb25zdCBieXRlcyA9IGVuY29kZXIuZW5jb2RlKHN0ciArIFwiXFxcXDBcIik7XG5cdFx0XHRcdG5ldyBVaW50OEFycmF5KHRoaXMubWVtLmJ1ZmZlciwgb2Zmc2V0LCBieXRlcy5sZW5ndGgpLnNldChieXRlcyk7XG5cdFx0XHRcdG9mZnNldCArPSBieXRlcy5sZW5ndGg7XG5cdFx0XHRcdGlmIChvZmZzZXQgJSA4ICE9PSAwKSB7XG5cdFx0XHRcdFx0b2Zmc2V0ICs9IDggLSAob2Zmc2V0ICUgOCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHB0cjtcblx0XHRcdH07XG5cblx0XHRcdGNvbnN0IGFyZ2MgPSB0aGlzLmFyZ3YubGVuZ3RoO1xuXG5cdFx0XHRjb25zdCBhcmd2UHRycyA9IFtdO1xuXHRcdFx0dGhpcy5hcmd2LmZvckVhY2goKGFyZykgPT4ge1xuXHRcdFx0XHRhcmd2UHRycy5wdXNoKHN0clB0cihhcmcpKTtcblx0XHRcdH0pO1xuXHRcdFx0YXJndlB0cnMucHVzaCgwKTtcblxuXHRcdFx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuZW52KS5zb3J0KCk7XG5cdFx0XHRrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuXHRcdFx0XHRhcmd2UHRycy5wdXNoKHN0clB0cihcXGBcXCR7a2V5fT1cXCR7dGhpcy5lbnZba2V5XX1cXGApKTtcblx0XHRcdH0pO1xuXHRcdFx0YXJndlB0cnMucHVzaCgwKTtcblxuXHRcdFx0Y29uc3QgYXJndiA9IG9mZnNldDtcblx0XHRcdGFyZ3ZQdHJzLmZvckVhY2goKHB0cikgPT4ge1xuXHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50MzIob2Zmc2V0LCBwdHIsIHRydWUpO1xuXHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50MzIob2Zmc2V0ICsgNCwgMCwgdHJ1ZSk7XG5cdFx0XHRcdG9mZnNldCArPSA4O1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFRoZSBsaW5rZXIgZ3VhcmFudGVlcyBnbG9iYWwgZGF0YSBzdGFydHMgZnJvbSBhdCBsZWFzdCB3YXNtTWluRGF0YUFkZHIuXG5cdFx0XHQvLyBLZWVwIGluIHN5bmMgd2l0aCBjbWQvbGluay9pbnRlcm5hbC9sZC9kYXRhLmdvOndhc21NaW5EYXRhQWRkci5cblx0XHRcdGNvbnN0IHdhc21NaW5EYXRhQWRkciA9IDQwOTYgKyA0MDk2O1xuXHRcdFx0aWYgKG9mZnNldCA+PSB3YXNtTWluRGF0YUFkZHIpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiY29tbWFuZCBsaW5lIHRvbyBsb25nXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl9pbnN0LmV4cG9ydHMucnVuKGFyZ2MsIGFyZ3YpO1xuXHRcdFx0aWYgKHRoaXMuZXhpdGVkKSB7XG5cdFx0XHRcdHRoaXMuX3Jlc29sdmVFeGl0UHJvbWlzZSgpO1xuXHRcdFx0fVxuXHRcdFx0YXdhaXQgdGhpcy5fZXhpdFByb21pc2U7XG5cdFx0fVxuXG5cdFx0X3Jlc3VtZSgpIHtcblx0XHRcdGlmICh0aGlzLmV4aXRlZCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJHbyBwcm9ncmFtIGhhcyBhbHJlYWR5IGV4aXRlZFwiKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuX2luc3QuZXhwb3J0cy5yZXN1bWUoKTtcblx0XHRcdGlmICh0aGlzLmV4aXRlZCkge1xuXHRcdFx0XHR0aGlzLl9yZXNvbHZlRXhpdFByb21pc2UoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRfbWFrZUZ1bmNXcmFwcGVyKGlkKSB7XG5cdFx0XHRjb25zdCBnbyA9IHRoaXM7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRjb25zdCBldmVudCA9IHsgaWQ6IGlkLCB0aGlzOiB0aGlzLCBhcmdzOiBhcmd1bWVudHMgfTtcblx0XHRcdFx0Z28uX3BlbmRpbmdFdmVudCA9IGV2ZW50O1xuXHRcdFx0XHRnby5fcmVzdW1lKCk7XG5cdFx0XHRcdHJldHVybiBldmVudC5yZXN1bHQ7XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdGlmIChcblx0XHR0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiICYmXG5cdFx0Z2xvYmFsLnJlcXVpcmUgJiZcblx0XHRnbG9iYWwucmVxdWlyZS5tYWluID09PSBtb2R1bGUgJiZcblx0XHRnbG9iYWwucHJvY2VzcyAmJlxuXHRcdGdsb2JhbC5wcm9jZXNzLnZlcnNpb25zICYmXG5cdFx0IWdsb2JhbC5wcm9jZXNzLnZlcnNpb25zLmVsZWN0cm9uXG5cdCkge1xuXHRcdGlmIChwcm9jZXNzLmFyZ3YubGVuZ3RoIDwgMykge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcInVzYWdlOiBnb19qc193YXNtX2V4ZWMgW3dhc20gYmluYXJ5XSBbYXJndW1lbnRzXVwiKTtcblx0XHRcdHByb2Nlc3MuZXhpdCgxKTtcblx0XHR9XG5cblx0XHRjb25zdCBnbyA9IG5ldyBHbygpO1xuXHRcdGdvLmFyZ3YgPSBwcm9jZXNzLmFyZ3Yuc2xpY2UoMik7XG5cdFx0Z28uZW52ID0gT2JqZWN0LmFzc2lnbih7IFRNUERJUjogcmVxdWlyZShcIm9zXCIpLnRtcGRpcigpIH0sIHByb2Nlc3MuZW52KTtcblx0XHRnby5leGl0ID0gcHJvY2Vzcy5leGl0O1xuXHRcdFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKGZzLnJlYWRGaWxlU3luYyhwcm9jZXNzLmFyZ3ZbMl0pLCBnby5pbXBvcnRPYmplY3QpLnRoZW4oKHJlc3VsdCkgPT4ge1xuXHRcdFx0cHJvY2Vzcy5vbihcImV4aXRcIiwgKGNvZGUpID0+IHsgLy8gTm9kZS5qcyBleGl0cyBpZiBubyBldmVudCBoYW5kbGVyIGlzIHBlbmRpbmdcblx0XHRcdFx0aWYgKGNvZGUgPT09IDAgJiYgIWdvLmV4aXRlZCkge1xuXHRcdFx0XHRcdC8vIGRlYWRsb2NrLCBtYWtlIEdvIHByaW50IGVycm9yIGFuZCBzdGFjayB0cmFjZXNcblx0XHRcdFx0XHRnby5fcGVuZGluZ0V2ZW50ID0geyBpZDogMCB9O1xuXHRcdFx0XHRcdGdvLl9yZXN1bWUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZ28ucnVuKHJlc3VsdC5pbnN0YW5jZSk7XG5cdFx0fSkuY2F0Y2goKGVycikgPT4ge1xuXHRcdFx0Y29uc29sZS5lcnJvcihlcnIpO1xuXHRcdFx0cHJvY2Vzcy5leGl0KDEpO1xuXHRcdH0pO1xuXHR9XG59KSgpO1xub25tZXNzYWdlID0gKHsgZGF0YTogd2FzbSB9KSA9PiB7XG4gIGxldCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gIGxldCBmcyA9IGdsb2JhbC5mcztcbiAgbGV0IHN0ZGVyciA9IFwiXCI7XG4gIGZzLndyaXRlU3luYyA9IChmZCwgYnVmZmVyKSA9PiB7XG4gICAgaWYgKGZkID09PSAxKSB7XG4gICAgICBwb3N0TWVzc2FnZShidWZmZXIpO1xuICAgIH0gZWxzZSBpZiAoZmQgPT09IDIpIHtcbiAgICAgIHN0ZGVyciArPSBkZWNvZGVyLmRlY29kZShidWZmZXIpO1xuICAgICAgbGV0IHBhcnRzID0gc3RkZXJyLnNwbGl0KFwiXFxcXG5cIik7XG4gICAgICBpZiAocGFydHMubGVuZ3RoID4gMSlcbiAgICAgICAgY29uc29sZS5sb2cocGFydHMuc2xpY2UoMCwgLTEpLmpvaW4oXCJcXFxcblwiKSk7XG4gICAgICBzdGRlcnIgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmFkIHdyaXRlXCIpO1xuICAgIH1cbiAgICByZXR1cm4gYnVmZmVyLmxlbmd0aDtcbiAgfTtcbiAgbGV0IHN0ZGluID0gW107XG4gIGxldCByZXN1bWVTdGRpbjtcbiAgbGV0IHN0ZGluUG9zID0gMDtcbiAgb25tZXNzYWdlID0gKHsgZGF0YSB9KSA9PiB7XG4gICAgaWYgKGRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgc3RkaW4ucHVzaChkYXRhKTtcbiAgICAgIGlmIChyZXN1bWVTdGRpbilcbiAgICAgICAgcmVzdW1lU3RkaW4oKTtcbiAgICB9XG4gIH07XG4gIGZzLnJlYWQgPSAoZmQsIGJ1ZmZlciwgb2Zmc2V0LCBsZW5ndGgsIHBvc2l0aW9uLCBjYWxsYmFjaykgPT4ge1xuICAgIGlmIChmZCAhPT0gMCB8fCBvZmZzZXQgIT09IDAgfHwgbGVuZ3RoICE9PSBidWZmZXIubGVuZ3RoIHx8IHBvc2l0aW9uICE9PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgcmVhZFwiKTtcbiAgICB9XG4gICAgaWYgKHN0ZGluLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmVzdW1lU3RkaW4gPSAoKSA9PiBmcy5yZWFkKGZkLCBidWZmZXIsIG9mZnNldCwgbGVuZ3RoLCBwb3NpdGlvbiwgY2FsbGJhY2spO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgZmlyc3QgPSBzdGRpblswXTtcbiAgICBsZXQgY291bnQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihsZW5ndGgsIGZpcnN0Lmxlbmd0aCAtIHN0ZGluUG9zKSk7XG4gICAgYnVmZmVyLnNldChmaXJzdC5zdWJhcnJheShzdGRpblBvcywgc3RkaW5Qb3MgKyBjb3VudCksIG9mZnNldCk7XG4gICAgc3RkaW5Qb3MgKz0gY291bnQ7XG4gICAgaWYgKHN0ZGluUG9zID09PSBmaXJzdC5sZW5ndGgpIHtcbiAgICAgIHN0ZGluLnNoaWZ0KCk7XG4gICAgICBzdGRpblBvcyA9IDA7XG4gICAgfVxuICAgIGNhbGxiYWNrKG51bGwsIGNvdW50KTtcbiAgfTtcbiAgbGV0IGdvID0gbmV3IGdsb2JhbC5HbygpO1xuICBnby5hcmd2ID0gW1wiXCIsIFxcYC0tc2VydmljZT1cXCR7XCIwLjEzLjExXCJ9XFxgXTtcbiAgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUod2FzbSwgZ28uaW1wb3J0T2JqZWN0KS50aGVuKCh7IGluc3RhbmNlIH0pID0+IGdvLnJ1bihpbnN0YW5jZSkpO1xufTt9YDtcbiAgICBsZXQgd29ya2VyO1xuICAgIGlmICh1c2VXb3JrZXIpIHtcbiAgICAgICAgbGV0IGJsb2IgPSBuZXcgQmxvYihbXG4gICAgICAgICAgICBjb2RlXG4gICAgICAgIF0sIHtcbiAgICAgICAgICAgIHR5cGU6IFwidGV4dC9qYXZhc2NyaXB0XCJcbiAgICAgICAgfSk7XG4gICAgICAgIHdvcmtlciA9IG5ldyBXb3JrZXIoVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGZuID0gbmV3IEZ1bmN0aW9uKFwicG9zdE1lc3NhZ2VcIiwgY29kZSArIGB2YXIgb25tZXNzYWdlOyByZXR1cm4gbSA9PiBvbm1lc3NhZ2UobSlgKTtcbiAgICAgICAgbGV0IG9ubWVzc2FnZSA9IGZuKChkYXRhKT0+d29ya2VyLm9ubWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgZGF0YVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgd29ya2VyID0ge1xuICAgICAgICAgICAgb25tZXNzYWdlOiBudWxsLFxuICAgICAgICAgICAgcG9zdE1lc3NhZ2U6IChkYXRhKT0+b25tZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAsXG4gICAgICAgICAgICB0ZXJtaW5hdGUgKCkge1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICB3b3JrZXIucG9zdE1lc3NhZ2Uod2FzbSk7XG4gICAgd29ya2VyLm9ubWVzc2FnZSA9ICh7IGRhdGEgIH0pPT5yZWFkRnJvbVN0ZG91dChkYXRhKVxuICAgIDtcbiAgICBsZXQgeyByZWFkRnJvbVN0ZG91dCAsIHNlcnZpY2UgIH0gPSBjcmVhdGVDaGFubmVsKHtcbiAgICAgICAgd3JpdGVUb1N0ZGluIChieXRlcykge1xuICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKGJ5dGVzKTtcbiAgICAgICAgfSxcbiAgICAgICAgaXNTeW5jOiBmYWxzZSxcbiAgICAgICAgaXNCcm93c2VyOiB0cnVlXG4gICAgfSk7XG4gICAgbG9uZ0xpdmVkU2VydmljZSA9IHtcbiAgICAgICAgYnVpbGQ6IChvcHRpb25zKT0+bmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PnNlcnZpY2UuYnVpbGRPclNlcnZlKHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbE5hbWU6IFwiYnVpbGRcIixcbiAgICAgICAgICAgICAgICAgICAgcmVmczogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgc2VydmVPcHRpb25zOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICBpc1RUWTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRXRDogXCIvXCIsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoZXJyLCByZXMyKT0+ZXJyID8gcmVqZWN0KGVycikgOiByZXNvbHZlKHJlczIpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgLFxuICAgICAgICB0cmFuc2Zvcm06IChpbnB1dCwgb3B0aW9ucyk9Pm5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT5zZXJ2aWNlLnRyYW5zZm9ybSh7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxOYW1lOiBcInRyYW5zZm9ybVwiLFxuICAgICAgICAgICAgICAgICAgICByZWZzOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogb3B0aW9ucyB8fCB7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGlzVFRZOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRGaWxlIChfLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcihcIkludGVybmFsIGVycm9yXCIpLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUZpbGUgKF8sIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoZXJyLCByZXMyKT0+ZXJyID8gcmVqZWN0KGVycikgOiByZXNvbHZlKHJlczIpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgLFxuICAgICAgICBmb3JtYXRNZXNzYWdlczogKG1lc3NhZ2VzLCBvcHRpb25zKT0+bmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PnNlcnZpY2UuZm9ybWF0TWVzc2FnZXMoe1xuICAgICAgICAgICAgICAgICAgICBjYWxsTmFtZTogXCJmb3JtYXRNZXNzYWdlc1wiLFxuICAgICAgICAgICAgICAgICAgICByZWZzOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlcyxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IChlcnIsIHJlczIpPT5lcnIgPyByZWplY3QoZXJyKSA6IHJlc29sdmUocmVzMilcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAsXG4gICAgICAgIGFuYWx5emVNZXRhZmlsZTogKG1ldGFmaWxlLCBvcHRpb25zKT0+bmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PnNlcnZpY2UuYW5hbHl6ZU1ldGFmaWxlKHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbE5hbWU6IFwiYW5hbHl6ZU1ldGFmaWxlXCIsXG4gICAgICAgICAgICAgICAgICAgIHJlZnM6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFmaWxlOiB0eXBlb2YgbWV0YWZpbGUgPT09IFwic3RyaW5nXCIgPyBtZXRhZmlsZSA6IEpTT04uc3RyaW5naWZ5KG1ldGFmaWxlKSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IChlcnIsIHJlczIpPT5lcnIgPyByZWplY3QoZXJyKSA6IHJlc29sdmUocmVzMilcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgIH07XG59O1xuZnVuY3Rpb24gaXNPYmplY3Qob2JqZWN0KSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmplY3QgPT0gXCJvYmplY3RcIiAmJiBvYmplY3QgIT09IG51bGwgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBPYmplY3Q7XG59XG5mdW5jdGlvbiBzb3J0T2JqZWN0KG5vcm1hbGl6ZWQpIHtcbiAgICBjb25zdCBzb3J0ZWQgPSB7XG4gICAgfTtcbiAgICBjb25zdCBzb3J0ZWRLZXlzID0gT2JqZWN0LmtleXMobm9ybWFsaXplZCkuc29ydCgoYSwgYik9PmIubGVuZ3RoIC0gYS5sZW5ndGhcbiAgICApO1xuICAgIGZvciAoY29uc3Qga2V5IG9mIHNvcnRlZEtleXMpe1xuICAgICAgICBzb3J0ZWRba2V5XSA9IG5vcm1hbGl6ZWRba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIHNvcnRlZDtcbn1cbmZ1bmN0aW9uIGlzSW1wb3J0TWFwKGltcG9ydE1hcCkge1xuICAgIHJldHVybiBpc09iamVjdChpbXBvcnRNYXApICYmIChpbXBvcnRNYXAuaW1wb3J0cyAhPT0gdW5kZWZpbmVkID8gaXNJbXBvcnRzKGltcG9ydE1hcC5pbXBvcnRzKSA6IHRydWUpICYmIChpbXBvcnRNYXAuc2NvcGVzICE9PSB1bmRlZmluZWQgPyBpc1Njb3BlcyhpbXBvcnRNYXAuc2NvcGVzKSA6IHRydWUpO1xufVxuZnVuY3Rpb24gaXNJbXBvcnRzKGltcG9ydHNNYXApIHtcbiAgICByZXR1cm4gaXNPYmplY3QoaW1wb3J0c01hcCk7XG59XG5mdW5jdGlvbiBpc1Njb3BlcyhzY29wZXMpIHtcbiAgICByZXR1cm4gaXNPYmplY3Qoc2NvcGVzKSAmJiBPYmplY3QudmFsdWVzKHNjb3BlcykuZXZlcnkoKHZhbHVlKT0+aXNTcGVjaWZpZXJNYXAodmFsdWUpXG4gICAgKTtcbn1cbmZ1bmN0aW9uIGlzU3BlY2lmaWVyTWFwKHNwZWNpZmllck1hcCkge1xuICAgIHJldHVybiBpc09iamVjdChzcGVjaWZpZXJNYXApO1xufVxuZnVuY3Rpb24gc29ydEFuZE5vcm1hbGl6ZVNwZWNpZmllck1hcChvcmlnaW5hbE1hcCwgYmFzZVVSTCkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB7XG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IFtzcGVjaWZpZXJLZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhvcmlnaW5hbE1hcCkpe1xuICAgICAgICBjb25zdCBub3JtYWxpemVkU3BlY2lmaWVyS2V5ID0gbm9ybWFsaXplU3BlY2lmaWVyS2V5KHNwZWNpZmllcktleSwgYmFzZVVSTCk7XG4gICAgICAgIGlmIChub3JtYWxpemVkU3BlY2lmaWVyS2V5ID09PSBudWxsKSBjb250aW51ZTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBhZGRyZXNzZXMgbmVlZCB0byBiZSBzdHJpbmdzLmApO1xuICAgICAgICAgICAgbm9ybWFsaXplZFtub3JtYWxpemVkU3BlY2lmaWVyS2V5XSA9IG51bGw7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhZGRyZXNzVVJMID0gcGFyc2VVcmxMaWtlSW1wb3J0U3BlY2lmaWVyKHZhbHVlLCBiYXNlVVJMKTtcbiAgICAgICAgaWYgKGFkZHJlc3NVUkwgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgdGhlIGFkZHJlc3Mgd2FzIGludmFsaWQuYCk7XG4gICAgICAgICAgICBub3JtYWxpemVkW25vcm1hbGl6ZWRTcGVjaWZpZXJLZXldID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcGVjaWZpZXJLZXkuZW5kc1dpdGgoXCIvXCIpICYmICFzZXJpYWxpemVVUkwoYWRkcmVzc1VSTCkuZW5kc1dpdGgoXCIvXCIpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYGFuIGludmFsaWQgYWRkcmVzcyB3YXMgZ2l2ZW4gZm9yIHRoZSBzcGVjaWZpZXIga2V5IHNwZWNpZmllcktleTsgc2luY2Ugc3BlY2lmaWVyS2V5IGVuZGVkIGluIGEgc2xhc2gsIHRoZSBhZGRyZXNzIG5lZWRzIHRvIGFzIHdlbGwuYCk7XG4gICAgICAgICAgICBub3JtYWxpemVkW25vcm1hbGl6ZWRTcGVjaWZpZXJLZXldID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIG5vcm1hbGl6ZWRbbm9ybWFsaXplZFNwZWNpZmllcktleV0gPSBzZXJpYWxpemVVUkwoYWRkcmVzc1VSTCk7XG4gICAgfVxuICAgIHJldHVybiBzb3J0T2JqZWN0KG5vcm1hbGl6ZWQpO1xufVxuZnVuY3Rpb24gc2VyaWFsaXplVVJMKHVybCkge1xuICAgIHJldHVybiB1cmwuaHJlZjtcbn1cbmZ1bmN0aW9uIHNvcnRBbmROb3JtYWxpemVTY29wZXMob3JpZ2luYWxNYXAsIGJhc2VVUkwpIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0ge1xuICAgIH07XG4gICAgZm9yIChjb25zdCBbc2NvcGVQcmVmaXgsIHBvdGVudGlhbFNwZWNpZmllck1hcF0gb2YgT2JqZWN0LmVudHJpZXMob3JpZ2luYWxNYXApKXtcbiAgICAgICAgaWYgKCFpc1NwZWNpZmllck1hcChwb3RlbnRpYWxTcGVjaWZpZXJNYXApKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGB0aGUgdmFsdWUgb2YgdGhlIHNjb3BlIHdpdGggcHJlZml4IHNjb3BlUHJlZml4IG5lZWRzIHRvIGJlIGFuIG9iamVjdC5gKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2NvcGVQcmVmaXhVUkw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzY29wZVByZWZpeFVSTCA9IG5ldyBVUkwoc2NvcGVQcmVmaXgsIGJhc2VVUkwpO1xuICAgICAgICB9IGNhdGNoICB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYHRoZSBzY29wZSBwcmVmaXggVVJMIHdhcyBub3QgcGFyc2VhYmxlLmApO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZFNjb3BlUHJlZml4ID0gc2VyaWFsaXplVVJMKHNjb3BlUHJlZml4VVJMKTtcbiAgICAgICAgbm9ybWFsaXplZFtub3JtYWxpemVkU2NvcGVQcmVmaXhdID0gc29ydEFuZE5vcm1hbGl6ZVNwZWNpZmllck1hcChwb3RlbnRpYWxTcGVjaWZpZXJNYXAsIGJhc2VVUkwpO1xuICAgIH1cbiAgICBjb25zdCBzb3J0ZWQgPSB7XG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhub3JtYWxpemVkKSl7XG4gICAgICAgIHNvcnRlZFtrZXldID0gc29ydE9iamVjdChub3JtYWxpemVkW2tleV0pO1xuICAgIH1cbiAgICByZXR1cm4gc29ydE9iamVjdChzb3J0ZWQpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplU3BlY2lmaWVyS2V5KHNwZWNpZmllcktleSwgYmFzZVVSTCkge1xuICAgIGlmICghc3BlY2lmaWVyS2V5Lmxlbmd0aCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJzcGVjaWZpZXIga2V5IGNhbm5vdCBiZSBhbiBlbXB0eSBzdHJpbmcuXCIpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgdXJsID0gcGFyc2VVcmxMaWtlSW1wb3J0U3BlY2lmaWVyKHNwZWNpZmllcktleSwgYmFzZVVSTCk7XG4gICAgaWYgKHVybCAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gc2VyaWFsaXplVVJMKHVybCk7XG4gICAgfVxuICAgIHJldHVybiBzcGVjaWZpZXJLZXk7XG59XG5mdW5jdGlvbiBwYXJzZVVybExpa2VJbXBvcnRTcGVjaWZpZXIoc3BlY2lmaWVyLCBiYXNlVVJMKSB7XG4gICAgaWYgKGJhc2VVUkwgJiYgKHNwZWNpZmllci5zdGFydHNXaXRoKFwiL1wiKSB8fCBzcGVjaWZpZXIuc3RhcnRzV2l0aChcIi4vXCIpIHx8IHNwZWNpZmllci5zdGFydHNXaXRoKFwiLi4vXCIpKSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChzcGVjaWZpZXIsIGJhc2VVUkwpO1xuICAgICAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgICAgfSBjYXRjaCAge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChzcGVjaWZpZXIpO1xuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH0gY2F0Y2ggIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVzb2x2ZUltcG9ydE1hcChpbXBvcnRNYXAsIGJhc2VVUkwpIHtcbiAgICBsZXQgc29ydGVkQW5kTm9ybWFsaXplZEltcG9ydHMgPSB7XG4gICAgfTtcbiAgICBpZiAoIWlzSW1wb3J0TWFwKGltcG9ydE1hcCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgdGhlIHRvcC1sZXZlbCB2YWx1ZSBuZWVkcyB0byBiZSBhIEpTT04gb2JqZWN0LmApO1xuICAgIH1cbiAgICBjb25zdCB7IGltcG9ydHMgLCBzY29wZXMgIH0gPSBpbXBvcnRNYXA7XG4gICAgaWYgKGltcG9ydHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoIWlzSW1wb3J0cyhpbXBvcnRzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgXCJpbXBvcnRzXCIgdG9wLWxldmVsIGtleSBuZWVkcyB0byBiZSBhbiBvYmplY3QuYCk7XG4gICAgICAgIH1cbiAgICAgICAgc29ydGVkQW5kTm9ybWFsaXplZEltcG9ydHMgPSBzb3J0QW5kTm9ybWFsaXplU3BlY2lmaWVyTWFwKGltcG9ydHMsIGJhc2VVUkwpO1xuICAgIH1cbiAgICBsZXQgc29ydGVkQW5kTm9ybWFsaXplZFNjb3BlcyA9IHtcbiAgICB9O1xuICAgIGlmIChzY29wZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoIWlzU2NvcGVzKHNjb3BlcykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFwic2NvcGVzXCIgdG9wLWxldmVsIGtleSBuZWVkcyB0byBiZSBhbiBvYmplY3QuYCk7XG4gICAgICAgIH1cbiAgICAgICAgc29ydGVkQW5kTm9ybWFsaXplZFNjb3BlcyA9IHNvcnRBbmROb3JtYWxpemVTY29wZXMoc2NvcGVzLCBiYXNlVVJMKTtcbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKGltcG9ydE1hcCkuZmluZCgoa2V5KT0+a2V5ICE9PSBcImltcG9ydHNcIiAmJiBrZXkgIT09IFwic2NvcGVzXCJcbiAgICApKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgYW4gaW52YWxpZCB0b3AtbGV2ZWwga2V5IHdhcyBwcmVzZW50IGluIHRoZSBpbXBvcnQgbWFwLmApO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBpbXBvcnRzOiBzb3J0ZWRBbmROb3JtYWxpemVkSW1wb3J0cyxcbiAgICAgICAgc2NvcGVzOiBzb3J0ZWRBbmROb3JtYWxpemVkU2NvcGVzXG4gICAgfTtcbn1cbmNvbnN0IGxvYWRlckxpc3QgPSBbXG4gICAgXCJqc1wiLFxuICAgIFwianN4XCIsXG4gICAgXCJ0c1wiLFxuICAgIFwidHN4XCIsXG4gICAgXCJjc3NcIixcbiAgICBcImpzb25cIixcbiAgICBcInRleHRcIixcbiAgICBcImJhc2U2NFwiLFxuICAgIFwiZmlsZVwiLFxuICAgIFwiZGF0YXVybFwiLFxuICAgIFwiYmluYXJ5XCIsXG4gICAgXCJkZWZhdWx0XCIsIFxuXTtcbmZ1bmN0aW9uIGlzTG9hZGVyKGxvYWRlcikge1xuICAgIHJldHVybiBsb2FkZXJMaXN0LmluY2x1ZGVzKGxvYWRlcik7XG59XG5jb25zdCBuYW1lID0gXCJyZW1vdGUtcmVzb3VyY2VcIjtcbmNvbnN0IHJlbW90ZUxvYWRlciA9IChvcHRpb25zKT0+KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYXN5bmMgc2V0dXAgKHsgb25SZXNvbHZlICwgb25Mb2FkICwgaW5pdGlhbE9wdGlvbnM6IHsgZXh0ZXJuYWwgIH0gIH0pIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaW1wb3J0bWFwID17XG4gICAgICAgICAgICAgICAgaW1wb3J0czoge1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gLCBiYXNlVVJMICwgcHJvZ3Jlc3NDYWxsYmFjayA9Y29uc29sZS5sb2cgLCAgfSA9IG9wdGlvbnMgPz8ge1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGltcG9ydE1hcCA9IHJlc29sdmVJbXBvcnRNYXAoaW1wb3J0bWFwLCBiYXNlVVJMKTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gYXdhaXQgZ2xvYmFsVGhpcy5jYWNoZXMub3BlbihcInYxXCIpO1xuICAgICAgICAgICAgY29uc3Qga2V5cyA9IGF3YWl0IGNhY2hlLmtleXMoKTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGtleXMubWFwKChrZXkpPT5jYWNoZS5kZWxldGUoa2V5KVxuICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICBjb25zdCBza2lwID0gKHBhdGgpPT5leHRlcm5hbD8uaW5jbHVkZXM/LihwYXRoKSA/PyBmYWxzZVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgb25SZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IC8uKi9cbiAgICAgICAgICAgIH0sICh7IHBhdGggLCBpbXBvcnRlciAsIHJlc29sdmVEaXIgIH0pPT57XG4gICAgICAgICAgICAgICAgaWYgKHNraXAocGF0aCkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVybmFsOiB0cnVlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNvbHZlZFBhdGggPSBpbXBvcnRNYXAuaW1wb3J0cz8uW3BhdGhdID8/IHBhdGg7XG4gICAgICAgICAgICAgICAgaWYgKHNraXAocGF0aCkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVybmFsOiB0cnVlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocmVzb2x2ZWRQYXRoLnN0YXJ0c1dpdGgoXCJodHRwXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZURpclxuICAgICAgICAgICAgICAgICAgICB9LCBcIi0+XCIsIHJlc29sdmVkUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiByZXNvbHZlZFBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgaW1wb3J0VVJMID0gbmV3IFVSTChyZXNvbHZlZFBhdGgsIGltcG9ydGVyKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGlmIChza2lwKHBhdGgpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBleHRlcm5hbDogdHJ1ZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGltcG9ydFVSTC5zdGFydHNXaXRoKFwiaHR0cFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHJlc29sdmVkUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZURpclxuICAgICAgICAgICAgICAgICAgICB9LCBcIi0+XCIsIGltcG9ydFVSTCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBpbXBvcnRVUkwsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0ZXJuYWw6IHRydWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvbkxvYWQoe1xuICAgICAgICAgICAgICAgIGZpbHRlcjogL15odHRwLyxcbiAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IG5hbWVcbiAgICAgICAgICAgIH0sIGFzeW5jICh7IHBhdGggIH0pPT57XG4gICAgICAgICAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChwYXRoKTtcbiAgICAgICAgICAgICAgICBpZiAodXJsLmhvc3RuYW1lID09PSBcInNjcmFwYm94LmlvXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsLnBvcnQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB1cmwucHJvdG9jb2wgPSBcImh0dHBzOlwiO1xuICAgICAgICAgICAgICAgICAgICB1cmwuaG9zdG5hbWUgPSBcInNjcmFwYm94LXByb3h5LXNlcnZlci52ZXJjZWwuYXBwXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCByZXM7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FjaGVkUmVzID0gYXdhaXQgY2FjaGUubWF0Y2godXJsLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGlmIChjYWNoZWRSZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayhgVXNlIGNhY2hlICR7dXJsfWApO1xuICAgICAgICAgICAgICAgICAgICByZXMgPSBjYWNoZWRSZXM7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzID0gYXdhaXQgZmV0Y2godXJsLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXMuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiByZXMuc3RhdHVzVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgcmVzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soYERvd25sb2FkICR7dXJsfWApO1xuICAgICAgICAgICAgICAgICAgICBjYWNoZS5wdXQodXJsLnRvU3RyaW5nKCksIHJlcy5jbG9uZSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudHM6IGF3YWl0IHJlcy50ZXh0KCksXG4gICAgICAgICAgICAgICAgICAgIGxvYWRlcjogZ2V0TG9hZGVyKHJlcylcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KVxuO1xuZnVuY3Rpb24gZ2V0TG9hZGVyKHJlc3BvbnNlKSB7XG4gICAgY29uc3QgdXJsID0gcmVzcG9uc2UudXJsO1xuICAgIGNvbnN0IGV4dCA9IHVybC5zcGxpdChcIi5cIikucG9wKCk7XG4gICAgaWYgKGV4dCAmJiBpc0xvYWRlcihleHQpKSByZXR1cm4gZXh0O1xuICAgIGlmIChleHQgPT09IFwibWpzXCIpIHJldHVybiBcImpzXCI7XG4gICAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldChcIkNvbnRlbnQtVHlwZVwiKSA/PyBcInRleHQvcGxhaW5cIjtcbiAgICByZXR1cm4gaXNMb2FkZXIoY29udGVudFR5cGUpID8gY29udGVudFR5cGUgOiBcInRleHRcIjtcbn1cbmxldCBpbml0aWFsaXplZDtcbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgYXN5bmMgKGV2ZW50KT0+e1xuICAgIGluaXRpYWxpemVkID8/PSBpbml0aWFsaXplKHtcbiAgICAgICAgd2FzbVVSTDogXCIuL2VzYnVpbGQud2FzbVwiLFxuICAgICAgICB3b3JrZXI6IGZhbHNlXG4gICAgfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgaW5pdGlhbGl6ZWQ7XG4gICAgICAgIGNvbnN0IHsgZW50cnlVUkwgLCAuLi5vcHRpb25zIH0gPSBldmVudC5kYXRhO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBidWlsZCh7XG4gICAgICAgICAgICBzdGRpbjoge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBgaW1wb3J0IFwiJHtlbnRyeVVSTH1cIjtgXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgd3JpdGU6IGZhbHNlLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIHBsdWdpbnM6IFtcbiAgICAgICAgICAgICAgICByZW1vdGVMb2FkZXIoe1xuICAgICAgICAgICAgICAgICAgICBiYXNlVVJMOiBuZXcgVVJMKGVudHJ5VVJMKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3VsdC5vdXRwdXRGaWxlc1swXS50ZXh0KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgdHlwZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgZGF0YTogZVxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuIl0sCiAgIm1hcHBpbmdzIjogIkFBQUEsR0FBSSxXQUFZLE9BQU8sZUFDbkIsV0FBYSxPQUFPLGlCQUNwQixrQkFBb0IsT0FBTywwQkFDM0Isb0JBQXNCLE9BQU8sc0JBQzdCLGFBQWUsT0FBTyxVQUFVLGVBQ2hDLGFBQWUsT0FBTyxVQUFVLHFCQUNwQyxRQUFRLElBQ1IsUUFBUSxJQUNSLEdBQUksaUJBQWtCLENBQUMsRUFBSyxFQUFLLElBQVEsSUFBTyxHQUFNLFVB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O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFB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
