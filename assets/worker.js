var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable;Reflect.get,Reflect.set;var __defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t));function encodePacket(e){let t=s=>{if(s===null)r.write8(0);else if(typeof s=="boolean")r.write8(1),r.write8(+s);else if(typeof s=="number")r.write8(2),r.write32(s|0);else if(typeof s=="string")r.write8(3),r.write(encodeUTF8(s));else if(s instanceof Uint8Array)r.write8(4),r.write(s);else if(s instanceof Array){r.write8(5),r.write32(s.length);for(let c of s)t(c)}else{let c=Object.keys(s);r.write8(6),r.write32(c.length);for(let i of c)r.write(encodeUTF8(i)),t(s[i])}},r=new ByteBuffer;return r.write32(0),r.write32(e.id<<1|+!e.isRequest),t(e.value),writeUInt32LE(r.buf,r.len-4,0),r.buf.subarray(0,r.len)}function decodePacket(e){let t=()=>{switch(r.read8()){case 0:return null;case 1:return!!r.read8();case 2:return r.read32();case 3:return decodeUTF8(r.read());case 4:return r.read();case 5:{let n=r.read32(),p=[];for(let l=0;l<n;l++)p.push(t());return p}case 6:{let n=r.read32(),p={};for(let l=0;l<n;l++)p[decodeUTF8(r.read())]=t();return p}default:throw new Error("Invalid packet")}},r=new ByteBuffer(e),s=r.read32(),c=(s&1)==0;s>>>=1;let i=t();if(r.ptr!==e.length)throw new Error("Invalid packet");return{id:s,isRequest:c,value:i}}var ByteBuffer=class{constructor(e=new Uint8Array(1024)){this.buf=e,this.len=0,this.ptr=0}_write(e){if(this.len+e>this.buf.length){let t=new Uint8Array((this.len+e)*2);t.set(this.buf),this.buf=t}return this.len+=e,this.len-e}write8(e){let t=this._write(1);this.buf[t]=e}write32(e){let t=this._write(4);writeUInt32LE(this.buf,e,t)}write(e){let t=this._write(4+e.length);writeUInt32LE(this.buf,e.length,t),this.buf.set(e,t+4)}_read(e){if(this.ptr+e>this.buf.length)throw new Error("Invalid packet");return this.ptr+=e,this.ptr-e}read8(){return this.buf[this._read(1)]}read32(){return readUInt32LE(this.buf,this._read(4))}read(){let e=this.read32(),t=new Uint8Array(e),r=this._read(t.length);return t.set(this.buf.subarray(r,r+e)),t}},encodeUTF8,decodeUTF8;if(typeof TextEncoder!="undefined"&&typeof TextDecoder!="undefined"){let e=new TextEncoder,t=new TextDecoder;encodeUTF8=r=>e.encode(r),decodeUTF8=r=>t.decode(r)}else if(typeof Buffer!="undefined")encodeUTF8=e=>{let t=Buffer.from(e);return t instanceof Uint8Array||(t=new Uint8Array(t)),t},decodeUTF8=e=>{let{buffer:t,byteOffset:r,byteLength:s}=e;return Buffer.from(t,r,s).toString()};else throw new Error("No UTF-8 codec found");function readUInt32LE(e,t){return e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24}function writeUInt32LE(e,t,r){e[r++]=t,e[r++]=t>>8,e[r++]=t>>16,e[r++]=t>>24}function validateTarget(e){if(e+="",e.indexOf(",")>=0)throw new Error(`Invalid target: ${e}`);return e}var canBeAnything=()=>null,mustBeBoolean=e=>typeof e=="boolean"?null:"a boolean",mustBeBooleanOrObject=e=>typeof e=="boolean"||typeof e=="object"&&!Array.isArray(e)?null:"a boolean or an object",mustBeString=e=>typeof e=="string"?null:"a string",mustBeRegExp=e=>e instanceof RegExp?null:"a RegExp object",mustBeInteger=e=>typeof e=="number"&&e===(e|0)?null:"an integer",mustBeFunction=e=>typeof e=="function"?null:"a function",mustBeArray=e=>Array.isArray(e)?null:"an array",mustBeObject=e=>typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"an object",mustBeArrayOrRecord=e=>typeof e=="object"&&e!==null?null:"an array or an object",mustBeObjectOrNull=e=>typeof e=="object"&&!Array.isArray(e)?null:"an object or null",mustBeStringOrBoolean=e=>typeof e=="string"||typeof e=="boolean"?null:"a string or a boolean",mustBeStringOrObject=e=>typeof e=="string"||typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"a string or an object",mustBeStringOrArray=e=>typeof e=="string"||Array.isArray(e)?null:"a string or an array",mustBeStringOrUint8Array=e=>typeof e=="string"||e instanceof Uint8Array?null:"a string or a Uint8Array";function getFlag(e,t,r,s){let c=e[r];if(t[r+""]=!0,c===void 0)return;let i=s(c);if(i!==null)throw new Error(`"${r}" must be ${i}`);return c}function checkForInvalidFlags(e,t,r){for(let s in e)if(!(s in t))throw new Error(`Invalid option ${r}: "${s}"`)}function validateInitializeOptions(e){let t=Object.create(null),r=getFlag(e,t,"wasmURL",mustBeString),s=getFlag(e,t,"worker",mustBeBoolean);return checkForInvalidFlags(e,t,"in startService() call"),{wasmURL:r,worker:s}}function pushLogFlags(e,t,r,s,c){let i=getFlag(t,r,"color",mustBeBoolean),n=getFlag(t,r,"logLevel",mustBeString),p=getFlag(t,r,"logLimit",mustBeInteger);i!==void 0?e.push(`--color=${i}`):s&&e.push("--color=true"),e.push(`--log-level=${n||c}`),e.push(`--log-limit=${p||0}`)}function pushCommonFlags(e,t,r){let s=getFlag(t,r,"legalComments",mustBeString),c=getFlag(t,r,"sourceRoot",mustBeString),i=getFlag(t,r,"sourcesContent",mustBeBoolean),n=getFlag(t,r,"target",mustBeStringOrArray),p=getFlag(t,r,"format",mustBeString),l=getFlag(t,r,"globalName",mustBeString),m=getFlag(t,r,"minify",mustBeBoolean),k=getFlag(t,r,"minifySyntax",mustBeBoolean),D=getFlag(t,r,"minifyWhitespace",mustBeBoolean),A=getFlag(t,r,"minifyIdentifiers",mustBeBoolean),O=getFlag(t,r,"charset",mustBeString),L=getFlag(t,r,"treeShaking",mustBeBoolean),Y=getFlag(t,r,"ignoreAnnotations",mustBeBoolean),J=getFlag(t,r,"jsx",mustBeString),Q=getFlag(t,r,"jsxFactory",mustBeString),H=getFlag(t,r,"jsxFragment",mustBeString),Z=getFlag(t,r,"define",mustBeObject),ee=getFlag(t,r,"pure",mustBeArray),ne=getFlag(t,r,"keepNames",mustBeBoolean);if(s&&e.push(`--legal-comments=${s}`),c!==void 0&&e.push(`--source-root=${c}`),i!==void 0&&e.push(`--sources-content=${i}`),n&&(Array.isArray(n)?e.push(`--target=${Array.from(n).map(validateTarget).join(",")}`):e.push(`--target=${validateTarget(n)}`)),p&&e.push(`--format=${p}`),l&&e.push(`--global-name=${l}`),m&&e.push("--minify"),k&&e.push("--minify-syntax"),D&&e.push("--minify-whitespace"),A&&e.push("--minify-identifiers"),O&&e.push(`--charset=${O}`),L!==void 0&&e.push(`--tree-shaking=${L}`),Y&&e.push("--ignore-annotations"),J&&e.push(`--jsx=${J}`),Q&&e.push(`--jsx-factory=${Q}`),H&&e.push(`--jsx-fragment=${H}`),Z)for(let G in Z){if(G.indexOf("=")>=0)throw new Error(`Invalid define: ${G}`);e.push(`--define:${G}=${Z[G]}`)}if(ee)for(let G of ee)e.push(`--pure:${G}`);ne&&e.push("--keep-names")}function flagsForBuildOptions(e,t,r,s,c){var i;let n=[],p=[],l=Object.create(null),m=null,k=null,D=null;pushLogFlags(n,t,l,r,s),pushCommonFlags(n,t,l);let A=getFlag(t,l,"sourcemap",mustBeStringOrBoolean),O=getFlag(t,l,"bundle",mustBeBoolean),L=getFlag(t,l,"watch",mustBeBooleanOrObject),Y=getFlag(t,l,"splitting",mustBeBoolean),J=getFlag(t,l,"preserveSymlinks",mustBeBoolean),Q=getFlag(t,l,"metafile",mustBeBoolean),H=getFlag(t,l,"outfile",mustBeString),Z=getFlag(t,l,"outdir",mustBeString),ee=getFlag(t,l,"outbase",mustBeString),ne=getFlag(t,l,"platform",mustBeString),G=getFlag(t,l,"tsconfig",mustBeString),ie=getFlag(t,l,"resolveExtensions",mustBeArray),ae=getFlag(t,l,"nodePaths",mustBeArray),oe=getFlag(t,l,"mainFields",mustBeArray),ce=getFlag(t,l,"conditions",mustBeArray),d=getFlag(t,l,"external",mustBeArray),u=getFlag(t,l,"loader",mustBeObject),a=getFlag(t,l,"outExtension",mustBeObject),f=getFlag(t,l,"publicPath",mustBeString),U=getFlag(t,l,"entryNames",mustBeString),T=getFlag(t,l,"chunkNames",mustBeString),_=getFlag(t,l,"assetNames",mustBeString),I=getFlag(t,l,"inject",mustBeArray),$=getFlag(t,l,"banner",mustBeObject),R=getFlag(t,l,"footer",mustBeObject),y=getFlag(t,l,"entryPoints",mustBeArrayOrRecord),C=getFlag(t,l,"absWorkingDir",mustBeString),E=getFlag(t,l,"stdin",mustBeObject),x=(i=getFlag(t,l,"write",mustBeBoolean))!=null?i:c,S=getFlag(t,l,"allowOverwrite",mustBeBoolean),g=getFlag(t,l,"incremental",mustBeBoolean)===!0;if(l.plugins=!0,checkForInvalidFlags(t,l,`in ${e}() call`),A&&n.push(`--sourcemap${A===!0?"":`=${A}`}`),O&&n.push("--bundle"),S&&n.push("--allow-overwrite"),L)if(n.push("--watch"),typeof L=="boolean")D={};else{let o=Object.create(null),w=getFlag(L,o,"onRebuild",mustBeFunction);checkForInvalidFlags(L,o,`on "watch" in ${e}() call`),D={onRebuild:w}}if(Y&&n.push("--splitting"),J&&n.push("--preserve-symlinks"),Q&&n.push("--metafile"),H&&n.push(`--outfile=${H}`),Z&&n.push(`--outdir=${Z}`),ee&&n.push(`--outbase=${ee}`),ne&&n.push(`--platform=${ne}`),G&&n.push(`--tsconfig=${G}`),ie){let o=[];for(let w of ie){if(w+="",w.indexOf(",")>=0)throw new Error(`Invalid resolve extension: ${w}`);o.push(w)}n.push(`--resolve-extensions=${o.join(",")}`)}if(f&&n.push(`--public-path=${f}`),U&&n.push(`--entry-names=${U}`),T&&n.push(`--chunk-names=${T}`),_&&n.push(`--asset-names=${_}`),oe){let o=[];for(let w of oe){if(w+="",w.indexOf(",")>=0)throw new Error(`Invalid main field: ${w}`);o.push(w)}n.push(`--main-fields=${o.join(",")}`)}if(ce){let o=[];for(let w of ce){if(w+="",w.indexOf(",")>=0)throw new Error(`Invalid condition: ${w}`);o.push(w)}n.push(`--conditions=${o.join(",")}`)}if(d)for(let o of d)n.push(`--external:${o}`);if($)for(let o in $){if(o.indexOf("=")>=0)throw new Error(`Invalid banner file type: ${o}`);n.push(`--banner:${o}=${$[o]}`)}if(R)for(let o in R){if(o.indexOf("=")>=0)throw new Error(`Invalid footer file type: ${o}`);n.push(`--footer:${o}=${R[o]}`)}if(I)for(let o of I)n.push(`--inject:${o}`);if(u)for(let o in u){if(o.indexOf("=")>=0)throw new Error(`Invalid loader extension: ${o}`);n.push(`--loader:${o}=${u[o]}`)}if(a)for(let o in a){if(o.indexOf("=")>=0)throw new Error(`Invalid out extension: ${o}`);n.push(`--out-extension:${o}=${a[o]}`)}if(y)if(Array.isArray(y))for(let o of y)p.push(["",o+""]);else for(let[o,w]of Object.entries(y))p.push([o+"",w+""]);if(E){let o=Object.create(null),w=getFlag(E,o,"contents",mustBeString),j=getFlag(E,o,"resolveDir",mustBeString),h=getFlag(E,o,"sourcefile",mustBeString),v=getFlag(E,o,"loader",mustBeString);checkForInvalidFlags(E,o,'in "stdin" object'),h&&n.push(`--sourcefile=${h}`),v&&n.push(`--loader=${v}`),j&&(k=j+""),m=w?w+"":""}let b=[];if(ae)for(let o of ae)o+="",b.push(o);return{entries:p,flags:n,write:x,stdinContents:m,stdinResolveDir:k,absWorkingDir:C,incremental:g,nodePaths:b,watch:D}}function flagsForTransformOptions(e,t,r,s){let c=[],i=Object.create(null);pushLogFlags(c,t,i,r,s),pushCommonFlags(c,t,i);let n=getFlag(t,i,"sourcemap",mustBeStringOrBoolean),p=getFlag(t,i,"tsconfigRaw",mustBeStringOrObject),l=getFlag(t,i,"sourcefile",mustBeString),m=getFlag(t,i,"loader",mustBeString),k=getFlag(t,i,"banner",mustBeString),D=getFlag(t,i,"footer",mustBeString);return checkForInvalidFlags(t,i,`in ${e}() call`),n&&c.push(`--sourcemap=${n===!0?"external":n}`),p&&c.push(`--tsconfig-raw=${typeof p=="string"?p:JSON.stringify(p)}`),l&&c.push(`--sourcefile=${l}`),m&&c.push(`--loader=${m}`),k&&c.push(`--banner=${k}`),D&&c.push(`--footer=${D}`),c}function createChannel(e){let t=new Map,r=new Map,s=new Map,c=new Map,i=0,n=!1,p=0,l=0,m=new Uint8Array(16*1024),k=0,D=d=>{let u=k+d.length;if(u>m.length){let f=new Uint8Array(u*2);f.set(m),m=f}m.set(d,k),k+=d.length;let a=0;for(;a+4<=k;){let f=readUInt32LE(m,a);if(a+4+f>k)break;a+=4,Q(m.subarray(a,a+f)),a+=f}a>0&&(m.copyWithin(0,a,k),k-=a)},A=()=>{n=!0;for(let d of t.values())d("The service was stopped",null);t.clear();for(let d of c.values())d.onWait("The service was stopped");c.clear();for(let d of s.values())try{d(new Error("The service was stopped"),null)}catch(u){console.error(u)}s.clear()},O=(d,u,a)=>{if(n)return a("The service is no longer running",null);let f=p++;t.set(f,(U,T)=>{try{a(U,T)}finally{d&&d.unref()}}),d&&d.ref(),e.writeToStdin(encodePacket({id:f,isRequest:!0,value:u}))},L=(d,u)=>{if(n)throw new Error("The service is no longer running");e.writeToStdin(encodePacket({id:d,isRequest:!1,value:u}))},Y=async(d,u)=>{try{switch(u.command){case"ping":{L(d,{});break}case"start":{let a=r.get(u.key);a?L(d,await a(u)):L(d,{});break}case"resolve":{let a=r.get(u.key);a?L(d,await a(u)):L(d,{});break}case"load":{let a=r.get(u.key);a?L(d,await a(u)):L(d,{});break}case"serve-request":{let a=c.get(u.serveID);a&&a.onRequest&&a.onRequest(u.args),L(d,{});break}case"serve-wait":{let a=c.get(u.serveID);a&&a.onWait(u.error),L(d,{});break}case"watch-rebuild":{let a=s.get(u.watchID);try{a&&a(null,u.args)}catch(f){console.error(f)}L(d,{});break}default:throw new Error("Invalid command: "+u.command)}}catch(a){L(d,{errors:[extractErrorMessageV8(a,e,null,void 0,"")]})}},J=!0,Q=d=>{if(J){J=!1;let a=String.fromCharCode(...d);if(a!=="0.13.11")throw new Error(`Cannot start service: Host version "0.13.11" does not match binary version ${JSON.stringify(a)}`);return}let u=decodePacket(d);if(u.isRequest)Y(u.id,u.value);else{let a=t.get(u.id);t.delete(u.id),u.value.error?a(u.value.error,{}):a(null,u.value)}},H=async(d,u,a,f)=>{let U=[],T=[],_={},I={},$=0,R=0,y=[];u=[...u];for(let S of u){let g={};if(typeof S!="object")throw new Error(`Plugin at index ${R} must be an object`);let b=getFlag(S,g,"name",mustBeString);if(typeof b!="string"||b==="")throw new Error(`Plugin at index ${R} is missing a name`);try{let o=getFlag(S,g,"setup",mustBeFunction);if(typeof o!="function")throw new Error("Plugin is missing a setup function");checkForInvalidFlags(S,g,`on plugin ${JSON.stringify(b)}`);let w={name:b,onResolve:[],onLoad:[]};R++;let j=o({initialOptions:d,onStart(h){let v='This error came from the "onStart" callback registered here',F=extractCallerV8(new Error(v),e,"onStart");U.push({name:b,callback:h,note:F})},onEnd(h){let v='This error came from the "onEnd" callback registered here',F=extractCallerV8(new Error(v),e,"onEnd");T.push({name:b,callback:h,note:F})},onResolve(h,v){let F='This error came from the "onResolve" callback registered here',N=extractCallerV8(new Error(F),e,"onResolve"),B={},V=getFlag(h,B,"filter",mustBeRegExp),W=getFlag(h,B,"namespace",mustBeString);if(checkForInvalidFlags(h,B,`in onResolve() call for plugin ${JSON.stringify(b)}`),V==null)throw new Error("onResolve() call is missing a filter");let M=$++;_[M]={name:b,callback:v,note:N},w.onResolve.push({id:M,filter:V.source,namespace:W||""})},onLoad(h,v){let F='This error came from the "onLoad" callback registered here',N=extractCallerV8(new Error(F),e,"onLoad"),B={},V=getFlag(h,B,"filter",mustBeRegExp),W=getFlag(h,B,"namespace",mustBeString);if(checkForInvalidFlags(h,B,`in onLoad() call for plugin ${JSON.stringify(b)}`),V==null)throw new Error("onLoad() call is missing a filter");let M=$++;I[M]={name:b,callback:v,note:N},w.onLoad.push({id:M,filter:V.source,namespace:W||""})}});j&&await j,y.push(w)}catch(o){return{ok:!1,error:o,pluginName:b}}}const C=async S=>{switch(S.command){case"start":{let g={errors:[],warnings:[]};return await Promise.all(U.map(async({name:b,callback:o,note:w})=>{try{let j=await o();if(j!=null){if(typeof j!="object")throw new Error(`Expected onStart() callback in plugin ${JSON.stringify(b)} to return an object`);let h={},v=getFlag(j,h,"errors",mustBeArray),F=getFlag(j,h,"warnings",mustBeArray);checkForInvalidFlags(j,h,`from onStart() callback in plugin ${JSON.stringify(b)}`),v!=null&&g.errors.push(...sanitizeMessages(v,"errors",f,b)),F!=null&&g.warnings.push(...sanitizeMessages(F,"warnings",f,b))}}catch(j){g.errors.push(extractErrorMessageV8(j,e,f,w&&w(),b))}})),g}case"resolve":{let g={},b="",o,w;for(let j of S.ids)try{({name:b,callback:o,note:w}=_[j]);let h=await o({path:S.path,importer:S.importer,namespace:S.namespace,resolveDir:S.resolveDir,kind:S.kind,pluginData:f.load(S.pluginData)});if(h!=null){if(typeof h!="object")throw new Error(`Expected onResolve() callback in plugin ${JSON.stringify(b)} to return an object`);let v={},F=getFlag(h,v,"pluginName",mustBeString),N=getFlag(h,v,"path",mustBeString),B=getFlag(h,v,"namespace",mustBeString),V=getFlag(h,v,"external",mustBeBoolean),W=getFlag(h,v,"sideEffects",mustBeBoolean),M=getFlag(h,v,"pluginData",canBeAnything),te=getFlag(h,v,"errors",mustBeArray),re=getFlag(h,v,"warnings",mustBeArray),P=getFlag(h,v,"watchFiles",mustBeArray),z=getFlag(h,v,"watchDirs",mustBeArray);checkForInvalidFlags(h,v,`from onResolve() callback in plugin ${JSON.stringify(b)}`),g.id=j,F!=null&&(g.pluginName=F),N!=null&&(g.path=N),B!=null&&(g.namespace=B),V!=null&&(g.external=V),W!=null&&(g.sideEffects=W),M!=null&&(g.pluginData=f.store(M)),te!=null&&(g.errors=sanitizeMessages(te,"errors",f,b)),re!=null&&(g.warnings=sanitizeMessages(re,"warnings",f,b)),P!=null&&(g.watchFiles=sanitizeStringArray(P,"watchFiles")),z!=null&&(g.watchDirs=sanitizeStringArray(z,"watchDirs"));break}}catch(h){return{id:j,errors:[extractErrorMessageV8(h,e,f,w&&w(),b)]}}return g}case"load":{let g={},b="",o,w;for(let j of S.ids)try{({name:b,callback:o,note:w}=I[j]);let h=await o({path:S.path,namespace:S.namespace,pluginData:f.load(S.pluginData)});if(h!=null){if(typeof h!="object")throw new Error(`Expected onLoad() callback in plugin ${JSON.stringify(b)} to return an object`);let v={},F=getFlag(h,v,"pluginName",mustBeString),N=getFlag(h,v,"contents",mustBeStringOrUint8Array),B=getFlag(h,v,"resolveDir",mustBeString),V=getFlag(h,v,"pluginData",canBeAnything),W=getFlag(h,v,"loader",mustBeString),M=getFlag(h,v,"errors",mustBeArray),te=getFlag(h,v,"warnings",mustBeArray),re=getFlag(h,v,"watchFiles",mustBeArray),P=getFlag(h,v,"watchDirs",mustBeArray);checkForInvalidFlags(h,v,`from onLoad() callback in plugin ${JSON.stringify(b)}`),g.id=j,F!=null&&(g.pluginName=F),N instanceof Uint8Array?g.contents=N:N!=null&&(g.contents=encodeUTF8(N)),B!=null&&(g.resolveDir=B),V!=null&&(g.pluginData=f.store(V)),W!=null&&(g.loader=W),M!=null&&(g.errors=sanitizeMessages(M,"errors",f,b)),te!=null&&(g.warnings=sanitizeMessages(te,"warnings",f,b)),re!=null&&(g.watchFiles=sanitizeStringArray(re,"watchFiles")),P!=null&&(g.watchDirs=sanitizeStringArray(P,"watchDirs"));break}}catch(h){return{id:j,errors:[extractErrorMessageV8(h,e,f,w&&w(),b)]}}return g}default:throw new Error("Invalid command: "+S.command)}};let E=(S,g,b)=>b();T.length>0&&(E=(S,g,b)=>{(async()=>{for(const{name:o,callback:w,note:j}of T)try{await w(S)}catch(h){S.errors.push(await new Promise(v=>g(h,o,j&&j(),v)))}})().then(b)});let x=0;return{ok:!0,requestPlugins:y,runOnEndCallbacks:E,pluginRefs:{ref(){++x==1&&r.set(a,C)},unref(){--x==0&&r.delete(a)}}}},Z=(d,u,a)=>{let f={},U=getFlag(u,f,"port",mustBeInteger),T=getFlag(u,f,"host",mustBeString),_=getFlag(u,f,"servedir",mustBeString),I=getFlag(u,f,"onRequest",mustBeFunction),$=i++,R,y=new Promise((C,E)=>{R=x=>{c.delete($),x!==null?E(new Error(x)):C()}});return a.serve={serveID:$},checkForInvalidFlags(u,f,"in serve() call"),U!==void 0&&(a.serve.port=U),T!==void 0&&(a.serve.host=T),_!==void 0&&(a.serve.servedir=_),c.set($,{onRequest:I,onWait:R}),{wait:y,stop(){O(d,{command:"serve-stop",serveID:$},()=>{})}}};const ee="warning",ne="silent";let G=d=>{let u=l++;const a=createObjectStash();let f,{refs:U,options:T,isTTY:_,callback:I}=d;if(typeof T=="object"){let y=T.plugins;if(y!==void 0){if(!Array.isArray(y))throw new Error('"plugins" must be an array');f=y}}let $=(y,C,E,x)=>{let S=[];try{pushLogFlags(S,T,{},_,ee)}catch(b){}const g=extractErrorMessageV8(y,e,a,E,C);O(U,{command:"error",flags:S,error:g},()=>{g.detail=a.load(g.detail),x(g)})},R=(y,C)=>{$(y,C,void 0,E=>{I(failureErrorWithLog("Build failed",[E],[]),null)})};if(f&&f.length>0){if(e.isSync)return R(new Error("Cannot use plugins in synchronous API calls"),"");H(T,f,u,a).then(y=>{if(!y.ok)R(y.error,y.pluginName);else try{ie(__spreadProps(__spreadValues({},d),{key:u,details:a,logPluginError:$,requestPlugins:y.requestPlugins,runOnEndCallbacks:y.runOnEndCallbacks,pluginRefs:y.pluginRefs}))}catch(C){R(C,"")}},y=>R(y,""))}else try{ie(__spreadProps(__spreadValues({},d),{key:u,details:a,logPluginError:$,requestPlugins:null,runOnEndCallbacks:(y,C,E)=>E(),pluginRefs:null}))}catch(y){R(y,"")}},ie=({callName:d,refs:u,serveOptions:a,options:f,isTTY:U,defaultWD:T,callback:_,key:I,details:$,logPluginError:R,requestPlugins:y,runOnEndCallbacks:C,pluginRefs:E})=>{const x={ref(){E&&E.ref(),u&&u.ref()},unref(){E&&E.unref(),u&&u.unref()}};let S=!e.isBrowser,{entries:g,flags:b,write:o,stdinContents:w,stdinResolveDir:j,absWorkingDir:h,incremental:v,nodePaths:F,watch:N}=flagsForBuildOptions(d,f,U,ee,S),B={command:"build",key:I,entries:g,flags:b,write:o,stdinContents:w,stdinResolveDir:j,absWorkingDir:h||T,incremental:v,nodePaths:F};y&&(B.plugins=y);let V=a&&Z(x,a,B),W,M,te=(P,z)=>{P.outputFiles&&(z.outputFiles=P.outputFiles.map(convertOutputFiles)),P.metafile&&(z.metafile=JSON.parse(P.metafile)),P.writeToStdout!==void 0&&console.log(decodeUTF8(P.writeToStdout).replace(/\n$/,""))},re=(P,z)=>{let q={errors:replaceDetailsInMessages(P.errors,$),warnings:replaceDetailsInMessages(P.warnings,$)};te(P,q),C(q,R,()=>{if(q.errors.length>0)return z(failureErrorWithLog("Build failed",q.errors,q.warnings),null);if(P.rebuildID!==void 0){if(!W){let X=!1;W=()=>new Promise((le,se)=>{if(X||n)throw new Error("Cannot rebuild");O(x,{command:"rebuild",rebuildID:P.rebuildID},(K,fe)=>{if(K)return z(failureErrorWithLog("Build failed",[{pluginName:"",text:K,location:null,notes:[],detail:void 0}],[]),null);re(fe,(ue,de)=>{ue?se(ue):le(de)})})}),x.ref(),W.dispose=()=>{X||(X=!0,O(x,{command:"rebuild-dispose",rebuildID:P.rebuildID},()=>{}),x.unref())}}q.rebuild=W}if(P.watchID!==void 0){if(!M){let X=!1;x.ref(),M=()=>{X||(X=!0,s.delete(P.watchID),O(x,{command:"watch-stop",watchID:P.watchID},()=>{}),x.unref())},N&&s.set(P.watchID,(le,se)=>{if(le){N.onRebuild&&N.onRebuild(le,null);return}let K={errors:replaceDetailsInMessages(se.errors,$),warnings:replaceDetailsInMessages(se.warnings,$)};te(se,K),C(K,R,()=>{if(K.errors.length>0){N.onRebuild&&N.onRebuild(failureErrorWithLog("Build failed",K.errors,K.warnings),null);return}se.rebuildID!==void 0&&(K.rebuild=W),K.stop=M,N.onRebuild&&N.onRebuild(null,K)})})}q.stop=M}z(null,q)})};if(o&&e.isBrowser)throw new Error('Cannot enable "write" in the browser');if(v&&e.isSync)throw new Error('Cannot use "incremental" with a synchronous build');if(N&&e.isSync)throw new Error('Cannot use "watch" with a synchronous build');O(x,B,(P,z)=>{if(P)return _(new Error(P),null);if(V){let q=z,X=!1;x.ref();let le={port:q.port,host:q.host,wait:V.wait,stop(){X||(X=!0,V.stop(),x.unref())}};return x.ref(),V.wait.then(x.unref,x.unref),_(null,le)}return re(z,_)})};return{readFromStdout:D,afterClose:A,service:{buildOrServe:G,transform:({callName:d,refs:u,input:a,options:f,isTTY:U,fs:T,callback:_})=>{const I=createObjectStash();let $=R=>{try{if(typeof a!="string")throw new Error('The input to "transform" must be a string');let y=flagsForTransformOptions(d,f,U,ne);O(u,{command:"transform",flags:y,inputFS:R!==null,input:R!==null?R:a},(E,x)=>{if(E)return _(new Error(E),null);let S=replaceDetailsInMessages(x.errors,I),g=replaceDetailsInMessages(x.warnings,I),b=1,o=()=>--b==0&&_(null,{warnings:g,code:x.code,map:x.map});if(S.length>0)return _(failureErrorWithLog("Transform failed",S,g),null);x.codeFS&&(b++,T.readFile(x.code,(w,j)=>{w!==null?_(w,null):(x.code=j,o())})),x.mapFS&&(b++,T.readFile(x.map,(w,j)=>{w!==null?_(w,null):(x.map=j,o())})),o()})}catch(y){let C=[];try{pushLogFlags(C,f,{},U,ne)}catch(x){}const E=extractErrorMessageV8(y,e,I,void 0,"");O(u,{command:"error",flags:C,error:E},()=>{E.detail=I.load(E.detail),_(failureErrorWithLog("Transform failed",[E],[]),null)})}};if(typeof a=="string"&&a.length>1024*1024){let R=$;$=()=>T.writeFile(a,R)}$(null)},formatMessages:({callName:d,refs:u,messages:a,options:f,callback:U})=>{let T=sanitizeMessages(a,"messages",null,"");if(!f)throw new Error(`Missing second argument in ${d}() call`);let _={},I=getFlag(f,_,"kind",mustBeString),$=getFlag(f,_,"color",mustBeBoolean),R=getFlag(f,_,"terminalWidth",mustBeInteger);if(checkForInvalidFlags(f,_,`in ${d}() call`),I===void 0)throw new Error(`Missing "kind" in ${d}() call`);if(I!=="error"&&I!=="warning")throw new Error(`Expected "kind" to be "error" or "warning" in ${d}() call`);let y={command:"format-msgs",messages:T,isWarning:I==="warning"};$!==void 0&&(y.color=$),R!==void 0&&(y.terminalWidth=R),O(u,y,(C,E)=>{if(C)return U(new Error(C),null);U(null,E.messages)})},analyzeMetafile:({callName:d,refs:u,metafile:a,options:f,callback:U})=>{f===void 0&&(f={});let T={},_=getFlag(f,T,"color",mustBeBoolean),I=getFlag(f,T,"verbose",mustBeBoolean);checkForInvalidFlags(f,T,`in ${d}() call`);let $={command:"analyze-metafile",metafile:a};_!==void 0&&($.color=_),I!==void 0&&($.verbose=I),O(u,$,(R,y)=>{if(R)return U(new Error(R),null);U(null,y.result)})}}}}function createObjectStash(){const e=new Map;let t=0;return{load(r){return e.get(r)},store(r){if(r===void 0)return-1;const s=t++;return e.set(s,r),s}}}function extractCallerV8(e,t,r){let s,c=!1;return()=>{if(c)return s;c=!0;try{let i=(e.stack+"").split(`
`);i.splice(1,1);let n=parseStackLinesV8(t,i,r);if(n)return s={text:e.message,location:n},s}catch(i){}}}function extractErrorMessageV8(e,t,r,s,c){let i="Internal error",n=null;try{i=(e&&e.message||e)+""}catch(p){}try{n=parseStackLinesV8(t,(e.stack+"").split(`
`),"")}catch(p){}return{pluginName:c,text:i,location:n,notes:s?[s]:[],detail:r?r.store(e):-1}}function parseStackLinesV8(e,t,r){let s="    at ";if(e.readFileSync&&!t[0].startsWith(s)&&t[1].startsWith(s))for(let c=1;c<t.length;c++){let i=t[c];if(!!i.startsWith(s))for(i=i.slice(s.length);;){let n=/^(?:new |async )?\S+ \((.*)\)$/.exec(i);if(n){i=n[1];continue}if(n=/^eval at \S+ \((.*)\)(?:, \S+:\d+:\d+)?$/.exec(i),n){i=n[1];continue}if(n=/^(\S+):(\d+):(\d+)$/.exec(i),n){let p;try{p=e.readFileSync(n[1],"utf8")}catch(D){break}let l=p.split(/\r\n|\r|\n|\u2028|\u2029/)[+n[2]-1]||"",m=+n[3]-1,k=l.slice(m,m+r.length)===r?r.length:0;return{file:n[1],namespace:"file",line:+n[2],column:encodeUTF8(l.slice(0,m)).length,length:encodeUTF8(l.slice(m,m+k)).length,lineText:l+`
`+t.slice(1).join(`
`),suggestion:""}}break}}return null}function failureErrorWithLog(e,t,r){let s=5,c=t.length<1?"":` with ${t.length} error${t.length<2?"":"s"}:`+t.slice(0,s+1).map((n,p)=>{if(p===s)return`
...`;if(!n.location)return`
error: ${n.text}`;let{file:l,line:m,column:k}=n.location,D=n.pluginName?`[plugin: ${n.pluginName}] `:"";return`
${l}:${m}:${k}: error: ${D}${n.text}`}).join(""),i=new Error(`${e}${c}`);return i.errors=t,i.warnings=r,i}function replaceDetailsInMessages(e,t){for(const r of e)r.detail=t.load(r.detail);return e}function sanitizeLocation(e,t){if(e==null)return null;let r={},s=getFlag(e,r,"file",mustBeString),c=getFlag(e,r,"namespace",mustBeString),i=getFlag(e,r,"line",mustBeInteger),n=getFlag(e,r,"column",mustBeInteger),p=getFlag(e,r,"length",mustBeInteger),l=getFlag(e,r,"lineText",mustBeString),m=getFlag(e,r,"suggestion",mustBeString);return checkForInvalidFlags(e,r,t),{file:s||"",namespace:c||"",line:i||0,column:n||0,length:p||0,lineText:l||"",suggestion:m||""}}function sanitizeMessages(e,t,r,s){let c=[],i=0;for(const n of e){let p={},l=getFlag(n,p,"pluginName",mustBeString),m=getFlag(n,p,"text",mustBeString),k=getFlag(n,p,"location",mustBeObjectOrNull),D=getFlag(n,p,"notes",mustBeArray),A=getFlag(n,p,"detail",canBeAnything),O=`in element ${i} of "${t}"`;checkForInvalidFlags(n,p,O);let L=[];if(D)for(const Y of D){let J={},Q=getFlag(Y,J,"text",mustBeString),H=getFlag(Y,J,"location",mustBeObjectOrNull);checkForInvalidFlags(Y,J,O),L.push({text:Q||"",location:sanitizeLocation(H,O)})}c.push({pluginName:l||s,text:m||"",location:sanitizeLocation(k,O),notes:L,detail:r?r.store(A):-1}),i++}return c}function sanitizeStringArray(e,t){const r=[];for(const s of e){if(typeof s!="string")throw new Error(`${JSON.stringify(t)} must be an array of strings`);r.push(s)}return r}function convertOutputFiles({path:e,contents:t}){let r=null;return{path:e,contents:t,get text(){return r===null&&(r=decodeUTF8(t)),r}}}var build=e=>ensureServiceIsRunning().build(e),initializePromise,longLivedService,ensureServiceIsRunning=()=>{if(longLivedService)return longLivedService;throw initializePromise?new Error('You need to wait for the promise returned from "initialize" to be resolved before calling this'):new Error('You need to call "initialize" before calling this')},initialize=e=>{e=validateInitializeOptions(e||{});let t=e.wasmURL,r=e.worker!==!1;if(!t)throw new Error('Must provide the "wasmURL" option');if(t+="",initializePromise)throw new Error('Cannot call "initialize" more than once');return initializePromise=startRunningService(t,r),initializePromise.catch(()=>{initializePromise=void 0}),initializePromise},startRunningService=async(e,t)=>{let r=await fetch(e);if(!r.ok)throw new Error(`Failed to download ${JSON.stringify(e)}`);let s=await r.arrayBuffer(),c=`{let global={};for(let o=self;o;o=Object.getPrototypeOf(o))for(let k of Object.getOwnPropertyNames(o))if(!(k in global))Object.defineProperty(global,k,{get:()=>self[k]});// Copyright 2018 The Go Authors. All rights reserved.
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.

(() => {
	// Map multiple JavaScript environments to a single common API,
	// preferring web standards over Node.js API.
	//
	// Environments considered:
	// - Browsers
	// - Node.js
	// - Electron
	// - Parcel
	// - Webpack

	if (typeof global !== "undefined") {
		// global already exists
	} else if (typeof window !== "undefined") {
		window.global = window;
	} else if (typeof self !== "undefined") {
		self.global = self;
	} else {
		throw new Error("cannot export Go (neither global, window nor self is defined)");
	}

	if (!global.require && typeof require !== "undefined") {
		global.require = require;
	}

	if (!global.fs && global.require) {
		const fs = require("fs");
		if (typeof fs === "object" && fs !== null && Object.keys(fs).length !== 0) {
			
    global.fs = Object.assign({}, fs, {
      // Hack around a Unicode bug in node: https://github.com/nodejs/node/issues/24550
      write(fd, buf, offset, length, position, callback) {
        if (offset === 0 && length === buf.length && position === null) {
          if (fd === process.stdout.fd) {
            try {
              process.stdout.write(buf, err => err ? callback(err, 0, null) : callback(null, length, buf));
            } catch (err) {
              callback(err, 0, null);
            }
            return;
          }
          if (fd === process.stderr.fd) {
            try {
              process.stderr.write(buf, err => err ? callback(err, 0, null) : callback(null, length, buf));
            } catch (err) {
              callback(err, 0, null);
            }
            return;
          }
        }
        fs.write(fd, buf, offset, length, position, callback);
      },
    });
  
		}
	}

	const enosys = () => {
		const err = new Error("not implemented");
		err.code = "ENOSYS";
		return err;
	};

	if (!global.fs) {
		let outputBuf = "";
		global.fs = {
			constants: { O_WRONLY: -1, O_RDWR: -1, O_CREAT: -1, O_TRUNC: -1, O_APPEND: -1, O_EXCL: -1 }, // unused
			writeSync(fd, buf) {
				outputBuf += decoder.decode(buf);
				const nl = outputBuf.lastIndexOf("\\n");
				if (nl != -1) {
					console.log(outputBuf.substr(0, nl));
					outputBuf = outputBuf.substr(nl + 1);
				}
				return buf.length;
			},
			write(fd, buf, offset, length, position, callback) {
				if (offset !== 0 || length !== buf.length || position !== null) {
					callback(enosys());
					return;
				}
				const n = this.writeSync(fd, buf);
				callback(null, n);
			},
			chmod(path, mode, callback) { callback(enosys()); },
			chown(path, uid, gid, callback) { callback(enosys()); },
			close(fd, callback) { callback(enosys()); },
			fchmod(fd, mode, callback) { callback(enosys()); },
			fchown(fd, uid, gid, callback) { callback(enosys()); },
			fstat(fd, callback) { callback(enosys()); },
			fsync(fd, callback) { callback(null); },
			ftruncate(fd, length, callback) { callback(enosys()); },
			lchown(path, uid, gid, callback) { callback(enosys()); },
			link(path, link, callback) { callback(enosys()); },
			lstat(path, callback) { callback(enosys()); },
			mkdir(path, perm, callback) { callback(enosys()); },
			open(path, flags, mode, callback) { callback(enosys()); },
			read(fd, buffer, offset, length, position, callback) { callback(enosys()); },
			readdir(path, callback) { callback(enosys()); },
			readlink(path, callback) { callback(enosys()); },
			rename(from, to, callback) { callback(enosys()); },
			rmdir(path, callback) { callback(enosys()); },
			stat(path, callback) { callback(enosys()); },
			symlink(path, link, callback) { callback(enosys()); },
			truncate(path, length, callback) { callback(enosys()); },
			unlink(path, callback) { callback(enosys()); },
			utimes(path, atime, mtime, callback) { callback(enosys()); },
		};
	}

	if (!global.process) {
		global.process = {
			getuid() { return -1; },
			getgid() { return -1; },
			geteuid() { return -1; },
			getegid() { return -1; },
			getgroups() { throw enosys(); },
			pid: -1,
			ppid: -1,
			umask() { throw enosys(); },
			cwd() { throw enosys(); },
			chdir() { throw enosys(); },
		}
	}

	if (!global.crypto && global.require) {
		const nodeCrypto = require("crypto");
		global.crypto = {
			getRandomValues(b) {
				nodeCrypto.randomFillSync(b);
			},
		};
	}
	if (!global.crypto) {
		throw new Error("global.crypto is not available, polyfill required (getRandomValues only)");
	}

	if (!global.performance) {
		global.performance = {
			now() {
				const [sec, nsec] = process.hrtime();
				return sec * 1000 + nsec / 1000000;
			},
		};
	}

	if (!global.TextEncoder && global.require) {
		global.TextEncoder = require("util").TextEncoder;
	}
	if (!global.TextEncoder) {
		throw new Error("global.TextEncoder is not available, polyfill required");
	}

	if (!global.TextDecoder && global.require) {
		global.TextDecoder = require("util").TextDecoder;
	}
	if (!global.TextDecoder) {
		throw new Error("global.TextDecoder is not available, polyfill required");
	}

	// End of polyfills for common API.

	const encoder = new TextEncoder("utf-8");
	const decoder = new TextDecoder("utf-8");

	global.Go = class {
		constructor() {
			this.argv = ["js"];
			this.env = {};
			this.exit = (code) => {
				if (code !== 0) {
					console.warn("exit code:", code);
				}
			};
			this._exitPromise = new Promise((resolve) => {
				this._resolveExitPromise = resolve;
			});
			this._pendingEvent = null;
			this._scheduledTimeouts = new Map();
			this._nextCallbackTimeoutID = 1;

			const setInt64 = (addr, v) => {
				this.mem.setUint32(addr + 0, v, true);
				this.mem.setUint32(addr + 4, Math.floor(v / 4294967296), true);
			}

			const getInt64 = (addr) => {
				const low = this.mem.getUint32(addr + 0, true);
				const high = this.mem.getInt32(addr + 4, true);
				return low + high * 4294967296;
			}

			const loadValue = (addr) => {
				const f = this.mem.getFloat64(addr, true);
				if (f === 0) {
					return undefined;
				}
				if (!isNaN(f)) {
					return f;
				}

				const id = this.mem.getUint32(addr, true);
				return this._values[id];
			}

			const storeValue = (addr, v) => {
				const nanHead = 0x7FF80000;

				if (typeof v === "number" && v !== 0) {
					if (isNaN(v)) {
						this.mem.setUint32(addr + 4, nanHead, true);
						this.mem.setUint32(addr, 0, true);
						return;
					}
					this.mem.setFloat64(addr, v, true);
					return;
				}

				if (v === undefined) {
					this.mem.setFloat64(addr, 0, true);
					return;
				}

				let id = this._ids.get(v);
				if (id === undefined) {
					id = this._idPool.pop();
					if (id === undefined) {
						id = this._values.length;
					}
					this._values[id] = v;
					this._goRefCounts[id] = 0;
					this._ids.set(v, id);
				}
				this._goRefCounts[id]++;
				let typeFlag = 0;
				switch (typeof v) {
					case "object":
						if (v !== null) {
							typeFlag = 1;
						}
						break;
					case "string":
						typeFlag = 2;
						break;
					case "symbol":
						typeFlag = 3;
						break;
					case "function":
						typeFlag = 4;
						break;
				}
				this.mem.setUint32(addr + 4, nanHead | typeFlag, true);
				this.mem.setUint32(addr, id, true);
			}

			const loadSlice = (addr) => {
				const array = getInt64(addr + 0);
				const len = getInt64(addr + 8);
				return new Uint8Array(this._inst.exports.mem.buffer, array, len);
			}

			const loadSliceOfValues = (addr) => {
				const array = getInt64(addr + 0);
				const len = getInt64(addr + 8);
				const a = new Array(len);
				for (let i = 0; i < len; i++) {
					a[i] = loadValue(array + i * 8);
				}
				return a;
			}

			const loadString = (addr) => {
				const saddr = getInt64(addr + 0);
				const len = getInt64(addr + 8);
				return decoder.decode(new DataView(this._inst.exports.mem.buffer, saddr, len));
			}

			const timeOrigin = Date.now() - performance.now();
			this.importObject = {
				go: {
					// Go's SP does not change as long as no Go code is running. Some operations (e.g. calls, getters and setters)
					// may synchronously trigger a Go event handler. This makes Go code get executed in the middle of the imported
					// function. A goroutine can switch to a new stack if the current stack is too small (see morestack function).
					// This changes the SP, thus we have to update the SP used by the imported function.

					// func wasmExit(code int32)
					"runtime.wasmExit": (sp) => {
						sp >>>= 0;
						const code = this.mem.getInt32(sp + 8, true);
						this.exited = true;
						delete this._inst;
						delete this._values;
						delete this._goRefCounts;
						delete this._ids;
						delete this._idPool;
						this.exit(code);
					},

					// func wasmWrite(fd uintptr, p unsafe.Pointer, n int32)
					"runtime.wasmWrite": (sp) => {
						sp >>>= 0;
						const fd = getInt64(sp + 8);
						const p = getInt64(sp + 16);
						const n = this.mem.getInt32(sp + 24, true);
						fs.writeSync(fd, new Uint8Array(this._inst.exports.mem.buffer, p, n));
					},

					// func resetMemoryDataView()
					"runtime.resetMemoryDataView": (sp) => {
						sp >>>= 0;
						this.mem = new DataView(this._inst.exports.mem.buffer);
					},

					// func nanotime1() int64
					"runtime.nanotime1": (sp) => {
						sp >>>= 0;
						setInt64(sp + 8, (timeOrigin + performance.now()) * 1000000);
					},

					// func walltime() (sec int64, nsec int32)
					"runtime.walltime": (sp) => {
						sp >>>= 0;
						const msec = (new Date).getTime();
						setInt64(sp + 8, msec / 1000);
						this.mem.setInt32(sp + 16, (msec % 1000) * 1000000, true);
					},

					// func scheduleTimeoutEvent(delay int64) int32
					"runtime.scheduleTimeoutEvent": (sp) => {
						sp >>>= 0;
						const id = this._nextCallbackTimeoutID;
						this._nextCallbackTimeoutID++;
						this._scheduledTimeouts.set(id, setTimeout(
							() => {
								this._resume();
								while (this._scheduledTimeouts.has(id)) {
									// for some reason Go failed to register the timeout event, log and try again
									// (temporary workaround for https://github.com/golang/go/issues/28975)
									console.warn("scheduleTimeoutEvent: missed timeout event");
									this._resume();
								}
							},
							getInt64(sp + 8) + 1, // setTimeout has been seen to fire up to 1 millisecond early
						));
						this.mem.setInt32(sp + 16, id, true);
					},

					// func clearTimeoutEvent(id int32)
					"runtime.clearTimeoutEvent": (sp) => {
						sp >>>= 0;
						const id = this.mem.getInt32(sp + 8, true);
						clearTimeout(this._scheduledTimeouts.get(id));
						this._scheduledTimeouts.delete(id);
					},

					// func getRandomData(r []byte)
					"runtime.getRandomData": (sp) => {
						sp >>>= 0;
						crypto.getRandomValues(loadSlice(sp + 8));
					},

					// func finalizeRef(v ref)
					"syscall/js.finalizeRef": (sp) => {
						sp >>>= 0;
						const id = this.mem.getUint32(sp + 8, true);
						this._goRefCounts[id]--;
						if (this._goRefCounts[id] === 0) {
							const v = this._values[id];
							this._values[id] = null;
							this._ids.delete(v);
							this._idPool.push(id);
						}
					},

					// func stringVal(value string) ref
					"syscall/js.stringVal": (sp) => {
						sp >>>= 0;
						storeValue(sp + 24, loadString(sp + 8));
					},

					// func valueGet(v ref, p string) ref
					"syscall/js.valueGet": (sp) => {
						sp >>>= 0;
						const result = Reflect.get(loadValue(sp + 8), loadString(sp + 16));
						sp = this._inst.exports.getsp() >>> 0; // see comment above
						storeValue(sp + 32, result);
					},

					// func valueSet(v ref, p string, x ref)
					"syscall/js.valueSet": (sp) => {
						sp >>>= 0;
						Reflect.set(loadValue(sp + 8), loadString(sp + 16), loadValue(sp + 32));
					},

					// func valueDelete(v ref, p string)
					"syscall/js.valueDelete": (sp) => {
						sp >>>= 0;
						Reflect.deleteProperty(loadValue(sp + 8), loadString(sp + 16));
					},

					// func valueIndex(v ref, i int) ref
					"syscall/js.valueIndex": (sp) => {
						sp >>>= 0;
						storeValue(sp + 24, Reflect.get(loadValue(sp + 8), getInt64(sp + 16)));
					},

					// valueSetIndex(v ref, i int, x ref)
					"syscall/js.valueSetIndex": (sp) => {
						sp >>>= 0;
						Reflect.set(loadValue(sp + 8), getInt64(sp + 16), loadValue(sp + 24));
					},

					// func valueCall(v ref, m string, args []ref) (ref, bool)
					"syscall/js.valueCall": (sp) => {
						sp >>>= 0;
						try {
							const v = loadValue(sp + 8);
							const m = Reflect.get(v, loadString(sp + 16));
							const args = loadSliceOfValues(sp + 32);
							const result = Reflect.apply(m, v, args);
							sp = this._inst.exports.getsp() >>> 0; // see comment above
							storeValue(sp + 56, result);
							this.mem.setUint8(sp + 64, 1);
						} catch (err) {
							sp = this._inst.exports.getsp() >>> 0; // see comment above
							storeValue(sp + 56, err);
							this.mem.setUint8(sp + 64, 0);
						}
					},

					// func valueInvoke(v ref, args []ref) (ref, bool)
					"syscall/js.valueInvoke": (sp) => {
						sp >>>= 0;
						try {
							const v = loadValue(sp + 8);
							const args = loadSliceOfValues(sp + 16);
							const result = Reflect.apply(v, undefined, args);
							sp = this._inst.exports.getsp() >>> 0; // see comment above
							storeValue(sp + 40, result);
							this.mem.setUint8(sp + 48, 1);
						} catch (err) {
							sp = this._inst.exports.getsp() >>> 0; // see comment above
							storeValue(sp + 40, err);
							this.mem.setUint8(sp + 48, 0);
						}
					},

					// func valueNew(v ref, args []ref) (ref, bool)
					"syscall/js.valueNew": (sp) => {
						sp >>>= 0;
						try {
							const v = loadValue(sp + 8);
							const args = loadSliceOfValues(sp + 16);
							const result = Reflect.construct(v, args);
							sp = this._inst.exports.getsp() >>> 0; // see comment above
							storeValue(sp + 40, result);
							this.mem.setUint8(sp + 48, 1);
						} catch (err) {
							sp = this._inst.exports.getsp() >>> 0; // see comment above
							storeValue(sp + 40, err);
							this.mem.setUint8(sp + 48, 0);
						}
					},

					// func valueLength(v ref) int
					"syscall/js.valueLength": (sp) => {
						sp >>>= 0;
						setInt64(sp + 16, parseInt(loadValue(sp + 8).length));
					},

					// valuePrepareString(v ref) (ref, int)
					"syscall/js.valuePrepareString": (sp) => {
						sp >>>= 0;
						const str = encoder.encode(String(loadValue(sp + 8)));
						storeValue(sp + 16, str);
						setInt64(sp + 24, str.length);
					},

					// valueLoadString(v ref, b []byte)
					"syscall/js.valueLoadString": (sp) => {
						sp >>>= 0;
						const str = loadValue(sp + 8);
						loadSlice(sp + 16).set(str);
					},

					// func valueInstanceOf(v ref, t ref) bool
					"syscall/js.valueInstanceOf": (sp) => {
						sp >>>= 0;
						this.mem.setUint8(sp + 24, (loadValue(sp + 8) instanceof loadValue(sp + 16)) ? 1 : 0);
					},

					// func copyBytesToGo(dst []byte, src ref) (int, bool)
					"syscall/js.copyBytesToGo": (sp) => {
						sp >>>= 0;
						const dst = loadSlice(sp + 8);
						const src = loadValue(sp + 32);
						if (!(src instanceof Uint8Array || src instanceof Uint8ClampedArray)) {
							this.mem.setUint8(sp + 48, 0);
							return;
						}
						const toCopy = src.subarray(0, dst.length);
						dst.set(toCopy);
						setInt64(sp + 40, toCopy.length);
						this.mem.setUint8(sp + 48, 1);
					},

					// func copyBytesToJS(dst ref, src []byte) (int, bool)
					"syscall/js.copyBytesToJS": (sp) => {
						sp >>>= 0;
						const dst = loadValue(sp + 8);
						const src = loadSlice(sp + 16);
						if (!(dst instanceof Uint8Array || dst instanceof Uint8ClampedArray)) {
							this.mem.setUint8(sp + 48, 0);
							return;
						}
						const toCopy = src.subarray(0, dst.length);
						dst.set(toCopy);
						setInt64(sp + 40, toCopy.length);
						this.mem.setUint8(sp + 48, 1);
					},

					"debug": (value) => {
						console.log(value);
					},
				}
			};
		}

		async run(instance) {
			if (!(instance instanceof WebAssembly.Instance)) {
				throw new Error("Go.run: WebAssembly.Instance expected");
			}
			this._inst = instance;
			this.mem = new DataView(this._inst.exports.mem.buffer);
			this._values = [ // JS values that Go currently has references to, indexed by reference id
				NaN,
				0,
				null,
				true,
				false,
				global,
				this,
			];
			this._goRefCounts = new Array(this._values.length).fill(Infinity); // number of references that Go has to a JS value, indexed by reference id
			this._ids = new Map([ // mapping from JS values to reference ids
				[0, 1],
				[null, 2],
				[true, 3],
				[false, 4],
				[global, 5],
				[this, 6],
			]);
			this._idPool = [];   // unused ids that have been garbage collected
			this.exited = false; // whether the Go program has exited

			// Pass command line arguments and environment variables to WebAssembly by writing them to the linear memory.
			let offset = 4096;

			const strPtr = (str) => {
				const ptr = offset;
				const bytes = encoder.encode(str + "\\0");
				new Uint8Array(this.mem.buffer, offset, bytes.length).set(bytes);
				offset += bytes.length;
				if (offset % 8 !== 0) {
					offset += 8 - (offset % 8);
				}
				return ptr;
			};

			const argc = this.argv.length;

			const argvPtrs = [];
			this.argv.forEach((arg) => {
				argvPtrs.push(strPtr(arg));
			});
			argvPtrs.push(0);

			const keys = Object.keys(this.env).sort();
			keys.forEach((key) => {
				argvPtrs.push(strPtr(\`\${key}=\${this.env[key]}\`));
			});
			argvPtrs.push(0);

			const argv = offset;
			argvPtrs.forEach((ptr) => {
				this.mem.setUint32(offset, ptr, true);
				this.mem.setUint32(offset + 4, 0, true);
				offset += 8;
			});

			// The linker guarantees global data starts from at least wasmMinDataAddr.
			// Keep in sync with cmd/link/internal/ld/data.go:wasmMinDataAddr.
			const wasmMinDataAddr = 4096 + 4096;
			if (offset >= wasmMinDataAddr) {
				throw new Error("command line too long");
			}

			this._inst.exports.run(argc, argv);
			if (this.exited) {
				this._resolveExitPromise();
			}
			await this._exitPromise;
		}

		_resume() {
			if (this.exited) {
				throw new Error("Go program has already exited");
			}
			this._inst.exports.resume();
			if (this.exited) {
				this._resolveExitPromise();
			}
		}

		_makeFuncWrapper(id) {
			const go = this;
			return function () {
				const event = { id: id, this: this, args: arguments };
				go._pendingEvent = event;
				go._resume();
				return event.result;
			};
		}
	}

	if (
		typeof module !== "undefined" &&
		global.require &&
		global.require.main === module &&
		global.process &&
		global.process.versions &&
		!global.process.versions.electron
	) {
		if (process.argv.length < 3) {
			console.error("usage: go_js_wasm_exec [wasm binary] [arguments]");
			process.exit(1);
		}

		const go = new Go();
		go.argv = process.argv.slice(2);
		go.env = Object.assign({ TMPDIR: require("os").tmpdir() }, process.env);
		go.exit = process.exit;
		WebAssembly.instantiate(fs.readFileSync(process.argv[2]), go.importObject).then((result) => {
			process.on("exit", (code) => { // Node.js exits if no event handler is pending
				if (code === 0 && !go.exited) {
					// deadlock, make Go print error and stack traces
					go._pendingEvent = { id: 0 };
					go._resume();
				}
			});
			return go.run(result.instance);
		}).catch((err) => {
			console.error(err);
			process.exit(1);
		});
	}
})();
onmessage = ({ data: wasm }) => {
  let decoder = new TextDecoder();
  let fs = global.fs;
  let stderr = "";
  fs.writeSync = (fd, buffer) => {
    if (fd === 1) {
      postMessage(buffer);
    } else if (fd === 2) {
      stderr += decoder.decode(buffer);
      let parts = stderr.split("\\n");
      if (parts.length > 1)
        console.log(parts.slice(0, -1).join("\\n"));
      stderr = parts[parts.length - 1];
    } else {
      throw new Error("Bad write");
    }
    return buffer.length;
  };
  let stdin = [];
  let resumeStdin;
  let stdinPos = 0;
  onmessage = ({ data }) => {
    if (data.length > 0) {
      stdin.push(data);
      if (resumeStdin)
        resumeStdin();
    }
  };
  fs.read = (fd, buffer, offset, length, position, callback) => {
    if (fd !== 0 || offset !== 0 || length !== buffer.length || position !== null) {
      throw new Error("Bad read");
    }
    if (stdin.length === 0) {
      resumeStdin = () => fs.read(fd, buffer, offset, length, position, callback);
      return;
    }
    let first = stdin[0];
    let count = Math.max(0, Math.min(length, first.length - stdinPos));
    buffer.set(first.subarray(stdinPos, stdinPos + count), offset);
    stdinPos += count;
    if (stdinPos === first.length) {
      stdin.shift();
      stdinPos = 0;
    }
    callback(null, count);
  };
  let go = new global.Go();
  go.argv = ["", \`--service=\${"0.13.11"}\`];
  WebAssembly.instantiate(wasm, go.importObject).then(({ instance }) => go.run(instance));
};}`,i;if(t){let l=new Blob([c],{type:"text/javascript"});i=new Worker(URL.createObjectURL(l))}else{let m=new Function("postMessage",c+"var onmessage; return m => onmessage(m)")(k=>i.onmessage({data:k}));i={onmessage:null,postMessage:k=>m({data:k}),terminate(){}}}i.postMessage(s),i.onmessage=({data:l})=>n(l);let{readFromStdout:n,service:p}=createChannel({writeToStdin(l){i.postMessage(l)},isSync:!1,isBrowser:!0});longLivedService={build:l=>new Promise((m,k)=>p.buildOrServe({callName:"build",refs:null,serveOptions:null,options:l,isTTY:!1,defaultWD:"/",callback:(D,A)=>D?k(D):m(A)})),transform:(l,m)=>new Promise((k,D)=>p.transform({callName:"transform",refs:null,input:l,options:m||{},isTTY:!1,fs:{readFile(A,O){O(new Error("Internal error"),null)},writeFile(A,O){O(null)}},callback:(A,O)=>A?D(A):k(O)})),formatMessages:(l,m)=>new Promise((k,D)=>p.formatMessages({callName:"formatMessages",refs:null,messages:l,options:m,callback:(A,O)=>A?D(A):k(O)})),analyzeMetafile:(l,m)=>new Promise((k,D)=>p.analyzeMetafile({callName:"analyzeMetafile",refs:null,metafile:typeof l=="string"?l:JSON.stringify(l),options:m,callback:(A,O)=>A?D(A):k(O)}))}};function isURL(e){try{return new URL(e),!0}catch{return!1}}function serializeURL(e){return e.href}function parseUrlLikeImportSpecifier(e,t){if(t&&(e.startsWith("/")||e.startsWith("./")||e.startsWith("../")))try{return new URL(e,t)}catch{return null}try{return new URL(e)}catch{return null}}const specialSchemes=["ftp","file","http","https","ws","wss"];function isSpecial(e){return specialSchemes.some(t=>serializeURL(e).startsWith(t))}function resolveImportsMatch(e,t,r){for(const[s,c]of Object.entries(r))if(s===e){if(c===null)throw new TypeError("resolution of specifierKey was blocked by a null entry.");if(!isURL(c))throw new TypeError("resolutionResult must be an URL.");return c}else if(s.endsWith("/")&&e.startsWith(s)&&(t===null||isSpecial(t))){if(c===null)throw new TypeError("resolution of specifierKey was blocked by a null entry.");if(!isURL(c))throw new TypeError("resolutionResult must be an URL.");const i=e.slice(s.length);if(!c.endsWith("/"))throw new TypeError('resolutionResult does not end with "/"');try{const n=new URL(i,c);if(!isURL(n))throw new TypeError("url must be an URL.");if(!serializeURL(n).startsWith(c))throw new TypeError("resolution of normalizedSpecifier was blocked due to it backtracking above its prefix specifierKey.");return serializeURL(n)}catch{throw new TypeError("resolution of normalizedSpecifier was blocked since the afterPrefix portion could not be URL-parsed relative to the resolutionResult mapped to by the specifierKey prefix.")}}return null}function resolveModuleSpecifier(e,{imports:t={},scopes:r={}},s){const c=serializeURL(s),i=parseUrlLikeImportSpecifier(e,s),n=i!==null?serializeURL(i):e;for(const[l,m]of Object.entries(r))if(l===c||l.endsWith("/")&&c.startsWith(l)){const k=resolveImportsMatch(n,i,m);if(k!==null)return k}const p=resolveImportsMatch(n,i,t);if(p!==null)return p;if(i!==null)return serializeURL(i);throw new TypeError("specifier was a bare specifier, but was not remapped to anything by importMap.")}const loaderList=["js","jsx","ts","tsx","css","json","text","base64","file","dataurl","binary","default"];function isLoader(e){return loaderList.includes(e)}const name="remote-resource",remoteLoader=e=>({name,setup({onResolve:t,onLoad:r}){const{importmap:s={imports:{}},baseURL:c}=e??{};t({filter:/.*/},({path:i,namespace:n,importer:p,resolveDir:l})=>{const m=resolveModuleSpecifier(i,s,c);return m.startsWith("http")?(console.log({path:i,importer:p,resolveDir:l},"->",m),{path:m,namespace:name}):n===name?(console.log({importer:p,resolveDir:l},"->",new URL(m,p).toString()),{path:new URL(m,p).toString(),namespace:name}):(console.log({resolvedPath:m,resolveDir:l},"->",new URL(m,l).toString()),{path:new URL(m,l).toString()})}),r({filter:/.*/,namespace:name},async({path:i})=>{const n=await fetch(i);if(console.log(`Download ${i}`),!n.ok)throw n;return{contents:await n.text(),loader:getLoader(n)}})}});function getLoader(e){const r=e.url.split(".").pop();if(r&&isLoader(r))return r;if(r==="mjs")return"js";const s=e.headers.get("Content-Type")??"text/plain";return isLoader(s)?s:"text"}let initialized;self.addEventListener("message",async e=>{initialized??=initialize({wasmURL:"./esbuild.wasm",worker:!1}),await initialized;const{entryURL:t,...r}=e.data,s=await build({stdin:{contents:`import "${t}";`},write:!1,...r,plugins:[remoteLoader({baseURL:new URL(t)})]});self.postMessage(s.outputFiles[0].text)});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsidmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZlByb3BzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXM7XG52YXIgX19nZXRPd25Qcm9wRGVzY3MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycztcbnZhciBfX2dldE93blByb3BTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG5SZWZsZWN0LmdldDtcblJlZmxlY3Quc2V0O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpPT5rZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIHZhbHVlXG4gICAgfSkgOiBvYmpba2V5XSA9IHZhbHVlXG47XG52YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYik9PntcbiAgICBmb3IodmFyIHByb3AgaW4gYiB8fCAoYiA9IHtcbiAgICB9KSlpZiAoX19oYXNPd25Qcm9wLmNhbGwoYiwgcHJvcCkpIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scykgZm9yICh2YXIgcHJvcCBvZiBfX2dldE93blByb3BTeW1ib2xzKGIpKXtcbiAgICAgICAgaWYgKF9fcHJvcElzRW51bS5jYWxsKGIsIHByb3ApKSBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XG4gICAgfVxuICAgIHJldHVybiBhO1xufTtcbnZhciBfX3NwcmVhZFByb3BzID0gKGEsIGIpPT5fX2RlZlByb3BzKGEsIF9fZ2V0T3duUHJvcERlc2NzKGIpKVxuO1xuZnVuY3Rpb24gZW5jb2RlUGFja2V0KHBhY2tldCkge1xuICAgIGxldCB2aXNpdCA9ICh2YWx1ZSk9PntcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICBiYi53cml0ZTgoMCk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICAgICAgYmIud3JpdGU4KDEpO1xuICAgICAgICAgICAgYmIud3JpdGU4KCt2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICBiYi53cml0ZTgoMik7XG4gICAgICAgICAgICBiYi53cml0ZTMyKHZhbHVlIHwgMCk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBiYi53cml0ZTgoMyk7XG4gICAgICAgICAgICBiYi53cml0ZShlbmNvZGVVVEY4KHZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgICAgICBiYi53cml0ZTgoNCk7XG4gICAgICAgICAgICBiYi53cml0ZSh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgYmIud3JpdGU4KDUpO1xuICAgICAgICAgICAgYmIud3JpdGUzMih2YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB2YWx1ZSl7XG4gICAgICAgICAgICAgICAgdmlzaXQoaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcbiAgICAgICAgICAgIGJiLndyaXRlOCg2KTtcbiAgICAgICAgICAgIGJiLndyaXRlMzIoa2V5cy5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQga2V5IG9mIGtleXMpe1xuICAgICAgICAgICAgICAgIGJiLndyaXRlKGVuY29kZVVURjgoa2V5KSk7XG4gICAgICAgICAgICAgICAgdmlzaXQodmFsdWVba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGxldCBiYiA9IG5ldyBCeXRlQnVmZmVyKCk7XG4gICAgYmIud3JpdGUzMigwKTtcbiAgICBiYi53cml0ZTMyKHBhY2tldC5pZCA8PCAxIHwgKyFwYWNrZXQuaXNSZXF1ZXN0KTtcbiAgICB2aXNpdChwYWNrZXQudmFsdWUpO1xuICAgIHdyaXRlVUludDMyTEUoYmIuYnVmLCBiYi5sZW4gLSA0LCAwKTtcbiAgICByZXR1cm4gYmIuYnVmLnN1YmFycmF5KDAsIGJiLmxlbik7XG59XG5mdW5jdGlvbiBkZWNvZGVQYWNrZXQoYnl0ZXMpIHtcbiAgICBsZXQgdmlzaXQgPSAoKT0+e1xuICAgICAgICBzd2l0Y2goYmIucmVhZDgoKSl7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhYmIucmVhZDgoKTtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gYmIucmVhZDMyKCk7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVURjgoYmIucmVhZCgpKTtcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICByZXR1cm4gYmIucmVhZCgpO1xuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gYmIucmVhZDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZTIgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUyLnB1c2godmlzaXQoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY291bnQgPSBiYi5yZWFkMzIoKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlMiA9IHtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUyW2RlY29kZVVURjgoYmIucmVhZCgpKV0gPSB2aXNpdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhY2tldFwiKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgbGV0IGJiID0gbmV3IEJ5dGVCdWZmZXIoYnl0ZXMpO1xuICAgIGxldCBpZCA9IGJiLnJlYWQzMigpO1xuICAgIGxldCBpc1JlcXVlc3QgPSAoaWQgJiAxKSA9PT0gMDtcbiAgICBpZCA+Pj49IDE7XG4gICAgbGV0IHZhbHVlID0gdmlzaXQoKTtcbiAgICBpZiAoYmIucHRyICE9PSBieXRlcy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYWNrZXRcIik7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGlkLFxuICAgICAgICBpc1JlcXVlc3QsXG4gICAgICAgIHZhbHVlXG4gICAgfTtcbn1cbnZhciBCeXRlQnVmZmVyID0gY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGJ1ZiA9IG5ldyBVaW50OEFycmF5KDEwMjQpKXtcbiAgICAgICAgdGhpcy5idWYgPSBidWY7XG4gICAgICAgIHRoaXMubGVuID0gMDtcbiAgICAgICAgdGhpcy5wdHIgPSAwO1xuICAgIH1cbiAgICBfd3JpdGUoZGVsdGEpIHtcbiAgICAgICAgaWYgKHRoaXMubGVuICsgZGVsdGEgPiB0aGlzLmJ1Zi5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCBjbG9uZSA9IG5ldyBVaW50OEFycmF5KCh0aGlzLmxlbiArIGRlbHRhKSAqIDIpO1xuICAgICAgICAgICAgY2xvbmUuc2V0KHRoaXMuYnVmKTtcbiAgICAgICAgICAgIHRoaXMuYnVmID0gY2xvbmU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sZW4gKz0gZGVsdGE7XG4gICAgICAgIHJldHVybiB0aGlzLmxlbiAtIGRlbHRhO1xuICAgIH1cbiAgICB3cml0ZTgodmFsdWUpIHtcbiAgICAgICAgbGV0IG9mZnNldCA9IHRoaXMuX3dyaXRlKDEpO1xuICAgICAgICB0aGlzLmJ1ZltvZmZzZXRdID0gdmFsdWU7XG4gICAgfVxuICAgIHdyaXRlMzIodmFsdWUpIHtcbiAgICAgICAgbGV0IG9mZnNldCA9IHRoaXMuX3dyaXRlKDQpO1xuICAgICAgICB3cml0ZVVJbnQzMkxFKHRoaXMuYnVmLCB2YWx1ZSwgb2Zmc2V0KTtcbiAgICB9XG4gICAgd3JpdGUoYnl0ZXMpIHtcbiAgICAgICAgbGV0IG9mZnNldCA9IHRoaXMuX3dyaXRlKDQgKyBieXRlcy5sZW5ndGgpO1xuICAgICAgICB3cml0ZVVJbnQzMkxFKHRoaXMuYnVmLCBieXRlcy5sZW5ndGgsIG9mZnNldCk7XG4gICAgICAgIHRoaXMuYnVmLnNldChieXRlcywgb2Zmc2V0ICsgNCk7XG4gICAgfVxuICAgIF9yZWFkKGRlbHRhKSB7XG4gICAgICAgIGlmICh0aGlzLnB0ciArIGRlbHRhID4gdGhpcy5idWYubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhY2tldFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnB0ciArPSBkZWx0YTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHRyIC0gZGVsdGE7XG4gICAgfVxuICAgIHJlYWQ4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZbdGhpcy5fcmVhZCgxKV07XG4gICAgfVxuICAgIHJlYWQzMigpIHtcbiAgICAgICAgcmV0dXJuIHJlYWRVSW50MzJMRSh0aGlzLmJ1ZiwgdGhpcy5fcmVhZCg0KSk7XG4gICAgfVxuICAgIHJlYWQoKSB7XG4gICAgICAgIGxldCBsZW5ndGggPSB0aGlzLnJlYWQzMigpO1xuICAgICAgICBsZXQgYnl0ZXMgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICAgICAgICBsZXQgcHRyID0gdGhpcy5fcmVhZChieXRlcy5sZW5ndGgpO1xuICAgICAgICBieXRlcy5zZXQodGhpcy5idWYuc3ViYXJyYXkocHRyLCBwdHIgKyBsZW5ndGgpKTtcbiAgICAgICAgcmV0dXJuIGJ5dGVzO1xuICAgIH1cbn07XG52YXIgZW5jb2RlVVRGODtcbnZhciBkZWNvZGVVVEY4O1xuaWYgKHR5cGVvZiBUZXh0RW5jb2RlciAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgVGV4dERlY29kZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBsZXQgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgIGxldCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgZW5jb2RlVVRGOCA9ICh0ZXh0KT0+ZW5jb2Rlci5lbmNvZGUodGV4dClcbiAgICA7XG4gICAgZGVjb2RlVVRGOCA9IChieXRlcyk9PmRlY29kZXIuZGVjb2RlKGJ5dGVzKVxuICAgIDtcbn0gZWxzZSBpZiAodHlwZW9mIEJ1ZmZlciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGVuY29kZVVURjggPSAodGV4dCk9PntcbiAgICAgICAgbGV0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKHRleHQpO1xuICAgICAgICBpZiAoIShidWZmZXIgaW5zdGFuY2VvZiBVaW50OEFycmF5KSkge1xuICAgICAgICAgICAgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgIH07XG4gICAgZGVjb2RlVVRGOCA9IChieXRlcyk9PntcbiAgICAgICAgbGV0IHsgYnVmZmVyICwgYnl0ZU9mZnNldCAsIGJ5dGVMZW5ndGggIH0gPSBieXRlcztcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKGJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCkudG9TdHJpbmcoKTtcbiAgICB9O1xufSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBVVEYtOCBjb2RlYyBmb3VuZFwiKTtcbn1cbmZ1bmN0aW9uIHJlYWRVSW50MzJMRShidWZmZXIsIG9mZnNldCkge1xuICAgIHJldHVybiBidWZmZXJbb2Zmc2V0KytdIHwgYnVmZmVyW29mZnNldCsrXSA8PCA4IHwgYnVmZmVyW29mZnNldCsrXSA8PCAxNiB8IGJ1ZmZlcltvZmZzZXQrK10gPDwgMjQ7XG59XG5mdW5jdGlvbiB3cml0ZVVJbnQzMkxFKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCkge1xuICAgIGJ1ZmZlcltvZmZzZXQrK10gPSB2YWx1ZTtcbiAgICBidWZmZXJbb2Zmc2V0KytdID0gdmFsdWUgPj4gODtcbiAgICBidWZmZXJbb2Zmc2V0KytdID0gdmFsdWUgPj4gMTY7XG4gICAgYnVmZmVyW29mZnNldCsrXSA9IHZhbHVlID4+IDI0O1xufVxuZnVuY3Rpb24gdmFsaWRhdGVUYXJnZXQodGFyZ2V0KSB7XG4gICAgdGFyZ2V0ICs9IFwiXCI7XG4gICAgaWYgKHRhcmdldC5pbmRleE9mKFwiLFwiKSA+PSAwKSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdGFyZ2V0OiAke3RhcmdldH1gKTtcbiAgICByZXR1cm4gdGFyZ2V0O1xufVxudmFyIGNhbkJlQW55dGhpbmcgPSAoKT0+bnVsbFxuO1xudmFyIG11c3RCZUJvb2xlYW4gPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiID8gbnVsbCA6IFwiYSBib29sZWFuXCJcbjtcbnZhciBtdXN0QmVCb29sZWFuT3JPYmplY3QgPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyBudWxsIDogXCJhIGJvb2xlYW4gb3IgYW4gb2JqZWN0XCJcbjtcbnZhciBtdXN0QmVTdHJpbmcgPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyBudWxsIDogXCJhIHN0cmluZ1wiXG47XG52YXIgbXVzdEJlUmVnRXhwID0gKHZhbHVlKT0+dmFsdWUgaW5zdGFuY2VvZiBSZWdFeHAgPyBudWxsIDogXCJhIFJlZ0V4cCBvYmplY3RcIlxuO1xudmFyIG11c3RCZUludGVnZXIgPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgdmFsdWUgPT09ICh2YWx1ZSB8IDApID8gbnVsbCA6IFwiYW4gaW50ZWdlclwiXG47XG52YXIgbXVzdEJlRnVuY3Rpb24gPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiA/IG51bGwgOiBcImEgZnVuY3Rpb25cIlxuO1xudmFyIG11c3RCZUFycmF5ID0gKHZhbHVlKT0+QXJyYXkuaXNBcnJheSh2YWx1ZSkgPyBudWxsIDogXCJhbiBhcnJheVwiXG47XG52YXIgbXVzdEJlT2JqZWN0ID0gKHZhbHVlKT0+dHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSA/IG51bGwgOiBcImFuIG9iamVjdFwiXG47XG52YXIgbXVzdEJlQXJyYXlPclJlY29yZCA9ICh2YWx1ZSk9PnR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCA/IG51bGwgOiBcImFuIGFycmF5IG9yIGFuIG9iamVjdFwiXG47XG52YXIgbXVzdEJlT2JqZWN0T3JOdWxsID0gKHZhbHVlKT0+dHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSA/IG51bGwgOiBcImFuIG9iamVjdCBvciBudWxsXCJcbjtcbnZhciBtdXN0QmVTdHJpbmdPckJvb2xlYW4gPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIiA/IG51bGwgOiBcImEgc3RyaW5nIG9yIGEgYm9vbGVhblwiXG47XG52YXIgbXVzdEJlU3RyaW5nT3JPYmplY3QgPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSA/IG51bGwgOiBcImEgc3RyaW5nIG9yIGFuIG9iamVjdFwiXG47XG52YXIgbXVzdEJlU3RyaW5nT3JBcnJheSA9ICh2YWx1ZSk9PnR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiB8fCBBcnJheS5pc0FycmF5KHZhbHVlKSA/IG51bGwgOiBcImEgc3RyaW5nIG9yIGFuIGFycmF5XCJcbjtcbnZhciBtdXN0QmVTdHJpbmdPclVpbnQ4QXJyYXkgPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgfHwgdmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbnVsbCA6IFwiYSBzdHJpbmcgb3IgYSBVaW50OEFycmF5XCJcbjtcbmZ1bmN0aW9uIGdldEZsYWcob2JqZWN0LCBrZXlzLCBrZXksIG11c3RCZUZuKSB7XG4gICAgbGV0IHZhbHVlID0gb2JqZWN0W2tleV07XG4gICAga2V5c1trZXkgKyBcIlwiXSA9IHRydWU7XG4gICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHJldHVybiB2b2lkIDA7XG4gICAgbGV0IG11c3RCZSA9IG11c3RCZUZuKHZhbHVlKTtcbiAgICBpZiAobXVzdEJlICE9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoYFwiJHtrZXl9XCIgbXVzdCBiZSAke211c3RCZX1gKTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBjaGVja0ZvckludmFsaWRGbGFncyhvYmplY3QsIGtleXMsIHdoZXJlKSB7XG4gICAgZm9yKGxldCBrZXkgaW4gb2JqZWN0KXtcbiAgICAgICAgaWYgKCEoa2V5IGluIGtleXMpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgb3B0aW9uICR7d2hlcmV9OiBcIiR7a2V5fVwiYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZUluaXRpYWxpemVPcHRpb25zKG9wdGlvbnMpIHtcbiAgICBsZXQga2V5cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbGV0IHdhc21VUkwgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwid2FzbVVSTFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGxldCB3b3JrZXIgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwid29ya2VyXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKG9wdGlvbnMsIGtleXMsIFwiaW4gc3RhcnRTZXJ2aWNlKCkgY2FsbFwiKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB3YXNtVVJMLFxuICAgICAgICB3b3JrZXJcbiAgICB9O1xufVxuZnVuY3Rpb24gcHVzaExvZ0ZsYWdzKGZsYWdzLCBvcHRpb25zLCBrZXlzLCBpc1RUWSwgbG9nTGV2ZWxEZWZhdWx0KSB7XG4gICAgbGV0IGNvbG9yID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImNvbG9yXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGxldCBsb2dMZXZlbCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJsb2dMZXZlbFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGxldCBsb2dMaW1pdCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJsb2dMaW1pdFwiLCBtdXN0QmVJbnRlZ2VyKTtcbiAgICBpZiAoY29sb3IgIT09IHZvaWQgMCkgZmxhZ3MucHVzaChgLS1jb2xvcj0ke2NvbG9yfWApO1xuICAgIGVsc2UgaWYgKGlzVFRZKSBmbGFncy5wdXNoKGAtLWNvbG9yPXRydWVgKTtcbiAgICBmbGFncy5wdXNoKGAtLWxvZy1sZXZlbD0ke2xvZ0xldmVsIHx8IGxvZ0xldmVsRGVmYXVsdH1gKTtcbiAgICBmbGFncy5wdXNoKGAtLWxvZy1saW1pdD0ke2xvZ0xpbWl0IHx8IDB9YCk7XG59XG5mdW5jdGlvbiBwdXNoQ29tbW9uRmxhZ3MoZmxhZ3MsIG9wdGlvbnMsIGtleXMpIHtcbiAgICBsZXQgbGVnYWxDb21tZW50cyA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJsZWdhbENvbW1lbnRzXCIsIG11c3RCZVN0cmluZyk7XG4gICAgbGV0IHNvdXJjZVJvb3QgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwic291cmNlUm9vdFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGxldCBzb3VyY2VzQ29udGVudCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJzb3VyY2VzQ29udGVudFwiLCBtdXN0QmVCb29sZWFuKTtcbiAgICBsZXQgdGFyZ2V0ID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInRhcmdldFwiLCBtdXN0QmVTdHJpbmdPckFycmF5KTtcbiAgICBsZXQgZm9ybWF0ID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImZvcm1hdFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGxldCBnbG9iYWxOYW1lID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImdsb2JhbE5hbWVcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgbWluaWZ5ID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIm1pbmlmeVwiLCBtdXN0QmVCb29sZWFuKTtcbiAgICBsZXQgbWluaWZ5U3ludGF4ID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIm1pbmlmeVN5bnRheFwiLCBtdXN0QmVCb29sZWFuKTtcbiAgICBsZXQgbWluaWZ5V2hpdGVzcGFjZSA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJtaW5pZnlXaGl0ZXNwYWNlXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGxldCBtaW5pZnlJZGVudGlmaWVycyA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJtaW5pZnlJZGVudGlmaWVyc1wiLCBtdXN0QmVCb29sZWFuKTtcbiAgICBsZXQgY2hhcnNldCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJjaGFyc2V0XCIsIG11c3RCZVN0cmluZyk7XG4gICAgbGV0IHRyZWVTaGFraW5nID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInRyZWVTaGFraW5nXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGxldCBpZ25vcmVBbm5vdGF0aW9ucyA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJpZ25vcmVBbm5vdGF0aW9uc1wiLCBtdXN0QmVCb29sZWFuKTtcbiAgICBsZXQganN4ID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImpzeFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGxldCBqc3hGYWN0b3J5ID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImpzeEZhY3RvcnlcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQganN4RnJhZ21lbnQgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwianN4RnJhZ21lbnRcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgZGVmaW5lID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImRlZmluZVwiLCBtdXN0QmVPYmplY3QpO1xuICAgIGxldCBwdXJlID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInB1cmVcIiwgbXVzdEJlQXJyYXkpO1xuICAgIGxldCBrZWVwTmFtZXMgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwia2VlcE5hbWVzXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGlmIChsZWdhbENvbW1lbnRzKSBmbGFncy5wdXNoKGAtLWxlZ2FsLWNvbW1lbnRzPSR7bGVnYWxDb21tZW50c31gKTtcbiAgICBpZiAoc291cmNlUm9vdCAhPT0gdm9pZCAwKSBmbGFncy5wdXNoKGAtLXNvdXJjZS1yb290PSR7c291cmNlUm9vdH1gKTtcbiAgICBpZiAoc291cmNlc0NvbnRlbnQgIT09IHZvaWQgMCkgZmxhZ3MucHVzaChgLS1zb3VyY2VzLWNvbnRlbnQ9JHtzb3VyY2VzQ29udGVudH1gKTtcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIGZsYWdzLnB1c2goYC0tdGFyZ2V0PSR7QXJyYXkuZnJvbSh0YXJnZXQpLm1hcCh2YWxpZGF0ZVRhcmdldCkuam9pbihcIixcIil9YCk7XG4gICAgICAgIGVsc2UgZmxhZ3MucHVzaChgLS10YXJnZXQ9JHt2YWxpZGF0ZVRhcmdldCh0YXJnZXQpfWApO1xuICAgIH1cbiAgICBpZiAoZm9ybWF0KSBmbGFncy5wdXNoKGAtLWZvcm1hdD0ke2Zvcm1hdH1gKTtcbiAgICBpZiAoZ2xvYmFsTmFtZSkgZmxhZ3MucHVzaChgLS1nbG9iYWwtbmFtZT0ke2dsb2JhbE5hbWV9YCk7XG4gICAgaWYgKG1pbmlmeSkgZmxhZ3MucHVzaChcIi0tbWluaWZ5XCIpO1xuICAgIGlmIChtaW5pZnlTeW50YXgpIGZsYWdzLnB1c2goXCItLW1pbmlmeS1zeW50YXhcIik7XG4gICAgaWYgKG1pbmlmeVdoaXRlc3BhY2UpIGZsYWdzLnB1c2goXCItLW1pbmlmeS13aGl0ZXNwYWNlXCIpO1xuICAgIGlmIChtaW5pZnlJZGVudGlmaWVycykgZmxhZ3MucHVzaChcIi0tbWluaWZ5LWlkZW50aWZpZXJzXCIpO1xuICAgIGlmIChjaGFyc2V0KSBmbGFncy5wdXNoKGAtLWNoYXJzZXQ9JHtjaGFyc2V0fWApO1xuICAgIGlmICh0cmVlU2hha2luZyAhPT0gdm9pZCAwKSBmbGFncy5wdXNoKGAtLXRyZWUtc2hha2luZz0ke3RyZWVTaGFraW5nfWApO1xuICAgIGlmIChpZ25vcmVBbm5vdGF0aW9ucykgZmxhZ3MucHVzaChgLS1pZ25vcmUtYW5ub3RhdGlvbnNgKTtcbiAgICBpZiAoanN4KSBmbGFncy5wdXNoKGAtLWpzeD0ke2pzeH1gKTtcbiAgICBpZiAoanN4RmFjdG9yeSkgZmxhZ3MucHVzaChgLS1qc3gtZmFjdG9yeT0ke2pzeEZhY3Rvcnl9YCk7XG4gICAgaWYgKGpzeEZyYWdtZW50KSBmbGFncy5wdXNoKGAtLWpzeC1mcmFnbWVudD0ke2pzeEZyYWdtZW50fWApO1xuICAgIGlmIChkZWZpbmUpIHtcbiAgICAgICAgZm9yKGxldCBrZXkgaW4gZGVmaW5lKXtcbiAgICAgICAgICAgIGlmIChrZXkuaW5kZXhPZihcIj1cIikgPj0gMCkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGRlZmluZTogJHtrZXl9YCk7XG4gICAgICAgICAgICBmbGFncy5wdXNoKGAtLWRlZmluZToke2tleX09JHtkZWZpbmVba2V5XX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocHVyZSkgZm9yIChsZXQgZm4gb2YgcHVyZSlmbGFncy5wdXNoKGAtLXB1cmU6JHtmbn1gKTtcbiAgICBpZiAoa2VlcE5hbWVzKSBmbGFncy5wdXNoKGAtLWtlZXAtbmFtZXNgKTtcbn1cbmZ1bmN0aW9uIGZsYWdzRm9yQnVpbGRPcHRpb25zKGNhbGxOYW1lLCBvcHRpb25zLCBpc1RUWSwgbG9nTGV2ZWxEZWZhdWx0LCB3cml0ZURlZmF1bHQpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IGZsYWdzID0gW107XG4gICAgbGV0IGVudHJpZXMgPSBbXTtcbiAgICBsZXQga2V5cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbGV0IHN0ZGluQ29udGVudHMgPSBudWxsO1xuICAgIGxldCBzdGRpblJlc29sdmVEaXIgPSBudWxsO1xuICAgIGxldCB3YXRjaE1vZGUgPSBudWxsO1xuICAgIHB1c2hMb2dGbGFncyhmbGFncywgb3B0aW9ucywga2V5cywgaXNUVFksIGxvZ0xldmVsRGVmYXVsdCk7XG4gICAgcHVzaENvbW1vbkZsYWdzKGZsYWdzLCBvcHRpb25zLCBrZXlzKTtcbiAgICBsZXQgc291cmNlbWFwID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInNvdXJjZW1hcFwiLCBtdXN0QmVTdHJpbmdPckJvb2xlYW4pO1xuICAgIGxldCBidW5kbGUgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwiYnVuZGxlXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGxldCB3YXRjaCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJ3YXRjaFwiLCBtdXN0QmVCb29sZWFuT3JPYmplY3QpO1xuICAgIGxldCBzcGxpdHRpbmcgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwic3BsaXR0aW5nXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGxldCBwcmVzZXJ2ZVN5bWxpbmtzID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInByZXNlcnZlU3ltbGlua3NcIiwgbXVzdEJlQm9vbGVhbik7XG4gICAgbGV0IG1ldGFmaWxlID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIm1ldGFmaWxlXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGxldCBvdXRmaWxlID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIm91dGZpbGVcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgb3V0ZGlyID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIm91dGRpclwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGxldCBvdXRiYXNlID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIm91dGJhc2VcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgcGxhdGZvcm0gPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwicGxhdGZvcm1cIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgdHNjb25maWcgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwidHNjb25maWdcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgcmVzb2x2ZUV4dGVuc2lvbnMgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwicmVzb2x2ZUV4dGVuc2lvbnNcIiwgbXVzdEJlQXJyYXkpO1xuICAgIGxldCBub2RlUGF0aHNJbnB1dCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJub2RlUGF0aHNcIiwgbXVzdEJlQXJyYXkpO1xuICAgIGxldCBtYWluRmllbGRzID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIm1haW5GaWVsZHNcIiwgbXVzdEJlQXJyYXkpO1xuICAgIGxldCBjb25kaXRpb25zID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImNvbmRpdGlvbnNcIiwgbXVzdEJlQXJyYXkpO1xuICAgIGxldCBleHRlcm5hbCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJleHRlcm5hbFwiLCBtdXN0QmVBcnJheSk7XG4gICAgbGV0IGxvYWRlciA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJsb2FkZXJcIiwgbXVzdEJlT2JqZWN0KTtcbiAgICBsZXQgb3V0RXh0ZW5zaW9uID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIm91dEV4dGVuc2lvblwiLCBtdXN0QmVPYmplY3QpO1xuICAgIGxldCBwdWJsaWNQYXRoID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInB1YmxpY1BhdGhcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgZW50cnlOYW1lcyA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJlbnRyeU5hbWVzXCIsIG11c3RCZVN0cmluZyk7XG4gICAgbGV0IGNodW5rTmFtZXMgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwiY2h1bmtOYW1lc1wiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGxldCBhc3NldE5hbWVzID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImFzc2V0TmFtZXNcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgaW5qZWN0ID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImluamVjdFwiLCBtdXN0QmVBcnJheSk7XG4gICAgbGV0IGJhbm5lciA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJiYW5uZXJcIiwgbXVzdEJlT2JqZWN0KTtcbiAgICBsZXQgZm9vdGVyID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImZvb3RlclwiLCBtdXN0QmVPYmplY3QpO1xuICAgIGxldCBlbnRyeVBvaW50cyA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJlbnRyeVBvaW50c1wiLCBtdXN0QmVBcnJheU9yUmVjb3JkKTtcbiAgICBsZXQgYWJzV29ya2luZ0RpciA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJhYnNXb3JraW5nRGlyXCIsIG11c3RCZVN0cmluZyk7XG4gICAgbGV0IHN0ZGluID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInN0ZGluXCIsIG11c3RCZU9iamVjdCk7XG4gICAgbGV0IHdyaXRlID0gKF9hID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcIndyaXRlXCIsIG11c3RCZUJvb2xlYW4pKSAhPSBudWxsID8gX2EgOiB3cml0ZURlZmF1bHQ7XG4gICAgbGV0IGFsbG93T3ZlcndyaXRlID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImFsbG93T3ZlcndyaXRlXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgIGxldCBpbmNyZW1lbnRhbCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJpbmNyZW1lbnRhbFwiLCBtdXN0QmVCb29sZWFuKSA9PT0gdHJ1ZTtcbiAgICBrZXlzLnBsdWdpbnMgPSB0cnVlO1xuICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKG9wdGlvbnMsIGtleXMsIGBpbiAke2NhbGxOYW1lfSgpIGNhbGxgKTtcbiAgICBpZiAoc291cmNlbWFwKSBmbGFncy5wdXNoKGAtLXNvdXJjZW1hcCR7c291cmNlbWFwID09PSB0cnVlID8gXCJcIiA6IGA9JHtzb3VyY2VtYXB9YH1gKTtcbiAgICBpZiAoYnVuZGxlKSBmbGFncy5wdXNoKFwiLS1idW5kbGVcIik7XG4gICAgaWYgKGFsbG93T3ZlcndyaXRlKSBmbGFncy5wdXNoKFwiLS1hbGxvdy1vdmVyd3JpdGVcIik7XG4gICAgaWYgKHdhdGNoKSB7XG4gICAgICAgIGZsYWdzLnB1c2goXCItLXdhdGNoXCIpO1xuICAgICAgICBpZiAodHlwZW9mIHdhdGNoID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICAgICAgd2F0Y2hNb2RlID0ge1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCB3YXRjaEtleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgbGV0IG9uUmVidWlsZCA9IGdldEZsYWcod2F0Y2gsIHdhdGNoS2V5cywgXCJvblJlYnVpbGRcIiwgbXVzdEJlRnVuY3Rpb24pO1xuICAgICAgICAgICAgY2hlY2tGb3JJbnZhbGlkRmxhZ3Mod2F0Y2gsIHdhdGNoS2V5cywgYG9uIFwid2F0Y2hcIiBpbiAke2NhbGxOYW1lfSgpIGNhbGxgKTtcbiAgICAgICAgICAgIHdhdGNoTW9kZSA9IHtcbiAgICAgICAgICAgICAgICBvblJlYnVpbGRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNwbGl0dGluZykgZmxhZ3MucHVzaChcIi0tc3BsaXR0aW5nXCIpO1xuICAgIGlmIChwcmVzZXJ2ZVN5bWxpbmtzKSBmbGFncy5wdXNoKFwiLS1wcmVzZXJ2ZS1zeW1saW5rc1wiKTtcbiAgICBpZiAobWV0YWZpbGUpIGZsYWdzLnB1c2goYC0tbWV0YWZpbGVgKTtcbiAgICBpZiAob3V0ZmlsZSkgZmxhZ3MucHVzaChgLS1vdXRmaWxlPSR7b3V0ZmlsZX1gKTtcbiAgICBpZiAob3V0ZGlyKSBmbGFncy5wdXNoKGAtLW91dGRpcj0ke291dGRpcn1gKTtcbiAgICBpZiAob3V0YmFzZSkgZmxhZ3MucHVzaChgLS1vdXRiYXNlPSR7b3V0YmFzZX1gKTtcbiAgICBpZiAocGxhdGZvcm0pIGZsYWdzLnB1c2goYC0tcGxhdGZvcm09JHtwbGF0Zm9ybX1gKTtcbiAgICBpZiAodHNjb25maWcpIGZsYWdzLnB1c2goYC0tdHNjb25maWc9JHt0c2NvbmZpZ31gKTtcbiAgICBpZiAocmVzb2x2ZUV4dGVuc2lvbnMpIHtcbiAgICAgICAgbGV0IHZhbHVlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCB2YWx1ZSBvZiByZXNvbHZlRXh0ZW5zaW9ucyl7XG4gICAgICAgICAgICB2YWx1ZSArPSBcIlwiO1xuICAgICAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoXCIsXCIpID49IDApIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCByZXNvbHZlIGV4dGVuc2lvbjogJHt2YWx1ZX1gKTtcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBmbGFncy5wdXNoKGAtLXJlc29sdmUtZXh0ZW5zaW9ucz0ke3ZhbHVlcy5qb2luKFwiLFwiKX1gKTtcbiAgICB9XG4gICAgaWYgKHB1YmxpY1BhdGgpIGZsYWdzLnB1c2goYC0tcHVibGljLXBhdGg9JHtwdWJsaWNQYXRofWApO1xuICAgIGlmIChlbnRyeU5hbWVzKSBmbGFncy5wdXNoKGAtLWVudHJ5LW5hbWVzPSR7ZW50cnlOYW1lc31gKTtcbiAgICBpZiAoY2h1bmtOYW1lcykgZmxhZ3MucHVzaChgLS1jaHVuay1uYW1lcz0ke2NodW5rTmFtZXN9YCk7XG4gICAgaWYgKGFzc2V0TmFtZXMpIGZsYWdzLnB1c2goYC0tYXNzZXQtbmFtZXM9JHthc3NldE5hbWVzfWApO1xuICAgIGlmIChtYWluRmllbGRzKSB7XG4gICAgICAgIGxldCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgdmFsdWUgb2YgbWFpbkZpZWxkcyl7XG4gICAgICAgICAgICB2YWx1ZSArPSBcIlwiO1xuICAgICAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoXCIsXCIpID49IDApIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBtYWluIGZpZWxkOiAke3ZhbHVlfWApO1xuICAgICAgICAgICAgdmFsdWVzLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGZsYWdzLnB1c2goYC0tbWFpbi1maWVsZHM9JHt2YWx1ZXMuam9pbihcIixcIil9YCk7XG4gICAgfVxuICAgIGlmIChjb25kaXRpb25zKSB7XG4gICAgICAgIGxldCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgdmFsdWUgb2YgY29uZGl0aW9ucyl7XG4gICAgICAgICAgICB2YWx1ZSArPSBcIlwiO1xuICAgICAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoXCIsXCIpID49IDApIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjb25kaXRpb246ICR7dmFsdWV9YCk7XG4gICAgICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZmxhZ3MucHVzaChgLS1jb25kaXRpb25zPSR7dmFsdWVzLmpvaW4oXCIsXCIpfWApO1xuICAgIH1cbiAgICBpZiAoZXh0ZXJuYWwpIGZvciAobGV0IG5hbWUgb2YgZXh0ZXJuYWwpZmxhZ3MucHVzaChgLS1leHRlcm5hbDoke25hbWV9YCk7XG4gICAgaWYgKGJhbm5lcikge1xuICAgICAgICBmb3IobGV0IHR5cGUgaW4gYmFubmVyKXtcbiAgICAgICAgICAgIGlmICh0eXBlLmluZGV4T2YoXCI9XCIpID49IDApIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBiYW5uZXIgZmlsZSB0eXBlOiAke3R5cGV9YCk7XG4gICAgICAgICAgICBmbGFncy5wdXNoKGAtLWJhbm5lcjoke3R5cGV9PSR7YmFubmVyW3R5cGVdfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChmb290ZXIpIHtcbiAgICAgICAgZm9yKGxldCB0eXBlIGluIGZvb3Rlcil7XG4gICAgICAgICAgICBpZiAodHlwZS5pbmRleE9mKFwiPVwiKSA+PSAwKSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZm9vdGVyIGZpbGUgdHlwZTogJHt0eXBlfWApO1xuICAgICAgICAgICAgZmxhZ3MucHVzaChgLS1mb290ZXI6JHt0eXBlfT0ke2Zvb3Rlclt0eXBlXX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW5qZWN0KSBmb3IgKGxldCBwYXRoIG9mIGluamVjdClmbGFncy5wdXNoKGAtLWluamVjdDoke3BhdGh9YCk7XG4gICAgaWYgKGxvYWRlcikge1xuICAgICAgICBmb3IobGV0IGV4dCBpbiBsb2FkZXIpe1xuICAgICAgICAgICAgaWYgKGV4dC5pbmRleE9mKFwiPVwiKSA+PSAwKSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgbG9hZGVyIGV4dGVuc2lvbjogJHtleHR9YCk7XG4gICAgICAgICAgICBmbGFncy5wdXNoKGAtLWxvYWRlcjoke2V4dH09JHtsb2FkZXJbZXh0XX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAob3V0RXh0ZW5zaW9uKSB7XG4gICAgICAgIGZvcihsZXQgZXh0IGluIG91dEV4dGVuc2lvbil7XG4gICAgICAgICAgICBpZiAoZXh0LmluZGV4T2YoXCI9XCIpID49IDApIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBvdXQgZXh0ZW5zaW9uOiAke2V4dH1gKTtcbiAgICAgICAgICAgIGZsYWdzLnB1c2goYC0tb3V0LWV4dGVuc2lvbjoke2V4dH09JHtvdXRFeHRlbnNpb25bZXh0XX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZW50cnlQb2ludHMpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnlQb2ludHMpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBlbnRyeVBvaW50IG9mIGVudHJ5UG9pbnRzKXtcbiAgICAgICAgICAgICAgICBlbnRyaWVzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBlbnRyeVBvaW50ICsgXCJcIlxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGVudHJ5UG9pbnRzKSl7XG4gICAgICAgICAgICAgICAgZW50cmllcy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgICAga2V5ICsgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgKyBcIlwiXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHN0ZGluKSB7XG4gICAgICAgIGxldCBzdGRpbktleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBsZXQgY29udGVudHMgPSBnZXRGbGFnKHN0ZGluLCBzdGRpbktleXMsIFwiY29udGVudHNcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgbGV0IHJlc29sdmVEaXIgPSBnZXRGbGFnKHN0ZGluLCBzdGRpbktleXMsIFwicmVzb2x2ZURpclwiLCBtdXN0QmVTdHJpbmcpO1xuICAgICAgICBsZXQgc291cmNlZmlsZSA9IGdldEZsYWcoc3RkaW4sIHN0ZGluS2V5cywgXCJzb3VyY2VmaWxlXCIsIG11c3RCZVN0cmluZyk7XG4gICAgICAgIGxldCBsb2FkZXIyID0gZ2V0RmxhZyhzdGRpbiwgc3RkaW5LZXlzLCBcImxvYWRlclwiLCBtdXN0QmVTdHJpbmcpO1xuICAgICAgICBjaGVja0ZvckludmFsaWRGbGFncyhzdGRpbiwgc3RkaW5LZXlzLCAnaW4gXCJzdGRpblwiIG9iamVjdCcpO1xuICAgICAgICBpZiAoc291cmNlZmlsZSkgZmxhZ3MucHVzaChgLS1zb3VyY2VmaWxlPSR7c291cmNlZmlsZX1gKTtcbiAgICAgICAgaWYgKGxvYWRlcjIpIGZsYWdzLnB1c2goYC0tbG9hZGVyPSR7bG9hZGVyMn1gKTtcbiAgICAgICAgaWYgKHJlc29sdmVEaXIpIHN0ZGluUmVzb2x2ZURpciA9IHJlc29sdmVEaXIgKyBcIlwiO1xuICAgICAgICBzdGRpbkNvbnRlbnRzID0gY29udGVudHMgPyBjb250ZW50cyArIFwiXCIgOiBcIlwiO1xuICAgIH1cbiAgICBsZXQgbm9kZVBhdGhzID0gW107XG4gICAgaWYgKG5vZGVQYXRoc0lucHV0KSB7XG4gICAgICAgIGZvciAobGV0IHZhbHVlIG9mIG5vZGVQYXRoc0lucHV0KXtcbiAgICAgICAgICAgIHZhbHVlICs9IFwiXCI7XG4gICAgICAgICAgICBub2RlUGF0aHMucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZW50cmllcyxcbiAgICAgICAgZmxhZ3MsXG4gICAgICAgIHdyaXRlLFxuICAgICAgICBzdGRpbkNvbnRlbnRzLFxuICAgICAgICBzdGRpblJlc29sdmVEaXIsXG4gICAgICAgIGFic1dvcmtpbmdEaXIsXG4gICAgICAgIGluY3JlbWVudGFsLFxuICAgICAgICBub2RlUGF0aHMsXG4gICAgICAgIHdhdGNoOiB3YXRjaE1vZGVcbiAgICB9O1xufVxuZnVuY3Rpb24gZmxhZ3NGb3JUcmFuc2Zvcm1PcHRpb25zKGNhbGxOYW1lLCBvcHRpb25zLCBpc1RUWSwgbG9nTGV2ZWxEZWZhdWx0KSB7XG4gICAgbGV0IGZsYWdzID0gW107XG4gICAgbGV0IGtleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHB1c2hMb2dGbGFncyhmbGFncywgb3B0aW9ucywga2V5cywgaXNUVFksIGxvZ0xldmVsRGVmYXVsdCk7XG4gICAgcHVzaENvbW1vbkZsYWdzKGZsYWdzLCBvcHRpb25zLCBrZXlzKTtcbiAgICBsZXQgc291cmNlbWFwID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInNvdXJjZW1hcFwiLCBtdXN0QmVTdHJpbmdPckJvb2xlYW4pO1xuICAgIGxldCB0c2NvbmZpZ1JhdyA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJ0c2NvbmZpZ1Jhd1wiLCBtdXN0QmVTdHJpbmdPck9iamVjdCk7XG4gICAgbGV0IHNvdXJjZWZpbGUgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwic291cmNlZmlsZVwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGxldCBsb2FkZXIgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwibG9hZGVyXCIsIG11c3RCZVN0cmluZyk7XG4gICAgbGV0IGJhbm5lciA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJiYW5uZXJcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgZm9vdGVyID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcImZvb3RlclwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKG9wdGlvbnMsIGtleXMsIGBpbiAke2NhbGxOYW1lfSgpIGNhbGxgKTtcbiAgICBpZiAoc291cmNlbWFwKSBmbGFncy5wdXNoKGAtLXNvdXJjZW1hcD0ke3NvdXJjZW1hcCA9PT0gdHJ1ZSA/IFwiZXh0ZXJuYWxcIiA6IHNvdXJjZW1hcH1gKTtcbiAgICBpZiAodHNjb25maWdSYXcpIGZsYWdzLnB1c2goYC0tdHNjb25maWctcmF3PSR7dHlwZW9mIHRzY29uZmlnUmF3ID09PSBcInN0cmluZ1wiID8gdHNjb25maWdSYXcgOiBKU09OLnN0cmluZ2lmeSh0c2NvbmZpZ1Jhdyl9YCk7XG4gICAgaWYgKHNvdXJjZWZpbGUpIGZsYWdzLnB1c2goYC0tc291cmNlZmlsZT0ke3NvdXJjZWZpbGV9YCk7XG4gICAgaWYgKGxvYWRlcikgZmxhZ3MucHVzaChgLS1sb2FkZXI9JHtsb2FkZXJ9YCk7XG4gICAgaWYgKGJhbm5lcikgZmxhZ3MucHVzaChgLS1iYW5uZXI9JHtiYW5uZXJ9YCk7XG4gICAgaWYgKGZvb3RlcikgZmxhZ3MucHVzaChgLS1mb290ZXI9JHtmb290ZXJ9YCk7XG4gICAgcmV0dXJuIGZsYWdzO1xufVxuZnVuY3Rpb24gY3JlYXRlQ2hhbm5lbChzdHJlYW1Jbikge1xuICAgIGxldCByZXNwb25zZUNhbGxiYWNrcyA9IG5ldyBNYXAoKTtcbiAgICBsZXQgcGx1Z2luQ2FsbGJhY2tzID0gbmV3IE1hcCgpO1xuICAgIGxldCB3YXRjaENhbGxiYWNrcyA9IG5ldyBNYXAoKTtcbiAgICBsZXQgc2VydmVDYWxsYmFja3MgPSBuZXcgTWFwKCk7XG4gICAgbGV0IG5leHRTZXJ2ZUlEID0gMDtcbiAgICBsZXQgaXNDbG9zZWQgPSBmYWxzZTtcbiAgICBsZXQgbmV4dFJlcXVlc3RJRCA9IDA7XG4gICAgbGV0IG5leHRCdWlsZEtleSA9IDA7XG4gICAgbGV0IHN0ZG91dCA9IG5ldyBVaW50OEFycmF5KDE2ICogMTAyNCk7XG4gICAgbGV0IHN0ZG91dFVzZWQgPSAwO1xuICAgIGxldCByZWFkRnJvbVN0ZG91dCA9IChjaHVuayk9PntcbiAgICAgICAgbGV0IGxpbWl0ID0gc3Rkb3V0VXNlZCArIGNodW5rLmxlbmd0aDtcbiAgICAgICAgaWYgKGxpbWl0ID4gc3Rkb3V0Lmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHN3YXAgPSBuZXcgVWludDhBcnJheShsaW1pdCAqIDIpO1xuICAgICAgICAgICAgc3dhcC5zZXQoc3Rkb3V0KTtcbiAgICAgICAgICAgIHN0ZG91dCA9IHN3YXA7XG4gICAgICAgIH1cbiAgICAgICAgc3Rkb3V0LnNldChjaHVuaywgc3Rkb3V0VXNlZCk7XG4gICAgICAgIHN0ZG91dFVzZWQgKz0gY2h1bmsubGVuZ3RoO1xuICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICAgICAgd2hpbGUob2Zmc2V0ICsgNCA8PSBzdGRvdXRVc2VkKXtcbiAgICAgICAgICAgIGxldCBsZW5ndGggPSByZWFkVUludDMyTEUoc3Rkb3V0LCBvZmZzZXQpO1xuICAgICAgICAgICAgaWYgKG9mZnNldCArIDQgKyBsZW5ndGggPiBzdGRvdXRVc2VkKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvZmZzZXQgKz0gNDtcbiAgICAgICAgICAgIGhhbmRsZUluY29taW5nUGFja2V0KHN0ZG91dC5zdWJhcnJheShvZmZzZXQsIG9mZnNldCArIGxlbmd0aCkpO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IGxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2Zmc2V0ID4gMCkge1xuICAgICAgICAgICAgc3Rkb3V0LmNvcHlXaXRoaW4oMCwgb2Zmc2V0LCBzdGRvdXRVc2VkKTtcbiAgICAgICAgICAgIHN0ZG91dFVzZWQgLT0gb2Zmc2V0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBsZXQgYWZ0ZXJDbG9zZSA9ICgpPT57XG4gICAgICAgIGlzQ2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgZm9yIChsZXQgY2FsbGJhY2sgb2YgcmVzcG9uc2VDYWxsYmFja3MudmFsdWVzKCkpe1xuICAgICAgICAgICAgY2FsbGJhY2soXCJUaGUgc2VydmljZSB3YXMgc3RvcHBlZFwiLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICByZXNwb25zZUNhbGxiYWNrcy5jbGVhcigpO1xuICAgICAgICBmb3IgKGxldCBjYWxsYmFja3Mgb2Ygc2VydmVDYWxsYmFja3MudmFsdWVzKCkpe1xuICAgICAgICAgICAgY2FsbGJhY2tzLm9uV2FpdChcIlRoZSBzZXJ2aWNlIHdhcyBzdG9wcGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIHNlcnZlQ2FsbGJhY2tzLmNsZWFyKCk7XG4gICAgICAgIGZvciAobGV0IGNhbGxiYWNrMSBvZiB3YXRjaENhbGxiYWNrcy52YWx1ZXMoKSl7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrMShuZXcgRXJyb3IoXCJUaGUgc2VydmljZSB3YXMgc3RvcHBlZFwiKSwgbnVsbCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB3YXRjaENhbGxiYWNrcy5jbGVhcigpO1xuICAgIH07XG4gICAgbGV0IHNlbmRSZXF1ZXN0ID0gKHJlZnMsIHZhbHVlLCBjYWxsYmFjayk9PntcbiAgICAgICAgaWYgKGlzQ2xvc2VkKSByZXR1cm4gY2FsbGJhY2soXCJUaGUgc2VydmljZSBpcyBubyBsb25nZXIgcnVubmluZ1wiLCBudWxsKTtcbiAgICAgICAgbGV0IGlkID0gbmV4dFJlcXVlc3RJRCsrO1xuICAgICAgICByZXNwb25zZUNhbGxiYWNrcy5zZXQoaWQsIChlcnJvciwgcmVzcG9uc2UpPT57XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCByZXNwb25zZSk7XG4gICAgICAgICAgICB9IGZpbmFsbHl7XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMpIHJlZnMudW5yZWYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZWZzKSByZWZzLnJlZigpO1xuICAgICAgICBzdHJlYW1Jbi53cml0ZVRvU3RkaW4oZW5jb2RlUGFja2V0KHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgaXNSZXF1ZXN0OiB0cnVlLFxuICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgfSkpO1xuICAgIH07XG4gICAgbGV0IHNlbmRSZXNwb25zZSA9IChpZCwgdmFsdWUpPT57XG4gICAgICAgIGlmIChpc0Nsb3NlZCkgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHNlcnZpY2UgaXMgbm8gbG9uZ2VyIHJ1bm5pbmdcIik7XG4gICAgICAgIHN0cmVhbUluLndyaXRlVG9TdGRpbihlbmNvZGVQYWNrZXQoe1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBpc1JlcXVlc3Q6IGZhbHNlLFxuICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgfSkpO1xuICAgIH07XG4gICAgbGV0IGhhbmRsZVJlcXVlc3QgPSBhc3luYyAoaWQsIHJlcXVlc3QpPT57XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzd2l0Y2gocmVxdWVzdC5jb21tYW5kKXtcbiAgICAgICAgICAgICAgICBjYXNlIFwicGluZ1wiOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kUmVzcG9uc2UoaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFwic3RhcnRcIjpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbGxiYWNrID0gcGx1Z2luQ2FsbGJhY2tzLmdldChyZXF1ZXN0LmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbGxiYWNrKSBzZW5kUmVzcG9uc2UoaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBzZW5kUmVzcG9uc2UoaWQsIGF3YWl0IGNhbGxiYWNrKHJlcXVlc3QpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBcInJlc29sdmVcIjpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbGxiYWNrID0gcGx1Z2luQ2FsbGJhY2tzLmdldChyZXF1ZXN0LmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbGxiYWNrKSBzZW5kUmVzcG9uc2UoaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBzZW5kUmVzcG9uc2UoaWQsIGF3YWl0IGNhbGxiYWNrKHJlcXVlc3QpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBcImxvYWRcIjpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbGxiYWNrID0gcGx1Z2luQ2FsbGJhY2tzLmdldChyZXF1ZXN0LmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbGxiYWNrKSBzZW5kUmVzcG9uc2UoaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBzZW5kUmVzcG9uc2UoaWQsIGF3YWl0IGNhbGxiYWNrKHJlcXVlc3QpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBcInNlcnZlLXJlcXVlc3RcIjpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbGxiYWNrcyA9IHNlcnZlQ2FsbGJhY2tzLmdldChyZXF1ZXN0LnNlcnZlSUQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrcyAmJiBjYWxsYmFja3Mub25SZXF1ZXN0KSBjYWxsYmFja3Mub25SZXF1ZXN0KHJlcXVlc3QuYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kUmVzcG9uc2UoaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFwic2VydmUtd2FpdFwiOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FsbGJhY2tzID0gc2VydmVDYWxsYmFja3MuZ2V0KHJlcXVlc3Quc2VydmVJRCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2tzKSBjYWxsYmFja3Mub25XYWl0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKGlkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBcIndhdGNoLXJlYnVpbGRcIjpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbGxiYWNrID0gd2F0Y2hDYWxsYmFja3MuZ2V0KHJlcXVlc3Qud2F0Y2hJRCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2sobnVsbCwgcmVxdWVzdC5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRSZXNwb25zZShpZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjb21tYW5kOiBgICsgcmVxdWVzdC5jb21tYW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgc2VuZFJlc3BvbnNlKGlkLCB7XG4gICAgICAgICAgICAgICAgZXJyb3JzOiBbXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3RFcnJvck1lc3NhZ2VWOChlLCBzdHJlYW1JbiwgbnVsbCwgdm9pZCAwLCBcIlwiKVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBsZXQgaXNGaXJzdFBhY2tldCA9IHRydWU7XG4gICAgbGV0IGhhbmRsZUluY29taW5nUGFja2V0ID0gKGJ5dGVzKT0+e1xuICAgICAgICBpZiAoaXNGaXJzdFBhY2tldCkge1xuICAgICAgICAgICAgaXNGaXJzdFBhY2tldCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGJpbmFyeVZlcnNpb24gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLmJ5dGVzKTtcbiAgICAgICAgICAgIGlmIChiaW5hcnlWZXJzaW9uICE9PSBcIjAuMTMuMTFcIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHN0YXJ0IHNlcnZpY2U6IEhvc3QgdmVyc2lvbiBcIiR7XCIwLjEzLjExXCJ9XCIgZG9lcyBub3QgbWF0Y2ggYmluYXJ5IHZlcnNpb24gJHtKU09OLnN0cmluZ2lmeShiaW5hcnlWZXJzaW9uKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGFja2V0ID0gZGVjb2RlUGFja2V0KGJ5dGVzKTtcbiAgICAgICAgaWYgKHBhY2tldC5pc1JlcXVlc3QpIHtcbiAgICAgICAgICAgIGhhbmRsZVJlcXVlc3QocGFja2V0LmlkLCBwYWNrZXQudmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGNhbGxiYWNrID0gcmVzcG9uc2VDYWxsYmFja3MuZ2V0KHBhY2tldC5pZCk7XG4gICAgICAgICAgICByZXNwb25zZUNhbGxiYWNrcy5kZWxldGUocGFja2V0LmlkKTtcbiAgICAgICAgICAgIGlmIChwYWNrZXQudmFsdWUuZXJyb3IpIGNhbGxiYWNrKHBhY2tldC52YWx1ZS5lcnJvciwge1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbHNlIGNhbGxiYWNrKG51bGwsIHBhY2tldC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGxldCBoYW5kbGVQbHVnaW5zID0gYXN5bmMgKGluaXRpYWxPcHRpb25zLCBwbHVnaW5zLCBidWlsZEtleSwgc3Rhc2gpPT57XG4gICAgICAgIGxldCBvblN0YXJ0Q2FsbGJhY2tzID0gW107XG4gICAgICAgIGxldCBvbkVuZENhbGxiYWNrcyA9IFtdO1xuICAgICAgICBsZXQgb25SZXNvbHZlQ2FsbGJhY2tzID0ge1xuICAgICAgICB9O1xuICAgICAgICBsZXQgb25Mb2FkQ2FsbGJhY2tzID0ge1xuICAgICAgICB9O1xuICAgICAgICBsZXQgbmV4dENhbGxiYWNrSUQgPSAwO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGxldCByZXF1ZXN0UGx1Z2lucyA9IFtdO1xuICAgICAgICBwbHVnaW5zID0gW1xuICAgICAgICAgICAgLi4ucGx1Z2luc1xuICAgICAgICBdO1xuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHBsdWdpbnMpe1xuICAgICAgICAgICAgbGV0IGtleXMgPSB7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoYFBsdWdpbiBhdCBpbmRleCAke2l9IG11c3QgYmUgYW4gb2JqZWN0YCk7XG4gICAgICAgICAgICBsZXQgbmFtZSA9IGdldEZsYWcoaXRlbSwga2V5cywgXCJuYW1lXCIsIG11c3RCZVN0cmluZyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIgfHwgbmFtZSA9PT0gXCJcIikgdGhyb3cgbmV3IEVycm9yKGBQbHVnaW4gYXQgaW5kZXggJHtpfSBpcyBtaXNzaW5nIGEgbmFtZWApO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsZXQgc2V0dXAgPSBnZXRGbGFnKGl0ZW0sIGtleXMsIFwic2V0dXBcIiwgbXVzdEJlRnVuY3Rpb24pO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2V0dXAgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yKGBQbHVnaW4gaXMgbWlzc2luZyBhIHNldHVwIGZ1bmN0aW9uYCk7XG4gICAgICAgICAgICAgICAgY2hlY2tGb3JJbnZhbGlkRmxhZ3MoaXRlbSwga2V5cywgYG9uIHBsdWdpbiAke0pTT04uc3RyaW5naWZ5KG5hbWUpfWApO1xuICAgICAgICAgICAgICAgIGxldCBwbHVnaW4gPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG9uUmVzb2x2ZTogW10sXG4gICAgICAgICAgICAgICAgICAgIG9uTG9hZDogW11cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICBsZXQgcHJvbWlzZSA9IHNldHVwKHtcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIG9uU3RhcnQgKGNhbGxiYWNrMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ2lzdGVyZWRUZXh0ID0gYFRoaXMgZXJyb3IgY2FtZSBmcm9tIHRoZSBcIm9uU3RhcnRcIiBjYWxsYmFjayByZWdpc3RlcmVkIGhlcmVgO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ2lzdGVyZWROb3RlID0gZXh0cmFjdENhbGxlclY4KG5ldyBFcnJvcihyZWdpc3RlcmVkVGV4dCksIHN0cmVhbUluLCBcIm9uU3RhcnRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBvblN0YXJ0Q2FsbGJhY2tzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RlOiByZWdpc3RlcmVkTm90ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uRW5kIChjYWxsYmFjazIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdpc3RlcmVkVGV4dCA9IGBUaGlzIGVycm9yIGNhbWUgZnJvbSB0aGUgXCJvbkVuZFwiIGNhbGxiYWNrIHJlZ2lzdGVyZWQgaGVyZWA7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnaXN0ZXJlZE5vdGUgPSBleHRyYWN0Q2FsbGVyVjgobmV3IEVycm9yKHJlZ2lzdGVyZWRUZXh0KSwgc3RyZWFtSW4sIFwib25FbmRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkVuZENhbGxiYWNrcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjazIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90ZTogcmVnaXN0ZXJlZE5vdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvblJlc29sdmUgKG9wdGlvbnMsIGNhbGxiYWNrMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ2lzdGVyZWRUZXh0ID0gYFRoaXMgZXJyb3IgY2FtZSBmcm9tIHRoZSBcIm9uUmVzb2x2ZVwiIGNhbGxiYWNrIHJlZ2lzdGVyZWQgaGVyZWA7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnaXN0ZXJlZE5vdGUgPSBleHRyYWN0Q2FsbGVyVjgobmV3IEVycm9yKHJlZ2lzdGVyZWRUZXh0KSwgc3RyZWFtSW4sIFwib25SZXNvbHZlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGtleXMyID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXIgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMyLCBcImZpbHRlclwiLCBtdXN0QmVSZWdFeHApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5hbWVzcGFjZSA9IGdldEZsYWcob3B0aW9ucywga2V5czIsIFwibmFtZXNwYWNlXCIsIG11c3RCZVN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0ZvckludmFsaWRGbGFncyhvcHRpb25zLCBrZXlzMiwgYGluIG9uUmVzb2x2ZSgpIGNhbGwgZm9yIHBsdWdpbiAke0pTT04uc3RyaW5naWZ5KG5hbWUpfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlciA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoYG9uUmVzb2x2ZSgpIGNhbGwgaXMgbWlzc2luZyBhIGZpbHRlcmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlkID0gbmV4dENhbGxiYWNrSUQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzb2x2ZUNhbGxiYWNrc1tpZF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2syLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGU6IHJlZ2lzdGVyZWROb3RlXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luLm9uUmVzb2x2ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXI6IGZpbHRlci5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiBuYW1lc3BhY2UgfHwgXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uTG9hZCAob3B0aW9ucywgY2FsbGJhY2syKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnaXN0ZXJlZFRleHQgPSBgVGhpcyBlcnJvciBjYW1lIGZyb20gdGhlIFwib25Mb2FkXCIgY2FsbGJhY2sgcmVnaXN0ZXJlZCBoZXJlYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdpc3RlcmVkTm90ZSA9IGV4dHJhY3RDYWxsZXJWOChuZXcgRXJyb3IocmVnaXN0ZXJlZFRleHQpLCBzdHJlYW1JbiwgXCJvbkxvYWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQga2V5czIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlciA9IGdldEZsYWcob3B0aW9ucywga2V5czIsIFwiZmlsdGVyXCIsIG11c3RCZVJlZ0V4cCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmFtZXNwYWNlID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzMiwgXCJuYW1lc3BhY2VcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKG9wdGlvbnMsIGtleXMyLCBgaW4gb25Mb2FkKCkgY2FsbCBmb3IgcGx1Z2luICR7SlNPTi5zdHJpbmdpZnkobmFtZSl9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyID09IG51bGwpIHRocm93IG5ldyBFcnJvcihgb25Mb2FkKCkgY2FsbCBpcyBtaXNzaW5nIGEgZmlsdGVyYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaWQgPSBuZXh0Q2FsbGJhY2tJRCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgb25Mb2FkQ2FsbGJhY2tzW2lkXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjazIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90ZTogcmVnaXN0ZXJlZE5vdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4ub25Mb2FkLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcjogZmlsdGVyLnNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IG5hbWVzcGFjZSB8fCBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChwcm9taXNlKSBhd2FpdCBwcm9taXNlO1xuICAgICAgICAgICAgICAgIHJlcXVlc3RQbHVnaW5zLnB1c2gocGx1Z2luKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBvazogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlLFxuICAgICAgICAgICAgICAgICAgICBwbHVnaW5OYW1lOiBuYW1lXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYWxsYmFjayA9IGFzeW5jIChyZXF1ZXN0KT0+e1xuICAgICAgICAgICAgc3dpdGNoKHJlcXVlc3QuY29tbWFuZCl7XG4gICAgICAgICAgICAgICAgY2FzZSBcInN0YXJ0XCI6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzOiBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKG9uU3RhcnRDYWxsYmFja3MubWFwKGFzeW5jICh7IG5hbWUgLCBjYWxsYmFjazogY2FsbGJhY2syICwgbm90ZSAgfSk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgY2FsbGJhY2syKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgb25TdGFydCgpIGNhbGxiYWNrIGluIHBsdWdpbiAke0pTT04uc3RyaW5naWZ5KG5hbWUpfSB0byByZXR1cm4gYW4gb2JqZWN0YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQga2V5cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3JzID0gZ2V0RmxhZyhyZXN1bHQsIGtleXMsIFwiZXJyb3JzXCIsIG11c3RCZUFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3YXJuaW5ncyA9IGdldEZsYWcocmVzdWx0LCBrZXlzLCBcIndhcm5pbmdzXCIsIG11c3RCZUFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKHJlc3VsdCwga2V5cywgYGZyb20gb25TdGFydCgpIGNhbGxiYWNrIGluIHBsdWdpbiAke0pTT04uc3RyaW5naWZ5KG5hbWUpfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9ycyAhPSBudWxsKSByZXNwb25zZS5lcnJvcnMucHVzaCguLi5zYW5pdGl6ZU1lc3NhZ2VzKGVycm9ycywgXCJlcnJvcnNcIiwgc3Rhc2gsIG5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXJuaW5ncyAhPSBudWxsKSByZXNwb25zZS53YXJuaW5ncy5wdXNoKC4uLnNhbml0aXplTWVzc2FnZXMod2FybmluZ3MsIFwid2FybmluZ3NcIiwgc3Rhc2gsIG5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZXJyb3JzLnB1c2goZXh0cmFjdEVycm9yTWVzc2FnZVY4KGUsIHN0cmVhbUluLCBzdGFzaCwgbm90ZSAmJiBub3RlKCksIG5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFwicmVzb2x2ZVwiOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBuYW1lID0gXCJcIiwgY2FsbGJhY2syLCBub3RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaWQgb2YgcmVxdWVzdC5pZHMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh7IG5hbWUgLCBjYWxsYmFjazogY2FsbGJhY2syICwgbm90ZSAgfSA9IG9uUmVzb2x2ZUNhbGxiYWNrc1tpZF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgY2FsbGJhY2syKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHJlcXVlc3QucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydGVyOiByZXF1ZXN0LmltcG9ydGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiByZXF1ZXN0Lm5hbWVzcGFjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVEaXI6IHJlcXVlc3QucmVzb2x2ZURpcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6IHJlcXVlc3Qua2luZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbkRhdGE6IHN0YXNoLmxvYWQocmVxdWVzdC5wbHVnaW5EYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBvblJlc29sdmUoKSBjYWxsYmFjayBpbiBwbHVnaW4gJHtKU09OLnN0cmluZ2lmeShuYW1lKX0gdG8gcmV0dXJuIGFuIG9iamVjdGApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGtleXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBsdWdpbk5hbWUgPSBnZXRGbGFnKHJlc3VsdCwga2V5cywgXCJwbHVnaW5OYW1lXCIsIG11c3RCZVN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGF0aCA9IGdldEZsYWcocmVzdWx0LCBrZXlzLCBcInBhdGhcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuYW1lc3BhY2UgPSBnZXRGbGFnKHJlc3VsdCwga2V5cywgXCJuYW1lc3BhY2VcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleHRlcm5hbCA9IGdldEZsYWcocmVzdWx0LCBrZXlzLCBcImV4dGVybmFsXCIsIG11c3RCZUJvb2xlYW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNpZGVFZmZlY3RzID0gZ2V0RmxhZyhyZXN1bHQsIGtleXMsIFwic2lkZUVmZmVjdHNcIiwgbXVzdEJlQm9vbGVhbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGx1Z2luRGF0YSA9IGdldEZsYWcocmVzdWx0LCBrZXlzLCBcInBsdWdpbkRhdGFcIiwgY2FuQmVBbnl0aGluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3JzID0gZ2V0RmxhZyhyZXN1bHQsIGtleXMsIFwiZXJyb3JzXCIsIG11c3RCZUFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3YXJuaW5ncyA9IGdldEZsYWcocmVzdWx0LCBrZXlzLCBcIndhcm5pbmdzXCIsIG11c3RCZUFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3YXRjaEZpbGVzID0gZ2V0RmxhZyhyZXN1bHQsIGtleXMsIFwid2F0Y2hGaWxlc1wiLCBtdXN0QmVBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2F0Y2hEaXJzID0gZ2V0RmxhZyhyZXN1bHQsIGtleXMsIFwid2F0Y2hEaXJzXCIsIG11c3RCZUFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKHJlc3VsdCwga2V5cywgYGZyb20gb25SZXNvbHZlKCkgY2FsbGJhY2sgaW4gcGx1Z2luICR7SlNPTi5zdHJpbmdpZnkobmFtZSl9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5pZCA9IGlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsdWdpbk5hbWUgIT0gbnVsbCkgcmVzcG9uc2UucGx1Z2luTmFtZSA9IHBsdWdpbk5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGF0aCAhPSBudWxsKSByZXNwb25zZS5wYXRoID0gcGF0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYW1lc3BhY2UgIT0gbnVsbCkgcmVzcG9uc2UubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4dGVybmFsICE9IG51bGwpIHJlc3BvbnNlLmV4dGVybmFsID0gZXh0ZXJuYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZUVmZmVjdHMgIT0gbnVsbCkgcmVzcG9uc2Uuc2lkZUVmZmVjdHMgPSBzaWRlRWZmZWN0cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbHVnaW5EYXRhICE9IG51bGwpIHJlc3BvbnNlLnBsdWdpbkRhdGEgPSBzdGFzaC5zdG9yZShwbHVnaW5EYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcnMgIT0gbnVsbCkgcmVzcG9uc2UuZXJyb3JzID0gc2FuaXRpemVNZXNzYWdlcyhlcnJvcnMsIFwiZXJyb3JzXCIsIHN0YXNoLCBuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXJuaW5ncyAhPSBudWxsKSByZXNwb25zZS53YXJuaW5ncyA9IHNhbml0aXplTWVzc2FnZXMod2FybmluZ3MsIFwid2FybmluZ3NcIiwgc3Rhc2gsIG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoRmlsZXMgIT0gbnVsbCkgcmVzcG9uc2Uud2F0Y2hGaWxlcyA9IHNhbml0aXplU3RyaW5nQXJyYXkod2F0Y2hGaWxlcywgXCJ3YXRjaEZpbGVzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoRGlycyAhPSBudWxsKSByZXNwb25zZS53YXRjaERpcnMgPSBzYW5pdGl6ZVN0cmluZ0FycmF5KHdhdGNoRGlycywgXCJ3YXRjaERpcnNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdEVycm9yTWVzc2FnZVY4KGUsIHN0cmVhbUluLCBzdGFzaCwgbm90ZSAmJiBub3RlKCksIG5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBcImxvYWRcIjpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgbmFtZSA9IFwiXCIsIGNhbGxiYWNrMiwgbm90ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGlkIG9mIHJlcXVlc3QuaWRzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoeyBuYW1lICwgY2FsbGJhY2s6IGNhbGxiYWNrMiAsIG5vdGUgIH0gPSBvbkxvYWRDYWxsYmFja3NbaWRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGNhbGxiYWNrMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiByZXF1ZXN0LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IHJlcXVlc3QubmFtZXNwYWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luRGF0YTogc3Rhc2gubG9hZChyZXF1ZXN0LnBsdWdpbkRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIG9uTG9hZCgpIGNhbGxiYWNrIGluIHBsdWdpbiAke0pTT04uc3RyaW5naWZ5KG5hbWUpfSB0byByZXR1cm4gYW4gb2JqZWN0YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQga2V5cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGx1Z2luTmFtZSA9IGdldEZsYWcocmVzdWx0LCBrZXlzLCBcInBsdWdpbk5hbWVcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250ZW50cyA9IGdldEZsYWcocmVzdWx0LCBrZXlzLCBcImNvbnRlbnRzXCIsIG11c3RCZVN0cmluZ09yVWludDhBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzb2x2ZURpciA9IGdldEZsYWcocmVzdWx0LCBrZXlzLCBcInJlc29sdmVEaXJcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwbHVnaW5EYXRhID0gZ2V0RmxhZyhyZXN1bHQsIGtleXMsIFwicGx1Z2luRGF0YVwiLCBjYW5CZUFueXRoaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsb2FkZXIgPSBnZXRGbGFnKHJlc3VsdCwga2V5cywgXCJsb2FkZXJcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlcnJvcnMgPSBnZXRGbGFnKHJlc3VsdCwga2V5cywgXCJlcnJvcnNcIiwgbXVzdEJlQXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdhcm5pbmdzID0gZ2V0RmxhZyhyZXN1bHQsIGtleXMsIFwid2FybmluZ3NcIiwgbXVzdEJlQXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdhdGNoRmlsZXMgPSBnZXRGbGFnKHJlc3VsdCwga2V5cywgXCJ3YXRjaEZpbGVzXCIsIG11c3RCZUFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3YXRjaERpcnMgPSBnZXRGbGFnKHJlc3VsdCwga2V5cywgXCJ3YXRjaERpcnNcIiwgbXVzdEJlQXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tGb3JJbnZhbGlkRmxhZ3MocmVzdWx0LCBrZXlzLCBgZnJvbSBvbkxvYWQoKSBjYWxsYmFjayBpbiBwbHVnaW4gJHtKU09OLnN0cmluZ2lmeShuYW1lKX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmlkID0gaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luTmFtZSAhPSBudWxsKSByZXNwb25zZS5wbHVnaW5OYW1lID0gcGx1Z2luTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50cyBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHJlc3BvbnNlLmNvbnRlbnRzID0gY29udGVudHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjb250ZW50cyAhPSBudWxsKSByZXNwb25zZS5jb250ZW50cyA9IGVuY29kZVVURjgoY29udGVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc29sdmVEaXIgIT0gbnVsbCkgcmVzcG9uc2UucmVzb2x2ZURpciA9IHJlc29sdmVEaXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luRGF0YSAhPSBudWxsKSByZXNwb25zZS5wbHVnaW5EYXRhID0gc3Rhc2guc3RvcmUocGx1Z2luRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVyICE9IG51bGwpIHJlc3BvbnNlLmxvYWRlciA9IGxvYWRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcnMgIT0gbnVsbCkgcmVzcG9uc2UuZXJyb3JzID0gc2FuaXRpemVNZXNzYWdlcyhlcnJvcnMsIFwiZXJyb3JzXCIsIHN0YXNoLCBuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXJuaW5ncyAhPSBudWxsKSByZXNwb25zZS53YXJuaW5ncyA9IHNhbml0aXplTWVzc2FnZXMod2FybmluZ3MsIFwid2FybmluZ3NcIiwgc3Rhc2gsIG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoRmlsZXMgIT0gbnVsbCkgcmVzcG9uc2Uud2F0Y2hGaWxlcyA9IHNhbml0aXplU3RyaW5nQXJyYXkod2F0Y2hGaWxlcywgXCJ3YXRjaEZpbGVzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoRGlycyAhPSBudWxsKSByZXNwb25zZS53YXRjaERpcnMgPSBzYW5pdGl6ZVN0cmluZ0FycmF5KHdhdGNoRGlycywgXCJ3YXRjaERpcnNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdEVycm9yTWVzc2FnZVY4KGUsIHN0cmVhbUluLCBzdGFzaCwgbm90ZSAmJiBub3RlKCksIG5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGNvbW1hbmQ6IGAgKyByZXF1ZXN0LmNvbW1hbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBsZXQgcnVuT25FbmRDYWxsYmFja3MgPSAocmVzdWx0LCBsb2dQbHVnaW5FcnJvciwgZG9uZSk9PmRvbmUoKVxuICAgICAgICA7XG4gICAgICAgIGlmIChvbkVuZENhbGxiYWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBydW5PbkVuZENhbGxiYWNrcyA9IChyZXN1bHQsIGxvZ1BsdWdpbkVycm9yLCBkb25lKT0+e1xuICAgICAgICAgICAgICAgIChhc3luYyAoKT0+e1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHsgbmFtZSAsIGNhbGxiYWNrOiBjYWxsYmFjazIgLCBub3RlICB9IG9mIG9uRW5kQ2FsbGJhY2tzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2FsbGJhY2syKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmVycm9ycy5wdXNoKGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKT0+bG9nUGx1Z2luRXJyb3IoZSwgbmFtZSwgbm90ZSAmJiBub3RlKCksIHJlc29sdmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSgpLnRoZW4oZG9uZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGxldCByZWZDb3VudCA9IDA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIHJlcXVlc3RQbHVnaW5zLFxuICAgICAgICAgICAgcnVuT25FbmRDYWxsYmFja3MsXG4gICAgICAgICAgICBwbHVnaW5SZWZzOiB7XG4gICAgICAgICAgICAgICAgcmVmICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCsrcmVmQ291bnQgPT09IDEpIHBsdWdpbkNhbGxiYWNrcy5zZXQoYnVpbGRLZXksIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHVucmVmICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKC0tcmVmQ291bnQgPT09IDApIHBsdWdpbkNhbGxiYWNrcy5kZWxldGUoYnVpbGRLZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGxldCBidWlsZFNlcnZlRGF0YSA9IChyZWZzLCBvcHRpb25zLCByZXF1ZXN0KT0+e1xuICAgICAgICBsZXQga2V5cyA9IHtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHBvcnQgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwicG9ydFwiLCBtdXN0QmVJbnRlZ2VyKTtcbiAgICAgICAgbGV0IGhvc3QgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwiaG9zdFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgICAgICBsZXQgc2VydmVkaXIgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwic2VydmVkaXJcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgbGV0IG9uUmVxdWVzdCA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJvblJlcXVlc3RcIiwgbXVzdEJlRnVuY3Rpb24pO1xuICAgICAgICBsZXQgc2VydmVJRCA9IG5leHRTZXJ2ZUlEKys7XG4gICAgICAgIGxldCBvbldhaXQ7XG4gICAgICAgIGxldCB3YWl0ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PntcbiAgICAgICAgICAgIG9uV2FpdCA9IChlcnJvcik9PntcbiAgICAgICAgICAgICAgICBzZXJ2ZUNhbGxiYWNrcy5kZWxldGUoc2VydmVJRCk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yICE9PSBudWxsKSByZWplY3QobmV3IEVycm9yKGVycm9yKSk7XG4gICAgICAgICAgICAgICAgZWxzZSByZXNvbHZlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgcmVxdWVzdC5zZXJ2ZSA9IHtcbiAgICAgICAgICAgIHNlcnZlSURcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tGb3JJbnZhbGlkRmxhZ3Mob3B0aW9ucywga2V5cywgYGluIHNlcnZlKCkgY2FsbGApO1xuICAgICAgICBpZiAocG9ydCAhPT0gdm9pZCAwKSByZXF1ZXN0LnNlcnZlLnBvcnQgPSBwb3J0O1xuICAgICAgICBpZiAoaG9zdCAhPT0gdm9pZCAwKSByZXF1ZXN0LnNlcnZlLmhvc3QgPSBob3N0O1xuICAgICAgICBpZiAoc2VydmVkaXIgIT09IHZvaWQgMCkgcmVxdWVzdC5zZXJ2ZS5zZXJ2ZWRpciA9IHNlcnZlZGlyO1xuICAgICAgICBzZXJ2ZUNhbGxiYWNrcy5zZXQoc2VydmVJRCwge1xuICAgICAgICAgICAgb25SZXF1ZXN0LFxuICAgICAgICAgICAgb25XYWl0XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2FpdCxcbiAgICAgICAgICAgIHN0b3AgKCkge1xuICAgICAgICAgICAgICAgIHNlbmRSZXF1ZXN0KHJlZnMsIHtcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogXCJzZXJ2ZS1zdG9wXCIsXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlSURcbiAgICAgICAgICAgICAgICB9LCAoKT0+e1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYnVpbGRMb2dMZXZlbERlZmF1bHQgPSBcIndhcm5pbmdcIjtcbiAgICBjb25zdCB0cmFuc2Zvcm1Mb2dMZXZlbERlZmF1bHQgPSBcInNpbGVudFwiO1xuICAgIGxldCBidWlsZE9yU2VydmUgPSAoYXJncyk9PntcbiAgICAgICAgbGV0IGtleSA9IG5leHRCdWlsZEtleSsrO1xuICAgICAgICBjb25zdCBkZXRhaWxzID0gY3JlYXRlT2JqZWN0U3Rhc2goKTtcbiAgICAgICAgbGV0IHBsdWdpbnM7XG4gICAgICAgIGxldCB7IHJlZnMgLCBvcHRpb25zICwgaXNUVFkgLCBjYWxsYmFjayAgfSA9IGFyZ3M7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gb3B0aW9ucy5wbHVnaW5zO1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB0aHJvdyBuZXcgRXJyb3IoYFwicGx1Z2luc1wiIG11c3QgYmUgYW4gYXJyYXlgKTtcbiAgICAgICAgICAgICAgICBwbHVnaW5zID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxvZ1BsdWdpbkVycm9yID0gKGUsIHBsdWdpbk5hbWUsIG5vdGUsIGRvbmUpPT57XG4gICAgICAgICAgICBsZXQgZmxhZ3MgPSBbXTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcHVzaExvZ0ZsYWdzKGZsYWdzLCBvcHRpb25zLCB7XG4gICAgICAgICAgICAgICAgfSwgaXNUVFksIGJ1aWxkTG9nTGV2ZWxEZWZhdWx0KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUyKSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZXh0cmFjdEVycm9yTWVzc2FnZVY4KGUsIHN0cmVhbUluLCBkZXRhaWxzLCBub3RlLCBwbHVnaW5OYW1lKTtcbiAgICAgICAgICAgIHNlbmRSZXF1ZXN0KHJlZnMsIHtcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcImVycm9yXCIsXG4gICAgICAgICAgICAgICAgZmxhZ3MsXG4gICAgICAgICAgICAgICAgZXJyb3I6IG1lc3NhZ2VcbiAgICAgICAgICAgIH0sICgpPT57XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5kZXRhaWwgPSBkZXRhaWxzLmxvYWQobWVzc2FnZS5kZXRhaWwpO1xuICAgICAgICAgICAgICAgIGRvbmUobWVzc2FnZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGhhbmRsZUVycm9yID0gKGUsIHBsdWdpbk5hbWUpPT57XG4gICAgICAgICAgICBsb2dQbHVnaW5FcnJvcihlLCBwbHVnaW5OYW1lLCB2b2lkIDAsIChlcnJvcik9PntcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhmYWlsdXJlRXJyb3JXaXRoTG9nKFwiQnVpbGQgZmFpbGVkXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICAgICAgICBdLCBbXSksIG51bGwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChwbHVnaW5zICYmIHBsdWdpbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKHN0cmVhbUluLmlzU3luYykgcmV0dXJuIGhhbmRsZUVycm9yKG5ldyBFcnJvcihcIkNhbm5vdCB1c2UgcGx1Z2lucyBpbiBzeW5jaHJvbm91cyBBUEkgY2FsbHNcIiksIFwiXCIpO1xuICAgICAgICAgICAgaGFuZGxlUGx1Z2lucyhvcHRpb25zLCBwbHVnaW5zLCBrZXksIGRldGFpbHMpLnRoZW4oKHJlc3VsdCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5vaykge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcihyZXN1bHQuZXJyb3IsIHJlc3VsdC5wbHVnaW5OYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRPclNlcnZlQ29udGludWUoX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBhcmdzKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ1BsdWdpbkVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RQbHVnaW5zOiByZXN1bHQucmVxdWVzdFBsdWdpbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVuT25FbmRDYWxsYmFja3M6IHJlc3VsdC5ydW5PbkVuZENhbGxiYWNrcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5SZWZzOiByZXN1bHQucGx1Z2luUmVmc1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcihlLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIChlKT0+aGFuZGxlRXJyb3IoZSwgXCJcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGJ1aWxkT3JTZXJ2ZUNvbnRpbnVlKF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgICAgICAgICAgIH0sIGFyZ3MpLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgbG9nUGx1Z2luRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RQbHVnaW5zOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBydW5PbkVuZENhbGxiYWNrczogKHJlc3VsdCwgbG9nUGx1Z2luRXJyb3IyLCBkb25lKT0+ZG9uZSgpXG4gICAgICAgICAgICAgICAgICAgICxcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luUmVmczogbnVsbFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcihlLCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgbGV0IGJ1aWxkT3JTZXJ2ZUNvbnRpbnVlID0gKHsgY2FsbE5hbWUgLCByZWZzOiBjYWxsZXJSZWZzICwgc2VydmVPcHRpb25zICwgb3B0aW9ucyAsIGlzVFRZICwgZGVmYXVsdFdEICwgY2FsbGJhY2sgLCBrZXkgLCBkZXRhaWxzICwgbG9nUGx1Z2luRXJyb3IgLCByZXF1ZXN0UGx1Z2lucyAsIHJ1bk9uRW5kQ2FsbGJhY2tzICwgcGx1Z2luUmVmcyAgfSk9PntcbiAgICAgICAgY29uc3QgcmVmcyA9IHtcbiAgICAgICAgICAgIHJlZiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBsdWdpblJlZnMpIHBsdWdpblJlZnMucmVmKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxlclJlZnMpIGNhbGxlclJlZnMucmVmKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdW5yZWYgKCkge1xuICAgICAgICAgICAgICAgIGlmIChwbHVnaW5SZWZzKSBwbHVnaW5SZWZzLnVucmVmKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxlclJlZnMpIGNhbGxlclJlZnMudW5yZWYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHdyaXRlRGVmYXVsdCA9ICFzdHJlYW1Jbi5pc0Jyb3dzZXI7XG4gICAgICAgIGxldCB7IGVudHJpZXMgLCBmbGFncyAsIHdyaXRlICwgc3RkaW5Db250ZW50cyAsIHN0ZGluUmVzb2x2ZURpciAsIGFic1dvcmtpbmdEaXIgLCBpbmNyZW1lbnRhbCAsIG5vZGVQYXRocyAsIHdhdGNoICB9ID0gZmxhZ3NGb3JCdWlsZE9wdGlvbnMoY2FsbE5hbWUsIG9wdGlvbnMsIGlzVFRZLCBidWlsZExvZ0xldmVsRGVmYXVsdCwgd3JpdGVEZWZhdWx0KTtcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB7XG4gICAgICAgICAgICBjb21tYW5kOiBcImJ1aWxkXCIsXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBlbnRyaWVzLFxuICAgICAgICAgICAgZmxhZ3MsXG4gICAgICAgICAgICB3cml0ZSxcbiAgICAgICAgICAgIHN0ZGluQ29udGVudHMsXG4gICAgICAgICAgICBzdGRpblJlc29sdmVEaXIsXG4gICAgICAgICAgICBhYnNXb3JraW5nRGlyOiBhYnNXb3JraW5nRGlyIHx8IGRlZmF1bHRXRCxcbiAgICAgICAgICAgIGluY3JlbWVudGFsLFxuICAgICAgICAgICAgbm9kZVBhdGhzXG4gICAgICAgIH07XG4gICAgICAgIGlmIChyZXF1ZXN0UGx1Z2lucykgcmVxdWVzdC5wbHVnaW5zID0gcmVxdWVzdFBsdWdpbnM7XG4gICAgICAgIGxldCBzZXJ2ZTIgPSBzZXJ2ZU9wdGlvbnMgJiYgYnVpbGRTZXJ2ZURhdGEocmVmcywgc2VydmVPcHRpb25zLCByZXF1ZXN0KTtcbiAgICAgICAgbGV0IHJlYnVpbGQ7XG4gICAgICAgIGxldCBzdG9wO1xuICAgICAgICBsZXQgY29weVJlc3BvbnNlVG9SZXN1bHQgPSAocmVzcG9uc2UsIHJlc3VsdCk9PntcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vdXRwdXRGaWxlcykgcmVzdWx0Lm91dHB1dEZpbGVzID0gcmVzcG9uc2Uub3V0cHV0RmlsZXMubWFwKGNvbnZlcnRPdXRwdXRGaWxlcyk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UubWV0YWZpbGUpIHJlc3VsdC5tZXRhZmlsZSA9IEpTT04ucGFyc2UocmVzcG9uc2UubWV0YWZpbGUpO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLndyaXRlVG9TdGRvdXQgIT09IHZvaWQgMCkgY29uc29sZS5sb2coZGVjb2RlVVRGOChyZXNwb25zZS53cml0ZVRvU3Rkb3V0KS5yZXBsYWNlKC9cXG4kLywgXCJcIikpO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgYnVpbGRSZXNwb25zZVRvUmVzdWx0ID0gKHJlc3BvbnNlLCBjYWxsYmFjazIpPT57XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgIGVycm9yczogcmVwbGFjZURldGFpbHNJbk1lc3NhZ2VzKHJlc3BvbnNlLmVycm9ycywgZGV0YWlscyksXG4gICAgICAgICAgICAgICAgd2FybmluZ3M6IHJlcGxhY2VEZXRhaWxzSW5NZXNzYWdlcyhyZXNwb25zZS53YXJuaW5ncywgZGV0YWlscylcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb3B5UmVzcG9uc2VUb1Jlc3VsdChyZXNwb25zZSwgcmVzdWx0KTtcbiAgICAgICAgICAgIHJ1bk9uRW5kQ2FsbGJhY2tzKHJlc3VsdCwgbG9nUGx1Z2luRXJyb3IsICgpPT57XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5lcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2syKGZhaWx1cmVFcnJvcldpdGhMb2coXCJCdWlsZCBmYWlsZWRcIiwgcmVzdWx0LmVycm9ycywgcmVzdWx0Lndhcm5pbmdzKSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5yZWJ1aWxkSUQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlYnVpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWJ1aWxkID0gKCk9Pm5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0Rpc3Bvc2VkIHx8IGlzQ2xvc2VkKSB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgcmVidWlsZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFJlcXVlc3QocmVmcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogXCJyZWJ1aWxkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWJ1aWxkSUQ6IHJlc3BvbnNlLnJlYnVpbGRJRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAoZXJyb3IyLCByZXNwb25zZTIpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luTmFtZTogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZXJyb3IyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHZvaWQgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrMihmYWlsdXJlRXJyb3JXaXRoTG9nKFwiQnVpbGQgZmFpbGVkXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sIFtdKSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZFJlc3BvbnNlVG9SZXN1bHQocmVzcG9uc2UyLCAoZXJyb3IzLCByZXN1bHQzKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcjMpIHJlamVjdChlcnJvcjMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgcmVzb2x2ZShyZXN1bHQzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmcy5yZWYoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYnVpbGQuZGlzcG9zZSA9ICgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGlzcG9zZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kUmVxdWVzdChyZWZzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwicmVidWlsZC1kaXNwb3NlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYnVpbGRJRDogcmVzcG9uc2UucmVidWlsZElEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgKCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZzLnVucmVmKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWJ1aWxkID0gcmVidWlsZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLndhdGNoSUQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXN0b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnMucmVmKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9wID0gKCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTdG9wcGVkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXRjaENhbGxiYWNrcy5kZWxldGUocmVzcG9uc2Uud2F0Y2hJRCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFJlcXVlc3QocmVmcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiBcIndhdGNoLXN0b3BcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2F0Y2hJRDogcmVzcG9uc2Uud2F0Y2hJRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sICgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmcy51bnJlZigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoQ2FsbGJhY2tzLnNldChyZXNwb25zZS53YXRjaElELCAoc2VydmljZVN0b3BFcnJvciwgd2F0Y2hSZXNwb25zZSk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlcnZpY2VTdG9wRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXRjaC5vblJlYnVpbGQpIHdhdGNoLm9uUmVidWlsZChzZXJ2aWNlU3RvcEVycm9yLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0MiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yczogcmVwbGFjZURldGFpbHNJbk1lc3NhZ2VzKHdhdGNoUmVzcG9uc2UuZXJyb3JzLCBkZXRhaWxzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzOiByZXBsYWNlRGV0YWlsc0luTWVzc2FnZXMod2F0Y2hSZXNwb25zZS53YXJuaW5ncywgZGV0YWlscylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weVJlc3BvbnNlVG9SZXN1bHQod2F0Y2hSZXNwb25zZSwgcmVzdWx0Mik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bk9uRW5kQ2FsbGJhY2tzKHJlc3VsdDIsIGxvZ1BsdWdpbkVycm9yLCAoKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdDIuZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2F0Y2gub25SZWJ1aWxkKSB3YXRjaC5vblJlYnVpbGQoZmFpbHVyZUVycm9yV2l0aExvZyhcIkJ1aWxkIGZhaWxlZFwiLCByZXN1bHQyLmVycm9ycywgcmVzdWx0Mi53YXJuaW5ncyksIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXRjaFJlc3BvbnNlLnJlYnVpbGRJRCAhPT0gdm9pZCAwKSByZXN1bHQyLnJlYnVpbGQgPSByZWJ1aWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Mi5zdG9wID0gc3RvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXRjaC5vblJlYnVpbGQpIHdhdGNoLm9uUmVidWlsZChudWxsLCByZXN1bHQyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0b3AgPSBzdG9wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYWxsYmFjazIobnVsbCwgcmVzdWx0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBpZiAod3JpdGUgJiYgc3RyZWFtSW4uaXNCcm93c2VyKSB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBlbmFibGUgXCJ3cml0ZVwiIGluIHRoZSBicm93c2VyYCk7XG4gICAgICAgIGlmIChpbmNyZW1lbnRhbCAmJiBzdHJlYW1Jbi5pc1N5bmMpIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHVzZSBcImluY3JlbWVudGFsXCIgd2l0aCBhIHN5bmNocm9ub3VzIGJ1aWxkYCk7XG4gICAgICAgIGlmICh3YXRjaCAmJiBzdHJlYW1Jbi5pc1N5bmMpIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHVzZSBcIndhdGNoXCIgd2l0aCBhIHN5bmNocm9ub3VzIGJ1aWxkYCk7XG4gICAgICAgIHNlbmRSZXF1ZXN0KHJlZnMsIHJlcXVlc3QsIChlcnJvciwgcmVzcG9uc2UpPT57XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoZXJyb3IpLCBudWxsKTtcbiAgICAgICAgICAgIGlmIChzZXJ2ZTIpIHtcbiAgICAgICAgICAgICAgICBsZXQgc2VydmVSZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIGxldCBpc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZWZzLnJlZigpO1xuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcnQ6IHNlcnZlUmVzcG9uc2UucG9ydCxcbiAgICAgICAgICAgICAgICAgICAgaG9zdDogc2VydmVSZXNwb25zZS5ob3N0LFxuICAgICAgICAgICAgICAgICAgICB3YWl0OiBzZXJ2ZTIud2FpdCxcbiAgICAgICAgICAgICAgICAgICAgc3RvcCAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTdG9wcGVkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmUyLnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnMudW5yZWYoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmVmcy5yZWYoKTtcbiAgICAgICAgICAgICAgICBzZXJ2ZTIud2FpdC50aGVuKHJlZnMudW5yZWYsIHJlZnMudW5yZWYpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCByZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkUmVzcG9uc2VUb1Jlc3VsdChyZXNwb25zZSwgY2FsbGJhY2spO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGxldCB0cmFuc2Zvcm0yID0gKHsgY2FsbE5hbWUgLCByZWZzICwgaW5wdXQgLCBvcHRpb25zICwgaXNUVFkgLCBmcyAsIGNhbGxiYWNrICB9KT0+e1xuICAgICAgICBjb25zdCBkZXRhaWxzID0gY3JlYXRlT2JqZWN0U3Rhc2goKTtcbiAgICAgICAgbGV0IHN0YXJ0ID0gKGlucHV0UGF0aCk9PntcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gXCJzdHJpbmdcIikgdGhyb3cgbmV3IEVycm9yKCdUaGUgaW5wdXQgdG8gXCJ0cmFuc2Zvcm1cIiBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICAgICAgICAgICAgbGV0IGZsYWdzID0gZmxhZ3NGb3JUcmFuc2Zvcm1PcHRpb25zKGNhbGxOYW1lLCBvcHRpb25zLCBpc1RUWSwgdHJhbnNmb3JtTG9nTGV2ZWxEZWZhdWx0KTtcbiAgICAgICAgICAgICAgICBsZXQgcmVxdWVzdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogXCJ0cmFuc2Zvcm1cIixcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3MsXG4gICAgICAgICAgICAgICAgICAgIGlucHV0RlM6IGlucHV0UGF0aCAhPT0gbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGlucHV0UGF0aCAhPT0gbnVsbCA/IGlucHV0UGF0aCA6IGlucHV0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBzZW5kUmVxdWVzdChyZWZzLCByZXF1ZXN0LCAoZXJyb3IsIHJlc3BvbnNlKT0+e1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoZXJyb3IpLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9ycyA9IHJlcGxhY2VEZXRhaWxzSW5NZXNzYWdlcyhyZXNwb25zZS5lcnJvcnMsIGRldGFpbHMpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgd2FybmluZ3MgPSByZXBsYWNlRGV0YWlsc0luTWVzc2FnZXMocmVzcG9uc2Uud2FybmluZ3MsIGRldGFpbHMpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgb3V0c3RhbmRpbmcgPSAxO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dCA9ICgpPT4tLW91dHN0YW5kaW5nID09PSAwICYmIGNhbGxiYWNrKG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiByZXNwb25zZS5jb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcDogcmVzcG9uc2UubWFwXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkgcmV0dXJuIGNhbGxiYWNrKGZhaWx1cmVFcnJvcldpdGhMb2coXCJUcmFuc2Zvcm0gZmFpbGVkXCIsIGVycm9ycywgd2FybmluZ3MpLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGVGUykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0c3RhbmRpbmcrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGZzLnJlYWRGaWxlKHJlc3BvbnNlLmNvZGUsIChlcnIsIGNvbnRlbnRzKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5jb2RlID0gY29udGVudHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UubWFwRlMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHN0YW5kaW5nKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcy5yZWFkRmlsZShyZXNwb25zZS5tYXAsIChlcnIsIGNvbnRlbnRzKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5tYXAgPSBjb250ZW50cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgZmxhZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBwdXNoTG9nRmxhZ3MoZmxhZ3MsIG9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICAgICAgfSwgaXNUVFksIHRyYW5zZm9ybUxvZ0xldmVsRGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZTIpIHtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBleHRyYWN0RXJyb3JNZXNzYWdlVjgoZSwgc3RyZWFtSW4sIGRldGFpbHMsIHZvaWQgMCwgXCJcIik7XG4gICAgICAgICAgICAgICAgc2VuZFJlcXVlc3QocmVmcywge1xuICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiBcImVycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgIGZsYWdzLFxuICAgICAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgICAgIH0sICgpPT57XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmRldGFpbCA9IGRldGFpbHMubG9hZChlcnJvci5kZXRhaWwpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhmYWlsdXJlRXJyb3JXaXRoTG9nKFwiVHJhbnNmb3JtIGZhaWxlZFwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgICAgICAgICBdLCBbXSksIG51bGwpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiICYmIGlucHV0Lmxlbmd0aCA+IDEwMjQgKiAxMDI0KSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IHN0YXJ0O1xuICAgICAgICAgICAgc3RhcnQgPSAoKT0+ZnMud3JpdGVGaWxlKGlucHV0LCBuZXh0KVxuICAgICAgICAgICAgO1xuICAgICAgICB9XG4gICAgICAgIHN0YXJ0KG51bGwpO1xuICAgIH07XG4gICAgbGV0IGZvcm1hdE1lc3NhZ2VzMiA9ICh7IGNhbGxOYW1lICwgcmVmcyAsIG1lc3NhZ2VzICwgb3B0aW9ucyAsIGNhbGxiYWNrICB9KT0+e1xuICAgICAgICBsZXQgcmVzdWx0ID0gc2FuaXRpemVNZXNzYWdlcyhtZXNzYWdlcywgXCJtZXNzYWdlc1wiLCBudWxsLCBcIlwiKTtcbiAgICAgICAgaWYgKCFvcHRpb25zKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3Npbmcgc2Vjb25kIGFyZ3VtZW50IGluICR7Y2FsbE5hbWV9KCkgY2FsbGApO1xuICAgICAgICBsZXQga2V5cyA9IHtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGtpbmQgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwia2luZFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgICAgICBsZXQgY29sb3IgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwiY29sb3JcIiwgbXVzdEJlQm9vbGVhbik7XG4gICAgICAgIGxldCB0ZXJtaW5hbFdpZHRoID0gZ2V0RmxhZyhvcHRpb25zLCBrZXlzLCBcInRlcm1pbmFsV2lkdGhcIiwgbXVzdEJlSW50ZWdlcik7XG4gICAgICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKG9wdGlvbnMsIGtleXMsIGBpbiAke2NhbGxOYW1lfSgpIGNhbGxgKTtcbiAgICAgICAgaWYgKGtpbmQgPT09IHZvaWQgMCkgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIFwia2luZFwiIGluICR7Y2FsbE5hbWV9KCkgY2FsbGApO1xuICAgICAgICBpZiAoa2luZCAhPT0gXCJlcnJvclwiICYmIGtpbmQgIT09IFwid2FybmluZ1wiKSB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIFwia2luZFwiIHRvIGJlIFwiZXJyb3JcIiBvciBcIndhcm5pbmdcIiBpbiAke2NhbGxOYW1lfSgpIGNhbGxgKTtcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB7XG4gICAgICAgICAgICBjb21tYW5kOiBcImZvcm1hdC1tc2dzXCIsXG4gICAgICAgICAgICBtZXNzYWdlczogcmVzdWx0LFxuICAgICAgICAgICAgaXNXYXJuaW5nOiBraW5kID09PSBcIndhcm5pbmdcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoY29sb3IgIT09IHZvaWQgMCkgcmVxdWVzdC5jb2xvciA9IGNvbG9yO1xuICAgICAgICBpZiAodGVybWluYWxXaWR0aCAhPT0gdm9pZCAwKSByZXF1ZXN0LnRlcm1pbmFsV2lkdGggPSB0ZXJtaW5hbFdpZHRoO1xuICAgICAgICBzZW5kUmVxdWVzdChyZWZzLCByZXF1ZXN0LCAoZXJyb3IsIHJlc3BvbnNlKT0+e1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKGVycm9yKSwgbnVsbCk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXNwb25zZS5tZXNzYWdlcyk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgbGV0IGFuYWx5emVNZXRhZmlsZTIgPSAoeyBjYWxsTmFtZSAsIHJlZnMgLCBtZXRhZmlsZSAsIG9wdGlvbnMgLCBjYWxsYmFjayAgfSk9PntcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgb3B0aW9ucyA9IHtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGtleXMgPSB7XG4gICAgICAgIH07XG4gICAgICAgIGxldCBjb2xvciA9IGdldEZsYWcob3B0aW9ucywga2V5cywgXCJjb2xvclwiLCBtdXN0QmVCb29sZWFuKTtcbiAgICAgICAgbGV0IHZlcmJvc2UgPSBnZXRGbGFnKG9wdGlvbnMsIGtleXMsIFwidmVyYm9zZVwiLCBtdXN0QmVCb29sZWFuKTtcbiAgICAgICAgY2hlY2tGb3JJbnZhbGlkRmxhZ3Mob3B0aW9ucywga2V5cywgYGluICR7Y2FsbE5hbWV9KCkgY2FsbGApO1xuICAgICAgICBsZXQgcmVxdWVzdCA9IHtcbiAgICAgICAgICAgIGNvbW1hbmQ6IFwiYW5hbHl6ZS1tZXRhZmlsZVwiLFxuICAgICAgICAgICAgbWV0YWZpbGVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGNvbG9yICE9PSB2b2lkIDApIHJlcXVlc3QuY29sb3IgPSBjb2xvcjtcbiAgICAgICAgaWYgKHZlcmJvc2UgIT09IHZvaWQgMCkgcmVxdWVzdC52ZXJib3NlID0gdmVyYm9zZTtcbiAgICAgICAgc2VuZFJlcXVlc3QocmVmcywgcmVxdWVzdCwgKGVycm9yLCByZXNwb25zZSk9PntcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcihlcnJvciksIG51bGwpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzcG9uc2UucmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICByZWFkRnJvbVN0ZG91dCxcbiAgICAgICAgYWZ0ZXJDbG9zZSxcbiAgICAgICAgc2VydmljZToge1xuICAgICAgICAgICAgYnVpbGRPclNlcnZlLFxuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2Zvcm0yLFxuICAgICAgICAgICAgZm9ybWF0TWVzc2FnZXM6IGZvcm1hdE1lc3NhZ2VzMixcbiAgICAgICAgICAgIGFuYWx5emVNZXRhZmlsZTogYW5hbHl6ZU1ldGFmaWxlMlxuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZU9iamVjdFN0YXNoKCkge1xuICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoKTtcbiAgICBsZXQgbmV4dElEID0gMDtcbiAgICByZXR1cm4ge1xuICAgICAgICBsb2FkIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuIG1hcC5nZXQoaWQpO1xuICAgICAgICB9LFxuICAgICAgICBzdG9yZSAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBjb25zdCBpZCA9IG5leHRJRCsrO1xuICAgICAgICAgICAgbWFwLnNldChpZCwgdmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RDYWxsZXJWOChlLCBzdHJlYW1JbiwgaWRlbnQpIHtcbiAgICBsZXQgbm90ZTtcbiAgICBsZXQgdHJpZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gKCk9PntcbiAgICAgICAgaWYgKHRyaWVkKSByZXR1cm4gbm90ZTtcbiAgICAgICAgdHJpZWQgPSB0cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IGxpbmVzID0gKGUuc3RhY2sgKyBcIlwiKS5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgICAgIGxpbmVzLnNwbGljZSgxLCAxKTtcbiAgICAgICAgICAgIGxldCBsb2NhdGlvbiA9IHBhcnNlU3RhY2tMaW5lc1Y4KHN0cmVhbUluLCBsaW5lcywgaWRlbnQpO1xuICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgbm90ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvblxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUyKSB7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gZXh0cmFjdEVycm9yTWVzc2FnZVY4KGUsIHN0cmVhbUluLCBzdGFzaCwgbm90ZSwgcGx1Z2luTmFtZSkge1xuICAgIGxldCB0ZXh0ID0gXCJJbnRlcm5hbCBlcnJvclwiO1xuICAgIGxldCBsb2NhdGlvbiA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgICAgdGV4dCA9IChlICYmIGUubWVzc2FnZSB8fCBlKSArIFwiXCI7XG4gICAgfSBjYXRjaCAoZTIpIHtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgbG9jYXRpb24gPSBwYXJzZVN0YWNrTGluZXNWOChzdHJlYW1JbiwgKGUuc3RhY2sgKyBcIlwiKS5zcGxpdChcIlxcblwiKSwgXCJcIik7XG4gICAgfSBjYXRjaCAoZTIxKSB7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHBsdWdpbk5hbWUsXG4gICAgICAgIHRleHQsXG4gICAgICAgIGxvY2F0aW9uLFxuICAgICAgICBub3Rlczogbm90ZSA/IFtcbiAgICAgICAgICAgIG5vdGVcbiAgICAgICAgXSA6IFtdLFxuICAgICAgICBkZXRhaWw6IHN0YXNoID8gc3Rhc2guc3RvcmUoZSkgOiAtMVxuICAgIH07XG59XG5mdW5jdGlvbiBwYXJzZVN0YWNrTGluZXNWOChzdHJlYW1JbiwgbGluZXMsIGlkZW50KSB7XG4gICAgbGV0IGF0ID0gXCIgICAgYXQgXCI7XG4gICAgaWYgKHN0cmVhbUluLnJlYWRGaWxlU3luYyAmJiAhbGluZXNbMF0uc3RhcnRzV2l0aChhdCkgJiYgbGluZXNbMV0uc3RhcnRzV2l0aChhdCkpIHtcbiAgICAgICAgZm9yKGxldCBpID0gMTsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGxldCBsaW5lID0gbGluZXNbaV07XG4gICAgICAgICAgICBpZiAoIWxpbmUuc3RhcnRzV2l0aChhdCkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGluZSA9IGxpbmUuc2xpY2UoYXQubGVuZ3RoKTtcbiAgICAgICAgICAgIHdoaWxlKHRydWUpe1xuICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IC9eKD86bmV3IHxhc3luYyApP1xcUysgXFwoKC4qKVxcKSQvLmV4ZWMobGluZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmUgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1hdGNoID0gL15ldmFsIGF0IFxcUysgXFwoKC4qKVxcKSg/OiwgXFxTKzpcXGQrOlxcZCspPyQvLmV4ZWMobGluZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmUgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1hdGNoID0gL14oXFxTKyk6KFxcZCspOihcXGQrKSQvLmV4ZWMobGluZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb250ZW50cztcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzID0gc3RyZWFtSW4ucmVhZEZpbGVTeW5jKG1hdGNoWzFdLCBcInV0ZjhcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5lVGV4dCA9IGNvbnRlbnRzLnNwbGl0KC9cXHJcXG58XFxyfFxcbnxcXHUyMDI4fFxcdTIwMjkvKVsrbWF0Y2hbMl0gLSAxXSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY29sdW1uID0gK21hdGNoWzNdIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxlbmd0aCA9IGxpbmVUZXh0LnNsaWNlKGNvbHVtbiwgY29sdW1uICsgaWRlbnQubGVuZ3RoKSA9PT0gaWRlbnQgPyBpZGVudC5sZW5ndGggOiAwO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTogbWF0Y2hbMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IFwiZmlsZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZTogK21hdGNoWzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBlbmNvZGVVVEY4KGxpbmVUZXh0LnNsaWNlKDAsIGNvbHVtbikpLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aDogZW5jb2RlVVRGOChsaW5lVGV4dC5zbGljZShjb2x1bW4sIGNvbHVtbiArIGxlbmd0aCkpLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVUZXh0OiBsaW5lVGV4dCArIFwiXFxuXCIgKyBsaW5lcy5zbGljZSgxKS5qb2luKFwiXFxuXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbjogXCJcIlxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGZhaWx1cmVFcnJvcldpdGhMb2codGV4dCwgZXJyb3JzLCB3YXJuaW5ncykge1xuICAgIGxldCBsaW1pdCA9IDU7XG4gICAgbGV0IHN1bW1hcnkgPSBlcnJvcnMubGVuZ3RoIDwgMSA/IFwiXCIgOiBgIHdpdGggJHtlcnJvcnMubGVuZ3RofSBlcnJvciR7ZXJyb3JzLmxlbmd0aCA8IDIgPyBcIlwiIDogXCJzXCJ9OmAgKyBlcnJvcnMuc2xpY2UoMCwgbGltaXQgKyAxKS5tYXAoKGUsIGkpPT57XG4gICAgICAgIGlmIChpID09PSBsaW1pdCkgcmV0dXJuIFwiXFxuLi4uXCI7XG4gICAgICAgIGlmICghZS5sb2NhdGlvbikgcmV0dXJuIGBcbmVycm9yOiAke2UudGV4dH1gO1xuICAgICAgICBsZXQgeyBmaWxlICwgbGluZSAsIGNvbHVtbiAgfSA9IGUubG9jYXRpb247XG4gICAgICAgIGxldCBwbHVnaW5UZXh0ID0gZS5wbHVnaW5OYW1lID8gYFtwbHVnaW46ICR7ZS5wbHVnaW5OYW1lfV0gYCA6IFwiXCI7XG4gICAgICAgIHJldHVybiBgXG4ke2ZpbGV9OiR7bGluZX06JHtjb2x1bW59OiBlcnJvcjogJHtwbHVnaW5UZXh0fSR7ZS50ZXh0fWA7XG4gICAgfSkuam9pbihcIlwiKTtcbiAgICBsZXQgZXJyb3IgPSBuZXcgRXJyb3IoYCR7dGV4dH0ke3N1bW1hcnl9YCk7XG4gICAgZXJyb3IuZXJyb3JzID0gZXJyb3JzO1xuICAgIGVycm9yLndhcm5pbmdzID0gd2FybmluZ3M7XG4gICAgcmV0dXJuIGVycm9yO1xufVxuZnVuY3Rpb24gcmVwbGFjZURldGFpbHNJbk1lc3NhZ2VzKG1lc3NhZ2VzLCBzdGFzaCkge1xuICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBtZXNzYWdlcyl7XG4gICAgICAgIG1lc3NhZ2UuZGV0YWlsID0gc3Rhc2gubG9hZChtZXNzYWdlLmRldGFpbCk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlcztcbn1cbmZ1bmN0aW9uIHNhbml0aXplTG9jYXRpb24obG9jYXRpb24sIHdoZXJlKSB7XG4gICAgaWYgKGxvY2F0aW9uID09IG51bGwpIHJldHVybiBudWxsO1xuICAgIGxldCBrZXlzID0ge1xuICAgIH07XG4gICAgbGV0IGZpbGUgPSBnZXRGbGFnKGxvY2F0aW9uLCBrZXlzLCBcImZpbGVcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgbmFtZXNwYWNlID0gZ2V0RmxhZyhsb2NhdGlvbiwga2V5cywgXCJuYW1lc3BhY2VcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgbGluZSA9IGdldEZsYWcobG9jYXRpb24sIGtleXMsIFwibGluZVwiLCBtdXN0QmVJbnRlZ2VyKTtcbiAgICBsZXQgY29sdW1uID0gZ2V0RmxhZyhsb2NhdGlvbiwga2V5cywgXCJjb2x1bW5cIiwgbXVzdEJlSW50ZWdlcik7XG4gICAgbGV0IGxlbmd0aCA9IGdldEZsYWcobG9jYXRpb24sIGtleXMsIFwibGVuZ3RoXCIsIG11c3RCZUludGVnZXIpO1xuICAgIGxldCBsaW5lVGV4dCA9IGdldEZsYWcobG9jYXRpb24sIGtleXMsIFwibGluZVRleHRcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICBsZXQgc3VnZ2VzdGlvbiA9IGdldEZsYWcobG9jYXRpb24sIGtleXMsIFwic3VnZ2VzdGlvblwiLCBtdXN0QmVTdHJpbmcpO1xuICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKGxvY2F0aW9uLCBrZXlzLCB3aGVyZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZmlsZTogZmlsZSB8fCBcIlwiLFxuICAgICAgICBuYW1lc3BhY2U6IG5hbWVzcGFjZSB8fCBcIlwiLFxuICAgICAgICBsaW5lOiBsaW5lIHx8IDAsXG4gICAgICAgIGNvbHVtbjogY29sdW1uIHx8IDAsXG4gICAgICAgIGxlbmd0aDogbGVuZ3RoIHx8IDAsXG4gICAgICAgIGxpbmVUZXh0OiBsaW5lVGV4dCB8fCBcIlwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBzdWdnZXN0aW9uIHx8IFwiXCJcbiAgICB9O1xufVxuZnVuY3Rpb24gc2FuaXRpemVNZXNzYWdlcyhtZXNzYWdlcywgcHJvcGVydHksIHN0YXNoLCBmYWxsYmFja1BsdWdpbk5hbWUpIHtcbiAgICBsZXQgbWVzc2FnZXNDbG9uZSA9IFtdO1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzKXtcbiAgICAgICAgbGV0IGtleXMgPSB7XG4gICAgICAgIH07XG4gICAgICAgIGxldCBwbHVnaW5OYW1lID0gZ2V0RmxhZyhtZXNzYWdlLCBrZXlzLCBcInBsdWdpbk5hbWVcIiwgbXVzdEJlU3RyaW5nKTtcbiAgICAgICAgbGV0IHRleHQgPSBnZXRGbGFnKG1lc3NhZ2UsIGtleXMsIFwidGV4dFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgICAgICBsZXQgbG9jYXRpb24gPSBnZXRGbGFnKG1lc3NhZ2UsIGtleXMsIFwibG9jYXRpb25cIiwgbXVzdEJlT2JqZWN0T3JOdWxsKTtcbiAgICAgICAgbGV0IG5vdGVzID0gZ2V0RmxhZyhtZXNzYWdlLCBrZXlzLCBcIm5vdGVzXCIsIG11c3RCZUFycmF5KTtcbiAgICAgICAgbGV0IGRldGFpbCA9IGdldEZsYWcobWVzc2FnZSwga2V5cywgXCJkZXRhaWxcIiwgY2FuQmVBbnl0aGluZyk7XG4gICAgICAgIGxldCB3aGVyZSA9IGBpbiBlbGVtZW50ICR7aW5kZXh9IG9mIFwiJHtwcm9wZXJ0eX1cImA7XG4gICAgICAgIGNoZWNrRm9ySW52YWxpZEZsYWdzKG1lc3NhZ2UsIGtleXMsIHdoZXJlKTtcbiAgICAgICAgbGV0IG5vdGVzQ2xvbmUgPSBbXTtcbiAgICAgICAgaWYgKG5vdGVzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5vdGUgb2Ygbm90ZXMpe1xuICAgICAgICAgICAgICAgIGxldCBub3RlS2V5cyA9IHtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGxldCBub3RlVGV4dCA9IGdldEZsYWcobm90ZSwgbm90ZUtleXMsIFwidGV4dFwiLCBtdXN0QmVTdHJpbmcpO1xuICAgICAgICAgICAgICAgIGxldCBub3RlTG9jYXRpb24gPSBnZXRGbGFnKG5vdGUsIG5vdGVLZXlzLCBcImxvY2F0aW9uXCIsIG11c3RCZU9iamVjdE9yTnVsbCk7XG4gICAgICAgICAgICAgICAgY2hlY2tGb3JJbnZhbGlkRmxhZ3Mobm90ZSwgbm90ZUtleXMsIHdoZXJlKTtcbiAgICAgICAgICAgICAgICBub3Rlc0Nsb25lLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBub3RlVGV4dCB8fCBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogc2FuaXRpemVMb2NhdGlvbihub3RlTG9jYXRpb24sIHdoZXJlKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2VzQ2xvbmUucHVzaCh7XG4gICAgICAgICAgICBwbHVnaW5OYW1lOiBwbHVnaW5OYW1lIHx8IGZhbGxiYWNrUGx1Z2luTmFtZSxcbiAgICAgICAgICAgIHRleHQ6IHRleHQgfHwgXCJcIixcbiAgICAgICAgICAgIGxvY2F0aW9uOiBzYW5pdGl6ZUxvY2F0aW9uKGxvY2F0aW9uLCB3aGVyZSksXG4gICAgICAgICAgICBub3Rlczogbm90ZXNDbG9uZSxcbiAgICAgICAgICAgIGRldGFpbDogc3Rhc2ggPyBzdGFzaC5zdG9yZShkZXRhaWwpIDogLTFcbiAgICAgICAgfSk7XG4gICAgICAgIGluZGV4Kys7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlc0Nsb25lO1xufVxuZnVuY3Rpb24gc2FuaXRpemVTdHJpbmdBcnJheSh2YWx1ZXMsIHByb3BlcnR5KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpe1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInN0cmluZ1wiKSB0aHJvdyBuZXcgRXJyb3IoYCR7SlNPTi5zdHJpbmdpZnkocHJvcGVydHkpfSBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ3NgKTtcbiAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY29udmVydE91dHB1dEZpbGVzKHsgcGF0aCAsIGNvbnRlbnRzICB9KSB7XG4gICAgbGV0IHRleHQgPSBudWxsO1xuICAgIHJldHVybiB7XG4gICAgICAgIHBhdGgsXG4gICAgICAgIGNvbnRlbnRzLFxuICAgICAgICBnZXQgdGV4dCAoKSB7XG4gICAgICAgICAgICBpZiAodGV4dCA9PT0gbnVsbCkgdGV4dCA9IGRlY29kZVVURjgoY29udGVudHMpO1xuICAgICAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgICAgIH1cbiAgICB9O1xufVxudmFyIGJ1aWxkID0gKG9wdGlvbnMpPT5lbnN1cmVTZXJ2aWNlSXNSdW5uaW5nKCkuYnVpbGQob3B0aW9ucylcbjtcbnZhciBpbml0aWFsaXplUHJvbWlzZTtcbnZhciBsb25nTGl2ZWRTZXJ2aWNlO1xudmFyIGVuc3VyZVNlcnZpY2VJc1J1bm5pbmcgPSAoKT0+e1xuICAgIGlmIChsb25nTGl2ZWRTZXJ2aWNlKSByZXR1cm4gbG9uZ0xpdmVkU2VydmljZTtcbiAgICBpZiAoaW5pdGlhbGl6ZVByb21pc2UpIHRocm93IG5ldyBFcnJvcignWW91IG5lZWQgdG8gd2FpdCBmb3IgdGhlIHByb21pc2UgcmV0dXJuZWQgZnJvbSBcImluaXRpYWxpemVcIiB0byBiZSByZXNvbHZlZCBiZWZvcmUgY2FsbGluZyB0aGlzJyk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbmVlZCB0byBjYWxsIFwiaW5pdGlhbGl6ZVwiIGJlZm9yZSBjYWxsaW5nIHRoaXMnKTtcbn07XG52YXIgaW5pdGlhbGl6ZSA9IChvcHRpb25zKT0+e1xuICAgIG9wdGlvbnMgPSB2YWxpZGF0ZUluaXRpYWxpemVPcHRpb25zKG9wdGlvbnMgfHwge1xuICAgIH0pO1xuICAgIGxldCB3YXNtVVJMID0gb3B0aW9ucy53YXNtVVJMO1xuICAgIGxldCB1c2VXb3JrZXIgPSBvcHRpb25zLndvcmtlciAhPT0gZmFsc2U7XG4gICAgaWYgKCF3YXNtVVJMKSB0aHJvdyBuZXcgRXJyb3IoJ011c3QgcHJvdmlkZSB0aGUgXCJ3YXNtVVJMXCIgb3B0aW9uJyk7XG4gICAgd2FzbVVSTCArPSBcIlwiO1xuICAgIGlmIChpbml0aWFsaXplUHJvbWlzZSkgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgY2FsbCBcImluaXRpYWxpemVcIiBtb3JlIHRoYW4gb25jZScpO1xuICAgIGluaXRpYWxpemVQcm9taXNlID0gc3RhcnRSdW5uaW5nU2VydmljZSh3YXNtVVJMLCB1c2VXb3JrZXIpO1xuICAgIGluaXRpYWxpemVQcm9taXNlLmNhdGNoKCgpPT57XG4gICAgICAgIGluaXRpYWxpemVQcm9taXNlID0gdm9pZCAwO1xuICAgIH0pO1xuICAgIHJldHVybiBpbml0aWFsaXplUHJvbWlzZTtcbn07XG52YXIgc3RhcnRSdW5uaW5nU2VydmljZSA9IGFzeW5jICh3YXNtVVJMLCB1c2VXb3JrZXIpPT57XG4gICAgbGV0IHJlcyA9IGF3YWl0IGZldGNoKHdhc21VUkwpO1xuICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBkb3dubG9hZCAke0pTT04uc3RyaW5naWZ5KHdhc21VUkwpfWApO1xuICAgIGxldCB3YXNtID0gYXdhaXQgcmVzLmFycmF5QnVmZmVyKCk7XG4gICAgbGV0IGNvZGUgPSBge2xldCBnbG9iYWw9e307Zm9yKGxldCBvPXNlbGY7bztvPU9iamVjdC5nZXRQcm90b3R5cGVPZihvKSlmb3IobGV0IGsgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobykpaWYoIShrIGluIGdsb2JhbCkpT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCxrLHtnZXQ6KCk9PnNlbGZba119KTsvLyBDb3B5cmlnaHQgMjAxOCBUaGUgR28gQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlXG4vLyBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUuXG5cbigoKSA9PiB7XG5cdC8vIE1hcCBtdWx0aXBsZSBKYXZhU2NyaXB0IGVudmlyb25tZW50cyB0byBhIHNpbmdsZSBjb21tb24gQVBJLFxuXHQvLyBwcmVmZXJyaW5nIHdlYiBzdGFuZGFyZHMgb3ZlciBOb2RlLmpzIEFQSS5cblx0Ly9cblx0Ly8gRW52aXJvbm1lbnRzIGNvbnNpZGVyZWQ6XG5cdC8vIC0gQnJvd3NlcnNcblx0Ly8gLSBOb2RlLmpzXG5cdC8vIC0gRWxlY3Ryb25cblx0Ly8gLSBQYXJjZWxcblx0Ly8gLSBXZWJwYWNrXG5cblx0aWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHQvLyBnbG9iYWwgYWxyZWFkeSBleGlzdHNcblx0fSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0d2luZG93Lmdsb2JhbCA9IHdpbmRvdztcblx0fSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdHNlbGYuZ2xvYmFsID0gc2VsZjtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJjYW5ub3QgZXhwb3J0IEdvIChuZWl0aGVyIGdsb2JhbCwgd2luZG93IG5vciBzZWxmIGlzIGRlZmluZWQpXCIpO1xuXHR9XG5cblx0aWYgKCFnbG9iYWwucmVxdWlyZSAmJiB0eXBlb2YgcmVxdWlyZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdGdsb2JhbC5yZXF1aXJlID0gcmVxdWlyZTtcblx0fVxuXG5cdGlmICghZ2xvYmFsLmZzICYmIGdsb2JhbC5yZXF1aXJlKSB7XG5cdFx0Y29uc3QgZnMgPSByZXF1aXJlKFwiZnNcIik7XG5cdFx0aWYgKHR5cGVvZiBmcyA9PT0gXCJvYmplY3RcIiAmJiBmcyAhPT0gbnVsbCAmJiBPYmplY3Qua2V5cyhmcykubGVuZ3RoICE9PSAwKSB7XG5cdFx0XHRcbiAgICBnbG9iYWwuZnMgPSBPYmplY3QuYXNzaWduKHt9LCBmcywge1xuICAgICAgLy8gSGFjayBhcm91bmQgYSBVbmljb2RlIGJ1ZyBpbiBub2RlOiBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvaXNzdWVzLzI0NTUwXG4gICAgICB3cml0ZShmZCwgYnVmLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChvZmZzZXQgPT09IDAgJiYgbGVuZ3RoID09PSBidWYubGVuZ3RoICYmIHBvc2l0aW9uID09PSBudWxsKSB7XG4gICAgICAgICAgaWYgKGZkID09PSBwcm9jZXNzLnN0ZG91dC5mZCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcHJvY2Vzcy5zdGRvdXQud3JpdGUoYnVmLCBlcnIgPT4gZXJyID8gY2FsbGJhY2soZXJyLCAwLCBudWxsKSA6IGNhbGxiYWNrKG51bGwsIGxlbmd0aCwgYnVmKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soZXJyLCAwLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGZkID09PSBwcm9jZXNzLnN0ZGVyci5mZCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcHJvY2Vzcy5zdGRlcnIud3JpdGUoYnVmLCBlcnIgPT4gZXJyID8gY2FsbGJhY2soZXJyLCAwLCBudWxsKSA6IGNhbGxiYWNrKG51bGwsIGxlbmd0aCwgYnVmKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soZXJyLCAwLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnMud3JpdGUoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgsIHBvc2l0aW9uLCBjYWxsYmFjayk7XG4gICAgICB9LFxuICAgIH0pO1xuICBcblx0XHR9XG5cdH1cblxuXHRjb25zdCBlbm9zeXMgPSAoKSA9PiB7XG5cdFx0Y29uc3QgZXJyID0gbmV3IEVycm9yKFwibm90IGltcGxlbWVudGVkXCIpO1xuXHRcdGVyci5jb2RlID0gXCJFTk9TWVNcIjtcblx0XHRyZXR1cm4gZXJyO1xuXHR9O1xuXG5cdGlmICghZ2xvYmFsLmZzKSB7XG5cdFx0bGV0IG91dHB1dEJ1ZiA9IFwiXCI7XG5cdFx0Z2xvYmFsLmZzID0ge1xuXHRcdFx0Y29uc3RhbnRzOiB7IE9fV1JPTkxZOiAtMSwgT19SRFdSOiAtMSwgT19DUkVBVDogLTEsIE9fVFJVTkM6IC0xLCBPX0FQUEVORDogLTEsIE9fRVhDTDogLTEgfSwgLy8gdW51c2VkXG5cdFx0XHR3cml0ZVN5bmMoZmQsIGJ1Zikge1xuXHRcdFx0XHRvdXRwdXRCdWYgKz0gZGVjb2Rlci5kZWNvZGUoYnVmKTtcblx0XHRcdFx0Y29uc3QgbmwgPSBvdXRwdXRCdWYubGFzdEluZGV4T2YoXCJcXFxcblwiKTtcblx0XHRcdFx0aWYgKG5sICE9IC0xKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2cob3V0cHV0QnVmLnN1YnN0cigwLCBubCkpO1xuXHRcdFx0XHRcdG91dHB1dEJ1ZiA9IG91dHB1dEJ1Zi5zdWJzdHIobmwgKyAxKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gYnVmLmxlbmd0aDtcblx0XHRcdH0sXG5cdFx0XHR3cml0ZShmZCwgYnVmLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24sIGNhbGxiYWNrKSB7XG5cdFx0XHRcdGlmIChvZmZzZXQgIT09IDAgfHwgbGVuZ3RoICE9PSBidWYubGVuZ3RoIHx8IHBvc2l0aW9uICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soZW5vc3lzKCkpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCBuID0gdGhpcy53cml0ZVN5bmMoZmQsIGJ1Zik7XG5cdFx0XHRcdGNhbGxiYWNrKG51bGwsIG4pO1xuXHRcdFx0fSxcblx0XHRcdGNobW9kKHBhdGgsIG1vZGUsIGNhbGxiYWNrKSB7IGNhbGxiYWNrKGVub3N5cygpKTsgfSxcblx0XHRcdGNob3duKHBhdGgsIHVpZCwgZ2lkLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRjbG9zZShmZCwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0ZmNobW9kKGZkLCBtb2RlLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRmY2hvd24oZmQsIHVpZCwgZ2lkLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRmc3RhdChmZCwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0ZnN5bmMoZmQsIGNhbGxiYWNrKSB7IGNhbGxiYWNrKG51bGwpOyB9LFxuXHRcdFx0ZnRydW5jYXRlKGZkLCBsZW5ndGgsIGNhbGxiYWNrKSB7IGNhbGxiYWNrKGVub3N5cygpKTsgfSxcblx0XHRcdGxjaG93bihwYXRoLCB1aWQsIGdpZCwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0bGluayhwYXRoLCBsaW5rLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRsc3RhdChwYXRoLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRta2RpcihwYXRoLCBwZXJtLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRvcGVuKHBhdGgsIGZsYWdzLCBtb2RlLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRyZWFkKGZkLCBidWZmZXIsIG9mZnNldCwgbGVuZ3RoLCBwb3NpdGlvbiwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0cmVhZGRpcihwYXRoLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRyZWFkbGluayhwYXRoLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRyZW5hbWUoZnJvbSwgdG8sIGNhbGxiYWNrKSB7IGNhbGxiYWNrKGVub3N5cygpKTsgfSxcblx0XHRcdHJtZGlyKHBhdGgsIGNhbGxiYWNrKSB7IGNhbGxiYWNrKGVub3N5cygpKTsgfSxcblx0XHRcdHN0YXQocGF0aCwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0c3ltbGluayhwYXRoLCBsaW5rLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHR0cnVuY2F0ZShwYXRoLCBsZW5ndGgsIGNhbGxiYWNrKSB7IGNhbGxiYWNrKGVub3N5cygpKTsgfSxcblx0XHRcdHVubGluayhwYXRoLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHR1dGltZXMocGF0aCwgYXRpbWUsIG10aW1lLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0fTtcblx0fVxuXG5cdGlmICghZ2xvYmFsLnByb2Nlc3MpIHtcblx0XHRnbG9iYWwucHJvY2VzcyA9IHtcblx0XHRcdGdldHVpZCgpIHsgcmV0dXJuIC0xOyB9LFxuXHRcdFx0Z2V0Z2lkKCkgeyByZXR1cm4gLTE7IH0sXG5cdFx0XHRnZXRldWlkKCkgeyByZXR1cm4gLTE7IH0sXG5cdFx0XHRnZXRlZ2lkKCkgeyByZXR1cm4gLTE7IH0sXG5cdFx0XHRnZXRncm91cHMoKSB7IHRocm93IGVub3N5cygpOyB9LFxuXHRcdFx0cGlkOiAtMSxcblx0XHRcdHBwaWQ6IC0xLFxuXHRcdFx0dW1hc2soKSB7IHRocm93IGVub3N5cygpOyB9LFxuXHRcdFx0Y3dkKCkgeyB0aHJvdyBlbm9zeXMoKTsgfSxcblx0XHRcdGNoZGlyKCkgeyB0aHJvdyBlbm9zeXMoKTsgfSxcblx0XHR9XG5cdH1cblxuXHRpZiAoIWdsb2JhbC5jcnlwdG8gJiYgZ2xvYmFsLnJlcXVpcmUpIHtcblx0XHRjb25zdCBub2RlQ3J5cHRvID0gcmVxdWlyZShcImNyeXB0b1wiKTtcblx0XHRnbG9iYWwuY3J5cHRvID0ge1xuXHRcdFx0Z2V0UmFuZG9tVmFsdWVzKGIpIHtcblx0XHRcdFx0bm9kZUNyeXB0by5yYW5kb21GaWxsU3luYyhiKTtcblx0XHRcdH0sXG5cdFx0fTtcblx0fVxuXHRpZiAoIWdsb2JhbC5jcnlwdG8pIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJnbG9iYWwuY3J5cHRvIGlzIG5vdCBhdmFpbGFibGUsIHBvbHlmaWxsIHJlcXVpcmVkIChnZXRSYW5kb21WYWx1ZXMgb25seSlcIik7XG5cdH1cblxuXHRpZiAoIWdsb2JhbC5wZXJmb3JtYW5jZSkge1xuXHRcdGdsb2JhbC5wZXJmb3JtYW5jZSA9IHtcblx0XHRcdG5vdygpIHtcblx0XHRcdFx0Y29uc3QgW3NlYywgbnNlY10gPSBwcm9jZXNzLmhydGltZSgpO1xuXHRcdFx0XHRyZXR1cm4gc2VjICogMTAwMCArIG5zZWMgLyAxMDAwMDAwO1xuXHRcdFx0fSxcblx0XHR9O1xuXHR9XG5cblx0aWYgKCFnbG9iYWwuVGV4dEVuY29kZXIgJiYgZ2xvYmFsLnJlcXVpcmUpIHtcblx0XHRnbG9iYWwuVGV4dEVuY29kZXIgPSByZXF1aXJlKFwidXRpbFwiKS5UZXh0RW5jb2Rlcjtcblx0fVxuXHRpZiAoIWdsb2JhbC5UZXh0RW5jb2Rlcikge1xuXHRcdHRocm93IG5ldyBFcnJvcihcImdsb2JhbC5UZXh0RW5jb2RlciBpcyBub3QgYXZhaWxhYmxlLCBwb2x5ZmlsbCByZXF1aXJlZFwiKTtcblx0fVxuXG5cdGlmICghZ2xvYmFsLlRleHREZWNvZGVyICYmIGdsb2JhbC5yZXF1aXJlKSB7XG5cdFx0Z2xvYmFsLlRleHREZWNvZGVyID0gcmVxdWlyZShcInV0aWxcIikuVGV4dERlY29kZXI7XG5cdH1cblx0aWYgKCFnbG9iYWwuVGV4dERlY29kZXIpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJnbG9iYWwuVGV4dERlY29kZXIgaXMgbm90IGF2YWlsYWJsZSwgcG9seWZpbGwgcmVxdWlyZWRcIik7XG5cdH1cblxuXHQvLyBFbmQgb2YgcG9seWZpbGxzIGZvciBjb21tb24gQVBJLlxuXG5cdGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoXCJ1dGYtOFwiKTtcblx0Y29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpO1xuXG5cdGdsb2JhbC5HbyA9IGNsYXNzIHtcblx0XHRjb25zdHJ1Y3RvcigpIHtcblx0XHRcdHRoaXMuYXJndiA9IFtcImpzXCJdO1xuXHRcdFx0dGhpcy5lbnYgPSB7fTtcblx0XHRcdHRoaXMuZXhpdCA9IChjb2RlKSA9PiB7XG5cdFx0XHRcdGlmIChjb2RlICE9PSAwKSB7XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKFwiZXhpdCBjb2RlOlwiLCBjb2RlKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdHRoaXMuX2V4aXRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdFx0dGhpcy5fcmVzb2x2ZUV4aXRQcm9taXNlID0gcmVzb2x2ZTtcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5fcGVuZGluZ0V2ZW50ID0gbnVsbDtcblx0XHRcdHRoaXMuX3NjaGVkdWxlZFRpbWVvdXRzID0gbmV3IE1hcCgpO1xuXHRcdFx0dGhpcy5fbmV4dENhbGxiYWNrVGltZW91dElEID0gMTtcblxuXHRcdFx0Y29uc3Qgc2V0SW50NjQgPSAoYWRkciwgdikgPT4ge1xuXHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50MzIoYWRkciArIDAsIHYsIHRydWUpO1xuXHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50MzIoYWRkciArIDQsIE1hdGguZmxvb3IodiAvIDQyOTQ5NjcyOTYpLCB0cnVlKTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgZ2V0SW50NjQgPSAoYWRkcikgPT4ge1xuXHRcdFx0XHRjb25zdCBsb3cgPSB0aGlzLm1lbS5nZXRVaW50MzIoYWRkciArIDAsIHRydWUpO1xuXHRcdFx0XHRjb25zdCBoaWdoID0gdGhpcy5tZW0uZ2V0SW50MzIoYWRkciArIDQsIHRydWUpO1xuXHRcdFx0XHRyZXR1cm4gbG93ICsgaGlnaCAqIDQyOTQ5NjcyOTY7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGxvYWRWYWx1ZSA9IChhZGRyKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGYgPSB0aGlzLm1lbS5nZXRGbG9hdDY0KGFkZHIsIHRydWUpO1xuXHRcdFx0XHRpZiAoZiA9PT0gMCkge1xuXHRcdFx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCFpc05hTihmKSkge1xuXHRcdFx0XHRcdHJldHVybiBmO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgaWQgPSB0aGlzLm1lbS5nZXRVaW50MzIoYWRkciwgdHJ1ZSk7XG5cdFx0XHRcdHJldHVybiB0aGlzLl92YWx1ZXNbaWRdO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzdG9yZVZhbHVlID0gKGFkZHIsIHYpID0+IHtcblx0XHRcdFx0Y29uc3QgbmFuSGVhZCA9IDB4N0ZGODAwMDA7XG5cblx0XHRcdFx0aWYgKHR5cGVvZiB2ID09PSBcIm51bWJlclwiICYmIHYgIT09IDApIHtcblx0XHRcdFx0XHRpZiAoaXNOYU4odikpIHtcblx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQzMihhZGRyICsgNCwgbmFuSGVhZCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50MzIoYWRkciwgMCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRoaXMubWVtLnNldEZsb2F0NjQoYWRkciwgdiwgdHJ1ZSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHYgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHRoaXMubWVtLnNldEZsb2F0NjQoYWRkciwgMCwgdHJ1ZSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0bGV0IGlkID0gdGhpcy5faWRzLmdldCh2KTtcblx0XHRcdFx0aWYgKGlkID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRpZCA9IHRoaXMuX2lkUG9vbC5wb3AoKTtcblx0XHRcdFx0XHRpZiAoaWQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0aWQgPSB0aGlzLl92YWx1ZXMubGVuZ3RoO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLl92YWx1ZXNbaWRdID0gdjtcblx0XHRcdFx0XHR0aGlzLl9nb1JlZkNvdW50c1tpZF0gPSAwO1xuXHRcdFx0XHRcdHRoaXMuX2lkcy5zZXQodiwgaWQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuX2dvUmVmQ291bnRzW2lkXSsrO1xuXHRcdFx0XHRsZXQgdHlwZUZsYWcgPSAwO1xuXHRcdFx0XHRzd2l0Y2ggKHR5cGVvZiB2KSB7XG5cdFx0XHRcdFx0Y2FzZSBcIm9iamVjdFwiOlxuXHRcdFx0XHRcdFx0aWYgKHYgIT09IG51bGwpIHtcblx0XHRcdFx0XHRcdFx0dHlwZUZsYWcgPSAxO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInN0cmluZ1wiOlxuXHRcdFx0XHRcdFx0dHlwZUZsYWcgPSAyO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInN5bWJvbFwiOlxuXHRcdFx0XHRcdFx0dHlwZUZsYWcgPSAzO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcImZ1bmN0aW9uXCI6XG5cdFx0XHRcdFx0XHR0eXBlRmxhZyA9IDQ7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50MzIoYWRkciArIDQsIG5hbkhlYWQgfCB0eXBlRmxhZywgdHJ1ZSk7XG5cdFx0XHRcdHRoaXMubWVtLnNldFVpbnQzMihhZGRyLCBpZCwgdHJ1ZSk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGxvYWRTbGljZSA9IChhZGRyKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGFycmF5ID0gZ2V0SW50NjQoYWRkciArIDApO1xuXHRcdFx0XHRjb25zdCBsZW4gPSBnZXRJbnQ2NChhZGRyICsgOCk7XG5cdFx0XHRcdHJldHVybiBuZXcgVWludDhBcnJheSh0aGlzLl9pbnN0LmV4cG9ydHMubWVtLmJ1ZmZlciwgYXJyYXksIGxlbik7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGxvYWRTbGljZU9mVmFsdWVzID0gKGFkZHIpID0+IHtcblx0XHRcdFx0Y29uc3QgYXJyYXkgPSBnZXRJbnQ2NChhZGRyICsgMCk7XG5cdFx0XHRcdGNvbnN0IGxlbiA9IGdldEludDY0KGFkZHIgKyA4KTtcblx0XHRcdFx0Y29uc3QgYSA9IG5ldyBBcnJheShsZW4pO1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRcdFx0YVtpXSA9IGxvYWRWYWx1ZShhcnJheSArIGkgKiA4KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gYTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgbG9hZFN0cmluZyA9IChhZGRyKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNhZGRyID0gZ2V0SW50NjQoYWRkciArIDApO1xuXHRcdFx0XHRjb25zdCBsZW4gPSBnZXRJbnQ2NChhZGRyICsgOCk7XG5cdFx0XHRcdHJldHVybiBkZWNvZGVyLmRlY29kZShuZXcgRGF0YVZpZXcodGhpcy5faW5zdC5leHBvcnRzLm1lbS5idWZmZXIsIHNhZGRyLCBsZW4pKTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgdGltZU9yaWdpbiA9IERhdGUubm93KCkgLSBwZXJmb3JtYW5jZS5ub3coKTtcblx0XHRcdHRoaXMuaW1wb3J0T2JqZWN0ID0ge1xuXHRcdFx0XHRnbzoge1xuXHRcdFx0XHRcdC8vIEdvJ3MgU1AgZG9lcyBub3QgY2hhbmdlIGFzIGxvbmcgYXMgbm8gR28gY29kZSBpcyBydW5uaW5nLiBTb21lIG9wZXJhdGlvbnMgKGUuZy4gY2FsbHMsIGdldHRlcnMgYW5kIHNldHRlcnMpXG5cdFx0XHRcdFx0Ly8gbWF5IHN5bmNocm9ub3VzbHkgdHJpZ2dlciBhIEdvIGV2ZW50IGhhbmRsZXIuIFRoaXMgbWFrZXMgR28gY29kZSBnZXQgZXhlY3V0ZWQgaW4gdGhlIG1pZGRsZSBvZiB0aGUgaW1wb3J0ZWRcblx0XHRcdFx0XHQvLyBmdW5jdGlvbi4gQSBnb3JvdXRpbmUgY2FuIHN3aXRjaCB0byBhIG5ldyBzdGFjayBpZiB0aGUgY3VycmVudCBzdGFjayBpcyB0b28gc21hbGwgKHNlZSBtb3Jlc3RhY2sgZnVuY3Rpb24pLlxuXHRcdFx0XHRcdC8vIFRoaXMgY2hhbmdlcyB0aGUgU1AsIHRodXMgd2UgaGF2ZSB0byB1cGRhdGUgdGhlIFNQIHVzZWQgYnkgdGhlIGltcG9ydGVkIGZ1bmN0aW9uLlxuXG5cdFx0XHRcdFx0Ly8gZnVuYyB3YXNtRXhpdChjb2RlIGludDMyKVxuXHRcdFx0XHRcdFwicnVudGltZS53YXNtRXhpdFwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdGNvbnN0IGNvZGUgPSB0aGlzLm1lbS5nZXRJbnQzMihzcCArIDgsIHRydWUpO1xuXHRcdFx0XHRcdFx0dGhpcy5leGl0ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuX2luc3Q7XG5cdFx0XHRcdFx0XHRkZWxldGUgdGhpcy5fdmFsdWVzO1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuX2dvUmVmQ291bnRzO1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuX2lkcztcblx0XHRcdFx0XHRcdGRlbGV0ZSB0aGlzLl9pZFBvb2w7XG5cdFx0XHRcdFx0XHR0aGlzLmV4aXQoY29kZSk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIGZ1bmMgd2FzbVdyaXRlKGZkIHVpbnRwdHIsIHAgdW5zYWZlLlBvaW50ZXIsIG4gaW50MzIpXG5cdFx0XHRcdFx0XCJydW50aW1lLndhc21Xcml0ZVwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdGNvbnN0IGZkID0gZ2V0SW50NjQoc3AgKyA4KTtcblx0XHRcdFx0XHRcdGNvbnN0IHAgPSBnZXRJbnQ2NChzcCArIDE2KTtcblx0XHRcdFx0XHRcdGNvbnN0IG4gPSB0aGlzLm1lbS5nZXRJbnQzMihzcCArIDI0LCB0cnVlKTtcblx0XHRcdFx0XHRcdGZzLndyaXRlU3luYyhmZCwgbmV3IFVpbnQ4QXJyYXkodGhpcy5faW5zdC5leHBvcnRzLm1lbS5idWZmZXIsIHAsIG4pKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyByZXNldE1lbW9yeURhdGFWaWV3KClcblx0XHRcdFx0XHRcInJ1bnRpbWUucmVzZXRNZW1vcnlEYXRhVmlld1wiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdHRoaXMubWVtID0gbmV3IERhdGFWaWV3KHRoaXMuX2luc3QuZXhwb3J0cy5tZW0uYnVmZmVyKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyBuYW5vdGltZTEoKSBpbnQ2NFxuXHRcdFx0XHRcdFwicnVudGltZS5uYW5vdGltZTFcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRzZXRJbnQ2NChzcCArIDgsICh0aW1lT3JpZ2luICsgcGVyZm9ybWFuY2Uubm93KCkpICogMTAwMDAwMCk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIGZ1bmMgd2FsbHRpbWUoKSAoc2VjIGludDY0LCBuc2VjIGludDMyKVxuXHRcdFx0XHRcdFwicnVudGltZS53YWxsdGltZVwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdGNvbnN0IG1zZWMgPSAobmV3IERhdGUpLmdldFRpbWUoKTtcblx0XHRcdFx0XHRcdHNldEludDY0KHNwICsgOCwgbXNlYyAvIDEwMDApO1xuXHRcdFx0XHRcdFx0dGhpcy5tZW0uc2V0SW50MzIoc3AgKyAxNiwgKG1zZWMgJSAxMDAwKSAqIDEwMDAwMDAsIHRydWUpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHNjaGVkdWxlVGltZW91dEV2ZW50KGRlbGF5IGludDY0KSBpbnQzMlxuXHRcdFx0XHRcdFwicnVudGltZS5zY2hlZHVsZVRpbWVvdXRFdmVudFwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdGNvbnN0IGlkID0gdGhpcy5fbmV4dENhbGxiYWNrVGltZW91dElEO1xuXHRcdFx0XHRcdFx0dGhpcy5fbmV4dENhbGxiYWNrVGltZW91dElEKys7XG5cdFx0XHRcdFx0XHR0aGlzLl9zY2hlZHVsZWRUaW1lb3V0cy5zZXQoaWQsIHNldFRpbWVvdXQoXG5cdFx0XHRcdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLl9yZXN1bWUoKTtcblx0XHRcdFx0XHRcdFx0XHR3aGlsZSAodGhpcy5fc2NoZWR1bGVkVGltZW91dHMuaGFzKGlkKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gZm9yIHNvbWUgcmVhc29uIEdvIGZhaWxlZCB0byByZWdpc3RlciB0aGUgdGltZW91dCBldmVudCwgbG9nIGFuZCB0cnkgYWdhaW5cblx0XHRcdFx0XHRcdFx0XHRcdC8vICh0ZW1wb3Jhcnkgd29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9naXRodWIuY29tL2dvbGFuZy9nby9pc3N1ZXMvMjg5NzUpXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oXCJzY2hlZHVsZVRpbWVvdXRFdmVudDogbWlzc2VkIHRpbWVvdXQgZXZlbnRcIik7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLl9yZXN1bWUoKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGdldEludDY0KHNwICsgOCkgKyAxLCAvLyBzZXRUaW1lb3V0IGhhcyBiZWVuIHNlZW4gdG8gZmlyZSB1cCB0byAxIG1pbGxpc2Vjb25kIGVhcmx5XG5cdFx0XHRcdFx0XHQpKTtcblx0XHRcdFx0XHRcdHRoaXMubWVtLnNldEludDMyKHNwICsgMTYsIGlkLCB0cnVlKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyBjbGVhclRpbWVvdXRFdmVudChpZCBpbnQzMilcblx0XHRcdFx0XHRcInJ1bnRpbWUuY2xlYXJUaW1lb3V0RXZlbnRcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjb25zdCBpZCA9IHRoaXMubWVtLmdldEludDMyKHNwICsgOCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQodGhpcy5fc2NoZWR1bGVkVGltZW91dHMuZ2V0KGlkKSk7XG5cdFx0XHRcdFx0XHR0aGlzLl9zY2hlZHVsZWRUaW1lb3V0cy5kZWxldGUoaWQpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIGdldFJhbmRvbURhdGEociBbXWJ5dGUpXG5cdFx0XHRcdFx0XCJydW50aW1lLmdldFJhbmRvbURhdGFcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGxvYWRTbGljZShzcCArIDgpKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyBmaW5hbGl6ZVJlZih2IHJlZilcblx0XHRcdFx0XHRcInN5c2NhbGwvanMuZmluYWxpemVSZWZcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjb25zdCBpZCA9IHRoaXMubWVtLmdldFVpbnQzMihzcCArIDgsIHRydWUpO1xuXHRcdFx0XHRcdFx0dGhpcy5fZ29SZWZDb3VudHNbaWRdLS07XG5cdFx0XHRcdFx0XHRpZiAodGhpcy5fZ29SZWZDb3VudHNbaWRdID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHYgPSB0aGlzLl92YWx1ZXNbaWRdO1xuXHRcdFx0XHRcdFx0XHR0aGlzLl92YWx1ZXNbaWRdID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0dGhpcy5faWRzLmRlbGV0ZSh2KTtcblx0XHRcdFx0XHRcdFx0dGhpcy5faWRQb29sLnB1c2goaWQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHN0cmluZ1ZhbCh2YWx1ZSBzdHJpbmcpIHJlZlxuXHRcdFx0XHRcdFwic3lzY2FsbC9qcy5zdHJpbmdWYWxcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRzdG9yZVZhbHVlKHNwICsgMjQsIGxvYWRTdHJpbmcoc3AgKyA4KSk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIGZ1bmMgdmFsdWVHZXQodiByZWYsIHAgc3RyaW5nKSByZWZcblx0XHRcdFx0XHRcInN5c2NhbGwvanMudmFsdWVHZXRcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBSZWZsZWN0LmdldChsb2FkVmFsdWUoc3AgKyA4KSwgbG9hZFN0cmluZyhzcCArIDE2KSk7XG5cdFx0XHRcdFx0XHRzcCA9IHRoaXMuX2luc3QuZXhwb3J0cy5nZXRzcCgpID4+PiAwOyAvLyBzZWUgY29tbWVudCBhYm92ZVxuXHRcdFx0XHRcdFx0c3RvcmVWYWx1ZShzcCArIDMyLCByZXN1bHQpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHZhbHVlU2V0KHYgcmVmLCBwIHN0cmluZywgeCByZWYpXG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLnZhbHVlU2V0XCI6IChzcCkgPT4ge1xuXHRcdFx0XHRcdFx0c3AgPj4+PSAwO1xuXHRcdFx0XHRcdFx0UmVmbGVjdC5zZXQobG9hZFZhbHVlKHNwICsgOCksIGxvYWRTdHJpbmcoc3AgKyAxNiksIGxvYWRWYWx1ZShzcCArIDMyKSk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIGZ1bmMgdmFsdWVEZWxldGUodiByZWYsIHAgc3RyaW5nKVxuXHRcdFx0XHRcdFwic3lzY2FsbC9qcy52YWx1ZURlbGV0ZVwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdFJlZmxlY3QuZGVsZXRlUHJvcGVydHkobG9hZFZhbHVlKHNwICsgOCksIGxvYWRTdHJpbmcoc3AgKyAxNikpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHZhbHVlSW5kZXgodiByZWYsIGkgaW50KSByZWZcblx0XHRcdFx0XHRcInN5c2NhbGwvanMudmFsdWVJbmRleFwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdHN0b3JlVmFsdWUoc3AgKyAyNCwgUmVmbGVjdC5nZXQobG9hZFZhbHVlKHNwICsgOCksIGdldEludDY0KHNwICsgMTYpKSk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIHZhbHVlU2V0SW5kZXgodiByZWYsIGkgaW50LCB4IHJlZilcblx0XHRcdFx0XHRcInN5c2NhbGwvanMudmFsdWVTZXRJbmRleFwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdFJlZmxlY3Quc2V0KGxvYWRWYWx1ZShzcCArIDgpLCBnZXRJbnQ2NChzcCArIDE2KSwgbG9hZFZhbHVlKHNwICsgMjQpKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyB2YWx1ZUNhbGwodiByZWYsIG0gc3RyaW5nLCBhcmdzIFtdcmVmKSAocmVmLCBib29sKVxuXHRcdFx0XHRcdFwic3lzY2FsbC9qcy52YWx1ZUNhbGxcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCB2ID0gbG9hZFZhbHVlKHNwICsgOCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IG0gPSBSZWZsZWN0LmdldCh2LCBsb2FkU3RyaW5nKHNwICsgMTYpKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgYXJncyA9IGxvYWRTbGljZU9mVmFsdWVzKHNwICsgMzIpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KG0sIHYsIGFyZ3MpO1xuXHRcdFx0XHRcdFx0XHRzcCA9IHRoaXMuX2luc3QuZXhwb3J0cy5nZXRzcCgpID4+PiAwOyAvLyBzZWUgY29tbWVudCBhYm92ZVxuXHRcdFx0XHRcdFx0XHRzdG9yZVZhbHVlKHNwICsgNTYsIHJlc3VsdCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQ4KHNwICsgNjQsIDEpO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdHNwID0gdGhpcy5faW5zdC5leHBvcnRzLmdldHNwKCkgPj4+IDA7IC8vIHNlZSBjb21tZW50IGFib3ZlXG5cdFx0XHRcdFx0XHRcdHN0b3JlVmFsdWUoc3AgKyA1NiwgZXJyKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5tZW0uc2V0VWludDgoc3AgKyA2NCwgMCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIGZ1bmMgdmFsdWVJbnZva2UodiByZWYsIGFyZ3MgW11yZWYpIChyZWYsIGJvb2wpXG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLnZhbHVlSW52b2tlXCI6IChzcCkgPT4ge1xuXHRcdFx0XHRcdFx0c3AgPj4+PSAwO1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgdiA9IGxvYWRWYWx1ZShzcCArIDgpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBhcmdzID0gbG9hZFNsaWNlT2ZWYWx1ZXMoc3AgKyAxNik7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IFJlZmxlY3QuYXBwbHkodiwgdW5kZWZpbmVkLCBhcmdzKTtcblx0XHRcdFx0XHRcdFx0c3AgPSB0aGlzLl9pbnN0LmV4cG9ydHMuZ2V0c3AoKSA+Pj4gMDsgLy8gc2VlIGNvbW1lbnQgYWJvdmVcblx0XHRcdFx0XHRcdFx0c3RvcmVWYWx1ZShzcCArIDQwLCByZXN1bHQpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50OChzcCArIDQ4LCAxKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHRzcCA9IHRoaXMuX2luc3QuZXhwb3J0cy5nZXRzcCgpID4+PiAwOyAvLyBzZWUgY29tbWVudCBhYm92ZVxuXHRcdFx0XHRcdFx0XHRzdG9yZVZhbHVlKHNwICsgNDAsIGVycik7XG5cdFx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQ4KHNwICsgNDgsIDApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHZhbHVlTmV3KHYgcmVmLCBhcmdzIFtdcmVmKSAocmVmLCBib29sKVxuXHRcdFx0XHRcdFwic3lzY2FsbC9qcy52YWx1ZU5ld1wiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHYgPSBsb2FkVmFsdWUoc3AgKyA4KTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgYXJncyA9IGxvYWRTbGljZU9mVmFsdWVzKHNwICsgMTYpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdCh2LCBhcmdzKTtcblx0XHRcdFx0XHRcdFx0c3AgPSB0aGlzLl9pbnN0LmV4cG9ydHMuZ2V0c3AoKSA+Pj4gMDsgLy8gc2VlIGNvbW1lbnQgYWJvdmVcblx0XHRcdFx0XHRcdFx0c3RvcmVWYWx1ZShzcCArIDQwLCByZXN1bHQpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50OChzcCArIDQ4LCAxKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHRzcCA9IHRoaXMuX2luc3QuZXhwb3J0cy5nZXRzcCgpID4+PiAwOyAvLyBzZWUgY29tbWVudCBhYm92ZVxuXHRcdFx0XHRcdFx0XHRzdG9yZVZhbHVlKHNwICsgNDAsIGVycik7XG5cdFx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQ4KHNwICsgNDgsIDApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHZhbHVlTGVuZ3RoKHYgcmVmKSBpbnRcblx0XHRcdFx0XHRcInN5c2NhbGwvanMudmFsdWVMZW5ndGhcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRzZXRJbnQ2NChzcCArIDE2LCBwYXJzZUludChsb2FkVmFsdWUoc3AgKyA4KS5sZW5ndGgpKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gdmFsdWVQcmVwYXJlU3RyaW5nKHYgcmVmKSAocmVmLCBpbnQpXG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLnZhbHVlUHJlcGFyZVN0cmluZ1wiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdGNvbnN0IHN0ciA9IGVuY29kZXIuZW5jb2RlKFN0cmluZyhsb2FkVmFsdWUoc3AgKyA4KSkpO1xuXHRcdFx0XHRcdFx0c3RvcmVWYWx1ZShzcCArIDE2LCBzdHIpO1xuXHRcdFx0XHRcdFx0c2V0SW50NjQoc3AgKyAyNCwgc3RyLmxlbmd0aCk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIHZhbHVlTG9hZFN0cmluZyh2IHJlZiwgYiBbXWJ5dGUpXG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLnZhbHVlTG9hZFN0cmluZ1wiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdGNvbnN0IHN0ciA9IGxvYWRWYWx1ZShzcCArIDgpO1xuXHRcdFx0XHRcdFx0bG9hZFNsaWNlKHNwICsgMTYpLnNldChzdHIpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHZhbHVlSW5zdGFuY2VPZih2IHJlZiwgdCByZWYpIGJvb2xcblx0XHRcdFx0XHRcInN5c2NhbGwvanMudmFsdWVJbnN0YW5jZU9mXCI6IChzcCkgPT4ge1xuXHRcdFx0XHRcdFx0c3AgPj4+PSAwO1xuXHRcdFx0XHRcdFx0dGhpcy5tZW0uc2V0VWludDgoc3AgKyAyNCwgKGxvYWRWYWx1ZShzcCArIDgpIGluc3RhbmNlb2YgbG9hZFZhbHVlKHNwICsgMTYpKSA/IDEgOiAwKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyBjb3B5Qnl0ZXNUb0dvKGRzdCBbXWJ5dGUsIHNyYyByZWYpIChpbnQsIGJvb2wpXG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLmNvcHlCeXRlc1RvR29cIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjb25zdCBkc3QgPSBsb2FkU2xpY2Uoc3AgKyA4KTtcblx0XHRcdFx0XHRcdGNvbnN0IHNyYyA9IGxvYWRWYWx1ZShzcCArIDMyKTtcblx0XHRcdFx0XHRcdGlmICghKHNyYyBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgfHwgc3JjIGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXkpKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQ4KHNwICsgNDgsIDApO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjb25zdCB0b0NvcHkgPSBzcmMuc3ViYXJyYXkoMCwgZHN0Lmxlbmd0aCk7XG5cdFx0XHRcdFx0XHRkc3Quc2V0KHRvQ29weSk7XG5cdFx0XHRcdFx0XHRzZXRJbnQ2NChzcCArIDQwLCB0b0NvcHkubGVuZ3RoKTtcblx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQ4KHNwICsgNDgsIDEpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIGNvcHlCeXRlc1RvSlMoZHN0IHJlZiwgc3JjIFtdYnl0ZSkgKGludCwgYm9vbClcblx0XHRcdFx0XHRcInN5c2NhbGwvanMuY29weUJ5dGVzVG9KU1wiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdGNvbnN0IGRzdCA9IGxvYWRWYWx1ZShzcCArIDgpO1xuXHRcdFx0XHRcdFx0Y29uc3Qgc3JjID0gbG9hZFNsaWNlKHNwICsgMTYpO1xuXHRcdFx0XHRcdFx0aWYgKCEoZHN0IGluc3RhbmNlb2YgVWludDhBcnJheSB8fCBkc3QgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheSkpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5tZW0uc2V0VWludDgoc3AgKyA0OCwgMCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNvbnN0IHRvQ29weSA9IHNyYy5zdWJhcnJheSgwLCBkc3QubGVuZ3RoKTtcblx0XHRcdFx0XHRcdGRzdC5zZXQodG9Db3B5KTtcblx0XHRcdFx0XHRcdHNldEludDY0KHNwICsgNDAsIHRvQ29weS5sZW5ndGgpO1xuXHRcdFx0XHRcdFx0dGhpcy5tZW0uc2V0VWludDgoc3AgKyA0OCwgMSk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdFwiZGVidWdcIjogKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyh2YWx1ZSk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRhc3luYyBydW4oaW5zdGFuY2UpIHtcblx0XHRcdGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgV2ViQXNzZW1ibHkuSW5zdGFuY2UpKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIkdvLnJ1bjogV2ViQXNzZW1ibHkuSW5zdGFuY2UgZXhwZWN0ZWRcIik7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9pbnN0ID0gaW5zdGFuY2U7XG5cdFx0XHR0aGlzLm1lbSA9IG5ldyBEYXRhVmlldyh0aGlzLl9pbnN0LmV4cG9ydHMubWVtLmJ1ZmZlcik7XG5cdFx0XHR0aGlzLl92YWx1ZXMgPSBbIC8vIEpTIHZhbHVlcyB0aGF0IEdvIGN1cnJlbnRseSBoYXMgcmVmZXJlbmNlcyB0bywgaW5kZXhlZCBieSByZWZlcmVuY2UgaWRcblx0XHRcdFx0TmFOLFxuXHRcdFx0XHQwLFxuXHRcdFx0XHRudWxsLFxuXHRcdFx0XHR0cnVlLFxuXHRcdFx0XHRmYWxzZSxcblx0XHRcdFx0Z2xvYmFsLFxuXHRcdFx0XHR0aGlzLFxuXHRcdFx0XTtcblx0XHRcdHRoaXMuX2dvUmVmQ291bnRzID0gbmV3IEFycmF5KHRoaXMuX3ZhbHVlcy5sZW5ndGgpLmZpbGwoSW5maW5pdHkpOyAvLyBudW1iZXIgb2YgcmVmZXJlbmNlcyB0aGF0IEdvIGhhcyB0byBhIEpTIHZhbHVlLCBpbmRleGVkIGJ5IHJlZmVyZW5jZSBpZFxuXHRcdFx0dGhpcy5faWRzID0gbmV3IE1hcChbIC8vIG1hcHBpbmcgZnJvbSBKUyB2YWx1ZXMgdG8gcmVmZXJlbmNlIGlkc1xuXHRcdFx0XHRbMCwgMV0sXG5cdFx0XHRcdFtudWxsLCAyXSxcblx0XHRcdFx0W3RydWUsIDNdLFxuXHRcdFx0XHRbZmFsc2UsIDRdLFxuXHRcdFx0XHRbZ2xvYmFsLCA1XSxcblx0XHRcdFx0W3RoaXMsIDZdLFxuXHRcdFx0XSk7XG5cdFx0XHR0aGlzLl9pZFBvb2wgPSBbXTsgICAvLyB1bnVzZWQgaWRzIHRoYXQgaGF2ZSBiZWVuIGdhcmJhZ2UgY29sbGVjdGVkXG5cdFx0XHR0aGlzLmV4aXRlZCA9IGZhbHNlOyAvLyB3aGV0aGVyIHRoZSBHbyBwcm9ncmFtIGhhcyBleGl0ZWRcblxuXHRcdFx0Ly8gUGFzcyBjb21tYW5kIGxpbmUgYXJndW1lbnRzIGFuZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgdG8gV2ViQXNzZW1ibHkgYnkgd3JpdGluZyB0aGVtIHRvIHRoZSBsaW5lYXIgbWVtb3J5LlxuXHRcdFx0bGV0IG9mZnNldCA9IDQwOTY7XG5cblx0XHRcdGNvbnN0IHN0clB0ciA9IChzdHIpID0+IHtcblx0XHRcdFx0Y29uc3QgcHRyID0gb2Zmc2V0O1xuXHRcdFx0XHRjb25zdCBieXRlcyA9IGVuY29kZXIuZW5jb2RlKHN0ciArIFwiXFxcXDBcIik7XG5cdFx0XHRcdG5ldyBVaW50OEFycmF5KHRoaXMubWVtLmJ1ZmZlciwgb2Zmc2V0LCBieXRlcy5sZW5ndGgpLnNldChieXRlcyk7XG5cdFx0XHRcdG9mZnNldCArPSBieXRlcy5sZW5ndGg7XG5cdFx0XHRcdGlmIChvZmZzZXQgJSA4ICE9PSAwKSB7XG5cdFx0XHRcdFx0b2Zmc2V0ICs9IDggLSAob2Zmc2V0ICUgOCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHB0cjtcblx0XHRcdH07XG5cblx0XHRcdGNvbnN0IGFyZ2MgPSB0aGlzLmFyZ3YubGVuZ3RoO1xuXG5cdFx0XHRjb25zdCBhcmd2UHRycyA9IFtdO1xuXHRcdFx0dGhpcy5hcmd2LmZvckVhY2goKGFyZykgPT4ge1xuXHRcdFx0XHRhcmd2UHRycy5wdXNoKHN0clB0cihhcmcpKTtcblx0XHRcdH0pO1xuXHRcdFx0YXJndlB0cnMucHVzaCgwKTtcblxuXHRcdFx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuZW52KS5zb3J0KCk7XG5cdFx0XHRrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuXHRcdFx0XHRhcmd2UHRycy5wdXNoKHN0clB0cihcXGBcXCR7a2V5fT1cXCR7dGhpcy5lbnZba2V5XX1cXGApKTtcblx0XHRcdH0pO1xuXHRcdFx0YXJndlB0cnMucHVzaCgwKTtcblxuXHRcdFx0Y29uc3QgYXJndiA9IG9mZnNldDtcblx0XHRcdGFyZ3ZQdHJzLmZvckVhY2goKHB0cikgPT4ge1xuXHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50MzIob2Zmc2V0LCBwdHIsIHRydWUpO1xuXHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50MzIob2Zmc2V0ICsgNCwgMCwgdHJ1ZSk7XG5cdFx0XHRcdG9mZnNldCArPSA4O1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFRoZSBsaW5rZXIgZ3VhcmFudGVlcyBnbG9iYWwgZGF0YSBzdGFydHMgZnJvbSBhdCBsZWFzdCB3YXNtTWluRGF0YUFkZHIuXG5cdFx0XHQvLyBLZWVwIGluIHN5bmMgd2l0aCBjbWQvbGluay9pbnRlcm5hbC9sZC9kYXRhLmdvOndhc21NaW5EYXRhQWRkci5cblx0XHRcdGNvbnN0IHdhc21NaW5EYXRhQWRkciA9IDQwOTYgKyA0MDk2O1xuXHRcdFx0aWYgKG9mZnNldCA+PSB3YXNtTWluRGF0YUFkZHIpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiY29tbWFuZCBsaW5lIHRvbyBsb25nXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl9pbnN0LmV4cG9ydHMucnVuKGFyZ2MsIGFyZ3YpO1xuXHRcdFx0aWYgKHRoaXMuZXhpdGVkKSB7XG5cdFx0XHRcdHRoaXMuX3Jlc29sdmVFeGl0UHJvbWlzZSgpO1xuXHRcdFx0fVxuXHRcdFx0YXdhaXQgdGhpcy5fZXhpdFByb21pc2U7XG5cdFx0fVxuXG5cdFx0X3Jlc3VtZSgpIHtcblx0XHRcdGlmICh0aGlzLmV4aXRlZCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJHbyBwcm9ncmFtIGhhcyBhbHJlYWR5IGV4aXRlZFwiKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuX2luc3QuZXhwb3J0cy5yZXN1bWUoKTtcblx0XHRcdGlmICh0aGlzLmV4aXRlZCkge1xuXHRcdFx0XHR0aGlzLl9yZXNvbHZlRXhpdFByb21pc2UoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRfbWFrZUZ1bmNXcmFwcGVyKGlkKSB7XG5cdFx0XHRjb25zdCBnbyA9IHRoaXM7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRjb25zdCBldmVudCA9IHsgaWQ6IGlkLCB0aGlzOiB0aGlzLCBhcmdzOiBhcmd1bWVudHMgfTtcblx0XHRcdFx0Z28uX3BlbmRpbmdFdmVudCA9IGV2ZW50O1xuXHRcdFx0XHRnby5fcmVzdW1lKCk7XG5cdFx0XHRcdHJldHVybiBldmVudC5yZXN1bHQ7XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdGlmIChcblx0XHR0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiICYmXG5cdFx0Z2xvYmFsLnJlcXVpcmUgJiZcblx0XHRnbG9iYWwucmVxdWlyZS5tYWluID09PSBtb2R1bGUgJiZcblx0XHRnbG9iYWwucHJvY2VzcyAmJlxuXHRcdGdsb2JhbC5wcm9jZXNzLnZlcnNpb25zICYmXG5cdFx0IWdsb2JhbC5wcm9jZXNzLnZlcnNpb25zLmVsZWN0cm9uXG5cdCkge1xuXHRcdGlmIChwcm9jZXNzLmFyZ3YubGVuZ3RoIDwgMykge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcInVzYWdlOiBnb19qc193YXNtX2V4ZWMgW3dhc20gYmluYXJ5XSBbYXJndW1lbnRzXVwiKTtcblx0XHRcdHByb2Nlc3MuZXhpdCgxKTtcblx0XHR9XG5cblx0XHRjb25zdCBnbyA9IG5ldyBHbygpO1xuXHRcdGdvLmFyZ3YgPSBwcm9jZXNzLmFyZ3Yuc2xpY2UoMik7XG5cdFx0Z28uZW52ID0gT2JqZWN0LmFzc2lnbih7IFRNUERJUjogcmVxdWlyZShcIm9zXCIpLnRtcGRpcigpIH0sIHByb2Nlc3MuZW52KTtcblx0XHRnby5leGl0ID0gcHJvY2Vzcy5leGl0O1xuXHRcdFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKGZzLnJlYWRGaWxlU3luYyhwcm9jZXNzLmFyZ3ZbMl0pLCBnby5pbXBvcnRPYmplY3QpLnRoZW4oKHJlc3VsdCkgPT4ge1xuXHRcdFx0cHJvY2Vzcy5vbihcImV4aXRcIiwgKGNvZGUpID0+IHsgLy8gTm9kZS5qcyBleGl0cyBpZiBubyBldmVudCBoYW5kbGVyIGlzIHBlbmRpbmdcblx0XHRcdFx0aWYgKGNvZGUgPT09IDAgJiYgIWdvLmV4aXRlZCkge1xuXHRcdFx0XHRcdC8vIGRlYWRsb2NrLCBtYWtlIEdvIHByaW50IGVycm9yIGFuZCBzdGFjayB0cmFjZXNcblx0XHRcdFx0XHRnby5fcGVuZGluZ0V2ZW50ID0geyBpZDogMCB9O1xuXHRcdFx0XHRcdGdvLl9yZXN1bWUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZ28ucnVuKHJlc3VsdC5pbnN0YW5jZSk7XG5cdFx0fSkuY2F0Y2goKGVycikgPT4ge1xuXHRcdFx0Y29uc29sZS5lcnJvcihlcnIpO1xuXHRcdFx0cHJvY2Vzcy5leGl0KDEpO1xuXHRcdH0pO1xuXHR9XG59KSgpO1xub25tZXNzYWdlID0gKHsgZGF0YTogd2FzbSB9KSA9PiB7XG4gIGxldCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gIGxldCBmcyA9IGdsb2JhbC5mcztcbiAgbGV0IHN0ZGVyciA9IFwiXCI7XG4gIGZzLndyaXRlU3luYyA9IChmZCwgYnVmZmVyKSA9PiB7XG4gICAgaWYgKGZkID09PSAxKSB7XG4gICAgICBwb3N0TWVzc2FnZShidWZmZXIpO1xuICAgIH0gZWxzZSBpZiAoZmQgPT09IDIpIHtcbiAgICAgIHN0ZGVyciArPSBkZWNvZGVyLmRlY29kZShidWZmZXIpO1xuICAgICAgbGV0IHBhcnRzID0gc3RkZXJyLnNwbGl0KFwiXFxcXG5cIik7XG4gICAgICBpZiAocGFydHMubGVuZ3RoID4gMSlcbiAgICAgICAgY29uc29sZS5sb2cocGFydHMuc2xpY2UoMCwgLTEpLmpvaW4oXCJcXFxcblwiKSk7XG4gICAgICBzdGRlcnIgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmFkIHdyaXRlXCIpO1xuICAgIH1cbiAgICByZXR1cm4gYnVmZmVyLmxlbmd0aDtcbiAgfTtcbiAgbGV0IHN0ZGluID0gW107XG4gIGxldCByZXN1bWVTdGRpbjtcbiAgbGV0IHN0ZGluUG9zID0gMDtcbiAgb25tZXNzYWdlID0gKHsgZGF0YSB9KSA9PiB7XG4gICAgaWYgKGRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgc3RkaW4ucHVzaChkYXRhKTtcbiAgICAgIGlmIChyZXN1bWVTdGRpbilcbiAgICAgICAgcmVzdW1lU3RkaW4oKTtcbiAgICB9XG4gIH07XG4gIGZzLnJlYWQgPSAoZmQsIGJ1ZmZlciwgb2Zmc2V0LCBsZW5ndGgsIHBvc2l0aW9uLCBjYWxsYmFjaykgPT4ge1xuICAgIGlmIChmZCAhPT0gMCB8fCBvZmZzZXQgIT09IDAgfHwgbGVuZ3RoICE9PSBidWZmZXIubGVuZ3RoIHx8IHBvc2l0aW9uICE9PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgcmVhZFwiKTtcbiAgICB9XG4gICAgaWYgKHN0ZGluLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmVzdW1lU3RkaW4gPSAoKSA9PiBmcy5yZWFkKGZkLCBidWZmZXIsIG9mZnNldCwgbGVuZ3RoLCBwb3NpdGlvbiwgY2FsbGJhY2spO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgZmlyc3QgPSBzdGRpblswXTtcbiAgICBsZXQgY291bnQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihsZW5ndGgsIGZpcnN0Lmxlbmd0aCAtIHN0ZGluUG9zKSk7XG4gICAgYnVmZmVyLnNldChmaXJzdC5zdWJhcnJheShzdGRpblBvcywgc3RkaW5Qb3MgKyBjb3VudCksIG9mZnNldCk7XG4gICAgc3RkaW5Qb3MgKz0gY291bnQ7XG4gICAgaWYgKHN0ZGluUG9zID09PSBmaXJzdC5sZW5ndGgpIHtcbiAgICAgIHN0ZGluLnNoaWZ0KCk7XG4gICAgICBzdGRpblBvcyA9IDA7XG4gICAgfVxuICAgIGNhbGxiYWNrKG51bGwsIGNvdW50KTtcbiAgfTtcbiAgbGV0IGdvID0gbmV3IGdsb2JhbC5HbygpO1xuICBnby5hcmd2ID0gW1wiXCIsIFxcYC0tc2VydmljZT1cXCR7XCIwLjEzLjExXCJ9XFxgXTtcbiAgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUod2FzbSwgZ28uaW1wb3J0T2JqZWN0KS50aGVuKCh7IGluc3RhbmNlIH0pID0+IGdvLnJ1bihpbnN0YW5jZSkpO1xufTt9YDtcbiAgICBsZXQgd29ya2VyO1xuICAgIGlmICh1c2VXb3JrZXIpIHtcbiAgICAgICAgbGV0IGJsb2IgPSBuZXcgQmxvYihbXG4gICAgICAgICAgICBjb2RlXG4gICAgICAgIF0sIHtcbiAgICAgICAgICAgIHR5cGU6IFwidGV4dC9qYXZhc2NyaXB0XCJcbiAgICAgICAgfSk7XG4gICAgICAgIHdvcmtlciA9IG5ldyBXb3JrZXIoVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGZuID0gbmV3IEZ1bmN0aW9uKFwicG9zdE1lc3NhZ2VcIiwgY29kZSArIGB2YXIgb25tZXNzYWdlOyByZXR1cm4gbSA9PiBvbm1lc3NhZ2UobSlgKTtcbiAgICAgICAgbGV0IG9ubWVzc2FnZSA9IGZuKChkYXRhKT0+d29ya2VyLm9ubWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgZGF0YVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgd29ya2VyID0ge1xuICAgICAgICAgICAgb25tZXNzYWdlOiBudWxsLFxuICAgICAgICAgICAgcG9zdE1lc3NhZ2U6IChkYXRhKT0+b25tZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAsXG4gICAgICAgICAgICB0ZXJtaW5hdGUgKCkge1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICB3b3JrZXIucG9zdE1lc3NhZ2Uod2FzbSk7XG4gICAgd29ya2VyLm9ubWVzc2FnZSA9ICh7IGRhdGEgIH0pPT5yZWFkRnJvbVN0ZG91dChkYXRhKVxuICAgIDtcbiAgICBsZXQgeyByZWFkRnJvbVN0ZG91dCAsIHNlcnZpY2UgIH0gPSBjcmVhdGVDaGFubmVsKHtcbiAgICAgICAgd3JpdGVUb1N0ZGluIChieXRlcykge1xuICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKGJ5dGVzKTtcbiAgICAgICAgfSxcbiAgICAgICAgaXNTeW5jOiBmYWxzZSxcbiAgICAgICAgaXNCcm93c2VyOiB0cnVlXG4gICAgfSk7XG4gICAgbG9uZ0xpdmVkU2VydmljZSA9IHtcbiAgICAgICAgYnVpbGQ6IChvcHRpb25zKT0+bmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PnNlcnZpY2UuYnVpbGRPclNlcnZlKHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbE5hbWU6IFwiYnVpbGRcIixcbiAgICAgICAgICAgICAgICAgICAgcmVmczogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgc2VydmVPcHRpb25zOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICBpc1RUWTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRXRDogXCIvXCIsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoZXJyLCByZXMyKT0+ZXJyID8gcmVqZWN0KGVycikgOiByZXNvbHZlKHJlczIpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgLFxuICAgICAgICB0cmFuc2Zvcm06IChpbnB1dCwgb3B0aW9ucyk9Pm5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT5zZXJ2aWNlLnRyYW5zZm9ybSh7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxOYW1lOiBcInRyYW5zZm9ybVwiLFxuICAgICAgICAgICAgICAgICAgICByZWZzOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogb3B0aW9ucyB8fCB7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGlzVFRZOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRGaWxlIChfLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcihcIkludGVybmFsIGVycm9yXCIpLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUZpbGUgKF8sIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoZXJyLCByZXMyKT0+ZXJyID8gcmVqZWN0KGVycikgOiByZXNvbHZlKHJlczIpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgLFxuICAgICAgICBmb3JtYXRNZXNzYWdlczogKG1lc3NhZ2VzLCBvcHRpb25zKT0+bmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PnNlcnZpY2UuZm9ybWF0TWVzc2FnZXMoe1xuICAgICAgICAgICAgICAgICAgICBjYWxsTmFtZTogXCJmb3JtYXRNZXNzYWdlc1wiLFxuICAgICAgICAgICAgICAgICAgICByZWZzOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlcyxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IChlcnIsIHJlczIpPT5lcnIgPyByZWplY3QoZXJyKSA6IHJlc29sdmUocmVzMilcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAsXG4gICAgICAgIGFuYWx5emVNZXRhZmlsZTogKG1ldGFmaWxlLCBvcHRpb25zKT0+bmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PnNlcnZpY2UuYW5hbHl6ZU1ldGFmaWxlKHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbE5hbWU6IFwiYW5hbHl6ZU1ldGFmaWxlXCIsXG4gICAgICAgICAgICAgICAgICAgIHJlZnM6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFmaWxlOiB0eXBlb2YgbWV0YWZpbGUgPT09IFwic3RyaW5nXCIgPyBtZXRhZmlsZSA6IEpTT04uc3RyaW5naWZ5KG1ldGFmaWxlKSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IChlcnIsIHJlczIpPT5lcnIgPyByZWplY3QoZXJyKSA6IHJlc29sdmUocmVzMilcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgIH07XG59O1xuZnVuY3Rpb24gaXNVUkwodXJsKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgbmV3IFVSTCh1cmwpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoICB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXJpYWxpemVVUkwodXJsKSB7XG4gICAgcmV0dXJuIHVybC5ocmVmO1xufVxuZnVuY3Rpb24gcGFyc2VVcmxMaWtlSW1wb3J0U3BlY2lmaWVyKHNwZWNpZmllciwgYmFzZVVSTCkge1xuICAgIGlmIChiYXNlVVJMICYmIChzcGVjaWZpZXIuc3RhcnRzV2l0aChcIi9cIikgfHwgc3BlY2lmaWVyLnN0YXJ0c1dpdGgoXCIuL1wiKSB8fCBzcGVjaWZpZXIuc3RhcnRzV2l0aChcIi4uL1wiKSkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoc3BlY2lmaWVyLCBiYXNlVVJMKTtcbiAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgIH0gY2F0Y2ggIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoc3BlY2lmaWVyKTtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICB9IGNhdGNoICB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbmNvbnN0IHNwZWNpYWxTY2hlbWVzID0gW1xuICAgIFwiZnRwXCIsXG4gICAgXCJmaWxlXCIsXG4gICAgXCJodHRwXCIsXG4gICAgXCJodHRwc1wiLFxuICAgIFwid3NcIixcbiAgICBcIndzc1wiLCBcbl07XG5mdW5jdGlvbiBpc1NwZWNpYWwoYXNVUkwpIHtcbiAgICByZXR1cm4gc3BlY2lhbFNjaGVtZXMuc29tZSgoc2NoZW1lKT0+c2VyaWFsaXplVVJMKGFzVVJMKS5zdGFydHNXaXRoKHNjaGVtZSlcbiAgICApO1xufVxuZnVuY3Rpb24gcmVzb2x2ZUltcG9ydHNNYXRjaChub3JtYWxpemVkU3BlY2lmaWVyLCBhc1VSTCwgc3BlY2lmaWVyTWFwKSB7XG4gICAgZm9yIChjb25zdCBbc3BlY2lmaWVyS2V5LCByZXNvbHV0aW9uUmVzdWx0XSBvZiBPYmplY3QuZW50cmllcyhzcGVjaWZpZXJNYXApKXtcbiAgICAgICAgaWYgKHNwZWNpZmllcktleSA9PT0gbm9ybWFsaXplZFNwZWNpZmllcikge1xuICAgICAgICAgICAgaWYgKHJlc29sdXRpb25SZXN1bHQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGByZXNvbHV0aW9uIG9mIHNwZWNpZmllcktleSB3YXMgYmxvY2tlZCBieSBhIG51bGwgZW50cnkuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzVVJMKHJlc29sdXRpb25SZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgcmVzb2x1dGlvblJlc3VsdCBtdXN0IGJlIGFuIFVSTC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNvbHV0aW9uUmVzdWx0O1xuICAgICAgICB9IGVsc2UgaWYgKHNwZWNpZmllcktleS5lbmRzV2l0aChcIi9cIikgJiYgbm9ybWFsaXplZFNwZWNpZmllci5zdGFydHNXaXRoKHNwZWNpZmllcktleSkgJiYgKGFzVVJMID09PSBudWxsIHx8IGlzU3BlY2lhbChhc1VSTCkpKSB7XG4gICAgICAgICAgICBpZiAocmVzb2x1dGlvblJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYHJlc29sdXRpb24gb2Ygc3BlY2lmaWVyS2V5IHdhcyBibG9ja2VkIGJ5IGEgbnVsbCBlbnRyeS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNVUkwocmVzb2x1dGlvblJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGByZXNvbHV0aW9uUmVzdWx0IG11c3QgYmUgYW4gVVJMLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYWZ0ZXJQcmVmaXggPSBub3JtYWxpemVkU3BlY2lmaWVyLnNsaWNlKHNwZWNpZmllcktleS5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKCFyZXNvbHV0aW9uUmVzdWx0LmVuZHNXaXRoKFwiL1wiKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYHJlc29sdXRpb25SZXN1bHQgZG9lcyBub3QgZW5kIHdpdGggXCIvXCJgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChhZnRlclByZWZpeCwgcmVzb2x1dGlvblJlc3VsdCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1VSTCh1cmwpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYHVybCBtdXN0IGJlIGFuIFVSTC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFzZXJpYWxpemVVUkwodXJsKS5zdGFydHNXaXRoKHJlc29sdXRpb25SZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYHJlc29sdXRpb24gb2Ygbm9ybWFsaXplZFNwZWNpZmllciB3YXMgYmxvY2tlZCBkdWUgdG8gaXQgYmFja3RyYWNraW5nIGFib3ZlIGl0cyBwcmVmaXggc3BlY2lmaWVyS2V5LmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gc2VyaWFsaXplVVJMKHVybCk7XG4gICAgICAgICAgICB9IGNhdGNoICB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgcmVzb2x1dGlvbiBvZiBub3JtYWxpemVkU3BlY2lmaWVyIHdhcyBibG9ja2VkIHNpbmNlIHRoZSBhZnRlclByZWZpeCBwb3J0aW9uIGNvdWxkIG5vdCBiZSBVUkwtcGFyc2VkIHJlbGF0aXZlIHRvIHRoZSByZXNvbHV0aW9uUmVzdWx0IG1hcHBlZCB0byBieSB0aGUgc3BlY2lmaWVyS2V5IHByZWZpeC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIHJlc29sdmVNb2R1bGVTcGVjaWZpZXIoc3BlY2lmaWVyLCB7IGltcG9ydHMgPXtcbn0gLCBzY29wZXMgPXtcbn0gIH0sIGJhc2VVUkwpIHtcbiAgICBjb25zdCBiYXNlVVJMU3RyaW5nID0gc2VyaWFsaXplVVJMKGJhc2VVUkwpO1xuICAgIGNvbnN0IGFzVVJMID0gcGFyc2VVcmxMaWtlSW1wb3J0U3BlY2lmaWVyKHNwZWNpZmllciwgYmFzZVVSTCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNwZWNpZmllciA9IGFzVVJMICE9PSBudWxsID8gc2VyaWFsaXplVVJMKGFzVVJMKSA6IHNwZWNpZmllcjtcbiAgICBmb3IgKGNvbnN0IFtzY29wZVByZWZpeCwgc2NvcGVJbXBvcnRzXSBvZiBPYmplY3QuZW50cmllcyhzY29wZXMpKXtcbiAgICAgICAgaWYgKHNjb3BlUHJlZml4ID09PSBiYXNlVVJMU3RyaW5nIHx8IHNjb3BlUHJlZml4LmVuZHNXaXRoKFwiL1wiKSAmJiBiYXNlVVJMU3RyaW5nLnN0YXJ0c1dpdGgoc2NvcGVQcmVmaXgpKSB7XG4gICAgICAgICAgICBjb25zdCBzY29wZUltcG9ydHNNYXRjaCA9IHJlc29sdmVJbXBvcnRzTWF0Y2gobm9ybWFsaXplZFNwZWNpZmllciwgYXNVUkwsIHNjb3BlSW1wb3J0cyk7XG4gICAgICAgICAgICBpZiAoc2NvcGVJbXBvcnRzTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGVJbXBvcnRzTWF0Y2g7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgdG9wTGV2ZWxJbXBvcnRzTWF0Y2ggPSByZXNvbHZlSW1wb3J0c01hdGNoKG5vcm1hbGl6ZWRTcGVjaWZpZXIsIGFzVVJMLCBpbXBvcnRzKTtcbiAgICBpZiAodG9wTGV2ZWxJbXBvcnRzTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRvcExldmVsSW1wb3J0c01hdGNoO1xuICAgIH1cbiAgICBpZiAoYXNVUkwgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZVVSTChhc1VSTCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYHNwZWNpZmllciB3YXMgYSBiYXJlIHNwZWNpZmllciwgYnV0IHdhcyBub3QgcmVtYXBwZWQgdG8gYW55dGhpbmcgYnkgaW1wb3J0TWFwLmApO1xufVxuY29uc3QgbG9hZGVyTGlzdCA9IFtcbiAgICBcImpzXCIsXG4gICAgXCJqc3hcIixcbiAgICBcInRzXCIsXG4gICAgXCJ0c3hcIixcbiAgICBcImNzc1wiLFxuICAgIFwianNvblwiLFxuICAgIFwidGV4dFwiLFxuICAgIFwiYmFzZTY0XCIsXG4gICAgXCJmaWxlXCIsXG4gICAgXCJkYXRhdXJsXCIsXG4gICAgXCJiaW5hcnlcIixcbiAgICBcImRlZmF1bHRcIiwgXG5dO1xuZnVuY3Rpb24gaXNMb2FkZXIobG9hZGVyKSB7XG4gICAgcmV0dXJuIGxvYWRlckxpc3QuaW5jbHVkZXMobG9hZGVyKTtcbn1cbmNvbnN0IG5hbWUgPSBcInJlbW90ZS1yZXNvdXJjZVwiO1xuY29uc3QgcmVtb3RlTG9hZGVyID0gKG9wdGlvbnMpPT4oe1xuICAgICAgICBuYW1lLFxuICAgICAgICBzZXR1cCAoeyBvblJlc29sdmUgLCBvbkxvYWQgIH0pIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaW1wb3J0bWFwID17XG4gICAgICAgICAgICAgICAgaW1wb3J0czoge1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gLCBiYXNlVVJMICB9ID0gb3B0aW9ucyA/PyB7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgb25SZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IC8uKi9cbiAgICAgICAgICAgIH0sICh7IHBhdGggLCBuYW1lc3BhY2UgLCBpbXBvcnRlciAsIHJlc29sdmVEaXIgIH0pPT57XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzb2x2ZWRQYXRoID0gcmVzb2x2ZU1vZHVsZVNwZWNpZmllcihwYXRoLCBpbXBvcnRtYXAsIGJhc2VVUkwpO1xuICAgICAgICAgICAgICAgIGlmIChyZXNvbHZlZFBhdGguc3RhcnRzV2l0aChcImh0dHBcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZURpclxuICAgICAgICAgICAgICAgICAgICB9LCBcIi0+XCIsIHJlc29sdmVkUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiByZXNvbHZlZFBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5hbWVzcGFjZSA9PT0gbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVEaXJcbiAgICAgICAgICAgICAgICAgICAgfSwgXCItPlwiLCBuZXcgVVJMKHJlc29sdmVkUGF0aCwgaW1wb3J0ZXIpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbmV3IFVSTChyZXNvbHZlZFBhdGgsIGltcG9ydGVyKS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWRQYXRoLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlRGlyXG4gICAgICAgICAgICAgICAgfSwgXCItPlwiLCBuZXcgVVJMKHJlc29sdmVkUGF0aCwgcmVzb2x2ZURpcikudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogbmV3IFVSTChyZXNvbHZlZFBhdGgsIHJlc29sdmVEaXIpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvbkxvYWQoe1xuICAgICAgICAgICAgICAgIGZpbHRlcjogLy4qLyxcbiAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IG5hbWVcbiAgICAgICAgICAgIH0sIGFzeW5jICh7IHBhdGggIH0pPT57XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2gocGF0aCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYERvd25sb2FkICR7cGF0aH1gKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyByZXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBhd2FpdCByZXMudGV4dCgpLFxuICAgICAgICAgICAgICAgICAgICBsb2FkZXI6IGdldExvYWRlcihyZXMpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSlcbjtcbmZ1bmN0aW9uIGdldExvYWRlcihyZXNwb25zZSkge1xuICAgIGNvbnN0IHVybCA9IHJlc3BvbnNlLnVybDtcbiAgICBjb25zdCBleHQgPSB1cmwuc3BsaXQoXCIuXCIpLnBvcCgpO1xuICAgIGlmIChleHQgJiYgaXNMb2FkZXIoZXh0KSkgcmV0dXJuIGV4dDtcbiAgICBpZiAoZXh0ID09PSBcIm1qc1wiKSByZXR1cm4gXCJqc1wiO1xuICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoXCJDb250ZW50LVR5cGVcIikgPz8gXCJ0ZXh0L3BsYWluXCI7XG4gICAgcmV0dXJuIGlzTG9hZGVyKGNvbnRlbnRUeXBlKSA/IGNvbnRlbnRUeXBlIDogXCJ0ZXh0XCI7XG59XG5sZXQgaW5pdGlhbGl6ZWQ7XG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGFzeW5jIChldmVudCk9PntcbiAgICBpbml0aWFsaXplZCA/Pz0gaW5pdGlhbGl6ZSh7XG4gICAgICAgIHdhc21VUkw6IFwiLi9lc2J1aWxkLndhc21cIixcbiAgICAgICAgd29ya2VyOiBmYWxzZVxuICAgIH0pO1xuICAgIGF3YWl0IGluaXRpYWxpemVkO1xuICAgIGNvbnN0IHsgZW50cnlVUkwgLCAuLi5vcHRpb25zIH0gPSBldmVudC5kYXRhO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGJ1aWxkKHtcbiAgICAgICAgc3RkaW46IHtcbiAgICAgICAgICAgIGNvbnRlbnRzOiBgaW1wb3J0IFwiJHtlbnRyeVVSTH1cIjtgXG4gICAgICAgIH0sXG4gICAgICAgIHdyaXRlOiBmYWxzZSxcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgcGx1Z2luczogW1xuICAgICAgICAgICAgcmVtb3RlTG9hZGVyKHtcbiAgICAgICAgICAgICAgICBiYXNlVVJMOiBuZXcgVVJMKGVudHJ5VVJMKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgXVxuICAgIH0pO1xuICAgIHNlbGYucG9zdE1lc3NhZ2UocmVzdWx0Lm91dHB1dEZpbGVzWzBdLnRleHQpO1xufSk7XG5cbiJdLAogICJtYXBwaW5ncyI6ICJBQUFBLEdBQUksV0FBWSxPQUFPLGVBQ25CLFdBQWEsT0FBTyxpQkFDcEIsa0JBQW9CLE9BQU8sMEJBQzNCLG9CQUFzQixPQUFPLHNCQUM3QixhQUFlLE9BQU8sVUFBVSxlQUNoQyxhQUFlLE9BQU8sVUFBVSxxQkFDcEMsUUFBUSxJQUNSLFFBQVEsSUFDUixHQUFJLGlCQUFrQixDQUFDLEVBQUssRUFBSyxJQUFRLElBQU8sR0FBTSxVQUFVLEVBQUssRUFBSyxDQUNsRSxXQUFZLEdBQ1osYUFBYyxHQUNkLFNBQVUsR0FDVixVQUNDLEVBQUksR0FBTyxFQUVoQixlQUFpQixDQUFDLEVBQUcs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QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7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
